<?xml version="1.0" encoding="UTF-8"?>
<SceneFlow id="" name="Behavior Flow Model" comment="" hideLocalVar="false" hideGlobalVar="false" modifDate="Sa, 14 Jan 2017 12:12:28" start="N651;" context="" package="" xmlns="xml.sceneflow.dfki.de" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="xml.sceneflow.dfki.de res/xsd/sceneflow.xsd">
  <Define>
  </Define>
  <Declare>
    <Variable type="String" name ="SystemTime">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserRole">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="AgentRole">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserAction">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="AgentAction">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserGaze">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="AgentGaze">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserFace">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserHead">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserMove">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserSpeech">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="Bool" name ="UserPresent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentPresent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserSpeaking">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentSpeaking">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserDragging">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserOverAgent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentOverUser">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserBargingInAgent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserBearingUpAgent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserClaimingTurn">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentClaimingTurn">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserInterruptible">
      <Bool value="true"/>
    </Variable>
    <Variable type="Bool" name ="AgentInterruptible">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentInterjectable">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="SharedGaze">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="MutualGaze">
      <Bool value="false"/>
    </Variable>
  </Declare>
  <Commands>
  </Commands>
  <LocalVariableBadge>
    <Position xPos="4" yPos="-37"/>
  </LocalVariableBadge>
  <GlobalVariableBadge>
    <Position xPos="10" yPos="10"/>
  </GlobalVariableBadge>
  <Node id="N651" name="Clean And;Reset Fact; Base" history="false">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
      <PrologQuery>
      <String><![CDATA[clean, reset.]]></String>
      </PrologQuery>
    </Commands>
    <EEdge target="S56" start ="">
    <Graphics>
      <Connection>
        <ControlPoint xPos="346" yPos="66" ctrlXPos="406" ctrlYPos="66"/>
        <ControlPoint xPos="426" yPos="66" ctrlXPos="366" ctrlYPos="66"/>
      </Connection>
    </Graphics>
    </EEdge>
    <Graphics>
      <Position xPos="266" yPos="26"/>
    </Graphics>
  </Node>
  <SuperNode id="S56" name="Interaction;Behavior;Model" comment="" hideLocalVar="false" hideGlobalVar="false" start="S20;S48;S26;S16;S40;">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
    </Commands>
    <Graphics>
      <Position xPos="426" yPos="26"/>
    </Graphics>
    <LocalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </LocalVariableBadge>
    <GlobalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </GlobalVariableBadge>
    <Node id="N99" name="History" history="true">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="266" yPos="26"/>
      </Graphics>
    </Node>
    <SuperNode id="S26" name="Behavior;Pattern;Detection" comment="" hideLocalVar="false" hideGlobalVar="false" start="S112;S1;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="266" yPos="346"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N50" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="26"/>
        </Graphics>
      </Node>
      <SuperNode id="S47" name="Connection;Event;Detection" comment="" hideLocalVar="false" hideGlobalVar="false" start="S15;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="586" yPos="346"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N89" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S8" name="Detect;Adjacency;Pairs" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N6" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S11" name="Detect;Backchannel;Cues" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="26"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N7" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S107" name="Detect;Directed;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="186" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N255" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S108" name="Detect;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="186" yPos="26"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N256" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S15" name="Detect;Adjacencies;/ Responses" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="506" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N24" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S42" name="Detect;Verbal;Backchannels" comment="" hideLocalVar="false" hideGlobalVar="false" start="S45;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="506" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N25" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S43" name="No;Backchannel;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N42;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S45" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="506" yPos="106" ctrlXPos="452" ctrlYPos="159"/>
                  <ControlPoint xPos="426" yPos="186" ctrlXPos="479" ctrlYPos="132"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="UserOverlappingAgent"/>
              </Not>
            </IEdge>
            <Graphics>
              <Position xPos="506" yPos="26"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N33" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N42" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N42" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                  <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S45" name="No;Voice;Overlap" comment="" hideLocalVar="false" hideGlobalVar="false" start="N49;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S54" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                  <ControlPoint xPos="666" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              <Variable name="UserOverlappingAgent"/>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N43" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="33" yPos="156"/>
              </Graphics>
            </Node>
            <Node id="N49" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N49" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="33" yPos="236"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S54" name="User;Overlapping;Agent" comment="" hideLocalVar="false" hideGlobalVar="false" start="N61;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S43" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="186" ctrlXPos="612" ctrlYPos="132"/>
                  <ControlPoint xPos="586" yPos="106" ctrlXPos="639" ctrlYPos="159"/>
                </Connection>
              </Graphics>
              <TimeoutCondition>
              <Int value="1000"/>
              </TimeoutCondition>
            </IEdge>
            <IEdge target="S55" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="266" ctrlXPos="612" ctrlYPos="319"/>
                  <ControlPoint xPos="586" yPos="346" ctrlXPos="639" ctrlYPos="292"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="UserOverlappingAgent"/>
              </Not>
            </IEdge>
            <Graphics>
              <Position xPos="666" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N60" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="40" yPos="157"/>
              </Graphics>
            </Node>
            <Node id="N61" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N61" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="40" yPos="237"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S55" name="Produce;Backchannel;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(user, back, verbal).]]></String>
              </PrologQuery>
            </Commands>
            <EEdge target="S45" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="346" ctrlXPos="452" ctrlYPos="292"/>
                <ControlPoint xPos="426" yPos="266" ctrlXPos="479" ctrlYPos="319"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N62" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="0" yPos="0"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S70" name="Detect;Nonverbal;Backchannels" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="586" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N66" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S112" name="Voice;Overlap And;Conflict;Detection" comment="" hideLocalVar="false" hideGlobalVar="false" start="S10;S150;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="346"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N225" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="506" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S10" name="Detect;Voice;Overlaps" comment="" hideLocalVar="false" hideGlobalVar="false" start="S78;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="201" yPos="16"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N226" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="426" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N74" name="User;Overlaps;Agent" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserOverAgent"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <EEdge target="S115" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="1071" yPos="206" ctrlXPos="1026" ctrlYPos="215"/>
                <ControlPoint xPos="1003" yPos="346" ctrlXPos="1015" ctrlYPos="236"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="1066" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N86" name="Agent;Overlaps;User" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentOverUser"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <EEdge target="S115" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="1071" yPos="526" ctrlXPos="1026" ctrlYPos="396"/>
                <ControlPoint xPos="1015" yPos="346" ctrlXPos="1015" ctrlYPos="375"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="1066" yPos="506"/>
            </Graphics>
          </Node>
          <SuperNode id="S78" name="None; Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N228;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserOverAgent"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Assign>
                <Variable name="AgentOverUser"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S113" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="466" yPos="266" ctrlXPos="466" ctrlYPos="181"/>
                  <ControlPoint xPos="666" yPos="146" ctrlXPos="581" ctrlYPos="146"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S114" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="506" yPos="317" ctrlXPos="590" ctrlYPos="340"/>
                  <ControlPoint xPos="666" yPos="426" ctrlXPos="581" ctrlYPos="341"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="UserSpeaking"/>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="426" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N227" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N228" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N228" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                  <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S113" name="Agent Is;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N230;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserOverAgent"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Assign>
                <Variable name="AgentOverUser"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S78" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="186" ctrlXPos="581" ctrlYPos="270"/>
                  <ControlPoint xPos="506" yPos="295" ctrlXPos="590" ctrlYPos="271"/>
                </Connection>
              </Graphics>
              <And>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="N74" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="746" yPos="146" ctrlXPos="846" ctrlYPos="146"/>
                  <ControlPoint xPos="1078" yPos="198" ctrlXPos="886" ctrlYPos="146"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Variable name="UserSpeaking"/>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="666" yPos="106"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N229" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N230" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N230" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                  <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S114" name="User Is;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N232;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserOverAgent"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Assign>
                <Variable name="AgentOverUser"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S78" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="466" ctrlXPos="581" ctrlYPos="466"/>
                  <ControlPoint xPos="466" yPos="346" ctrlXPos="466" ctrlYPos="430"/>
                </Connection>
              </Graphics>
              <And>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="N86" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="746" yPos="466" ctrlXPos="846" ctrlYPos="466"/>
                  <ControlPoint xPos="1078" yPos="518" ctrlXPos="886" ctrlYPos="466"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Variable name="UserSpeaking"/>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="666" yPos="426"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N231" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N232" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N232" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                  <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S115" name="Both Are;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N234;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S114" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="986" yPos="346" ctrlXPos="821" ctrlYPos="377"/>
                  <ControlPoint xPos="746" yPos="426" ctrlXPos="830" ctrlYPos="341"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="UserSpeaking"/>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S78" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="986" yPos="363" ctrlXPos="726" ctrlYPos="306"/>
                  <ControlPoint xPos="506" yPos="306" ctrlXPos="686" ctrlYPos="306"/>
                </Connection>
              </Graphics>
              <And>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S113" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="986" yPos="375" ctrlXPos="821" ctrlYPos="234"/>
                  <ControlPoint xPos="746" yPos="186" ctrlXPos="830" ctrlYPos="270"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="986" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N233" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N234" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N234" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="236" yPos="267" ctrlXPos="256" ctrlYPos="189"/>
                  <ControlPoint xPos="261" yPos="286" ctrlXPos="331" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="266"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S150" name="Detect;Voice;Conflicts" comment="" hideLocalVar="false" hideGlobalVar="false" start="S154;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="191" yPos="7"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Comment>
            <Graphics>
              <Boundary xPos="700" yPos="395" width="156" height="62"/>
            </Graphics>
            <Text style="color:blue">
              We also need to detect backchannels during overlaps in this process
            </Text>
          </Comment>
          <Node id="N237" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S151" name="User;Barging In;Agent" comment="" hideLocalVar="false" hideGlobalVar="false" start="N239;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserBargingInAgent"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S154" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                  <ControlPoint xPos="626" yPos="266" ctrlXPos="626" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="UserOverAgent"/>
              </Not>
            </IEdge>
            <Graphics>
              <Position xPos="586" yPos="26"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N238" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="49" yPos="154"/>
              </Graphics>
            </Node>
            <Node id="N239" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N239" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="49" yPos="234"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S152" name="Await;Timeout" comment="" hideLocalVar="false" hideGlobalVar="false" start="N241;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S154" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="826" yPos="346" ctrlXPos="806" ctrlYPos="366"/>
                  <ControlPoint xPos="666" yPos="346" ctrlXPos="686" ctrlYPos="366"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="UserOverAgent"/>
              </Not>
            </IEdge>
            <IEdge target="S156" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="866" yPos="266" ctrlXPos="866" ctrlYPos="246"/>
                  <ControlPoint xPos="866" yPos="106" ctrlXPos="867" ctrlYPos="120"/>
                </Connection>
              </Graphics>
              <TimeoutCondition>
              <Int value="1000"/>
              </TimeoutCondition>
            </IEdge>
            <Graphics>
              <Position xPos="826" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N240" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="40" yPos="157"/>
              </Graphics>
            </Node>
            <Node id="N241" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N241" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="40" yPos="237"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S153" name="Await;Timeout" comment="" hideLocalVar="false" hideGlobalVar="false" start="N243;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S154" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="346" ctrlXPos="446" ctrlYPos="366"/>
                  <ControlPoint xPos="586" yPos="346" ctrlXPos="566" ctrlYPos="366"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="AgentOverUser"/>
              </Not>
            </IEdge>
            <IEdge target="S157" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="386" yPos="346" ctrlXPos="386" ctrlYPos="366"/>
                  <ControlPoint xPos="386" yPos="506" ctrlXPos="386" ctrlYPos="486"/>
                </Connection>
              </Graphics>
              <TimeoutCondition>
              <Int value="1000"/>
              </TimeoutCondition>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N242" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="37" yPos="162"/>
              </Graphics>
            </Node>
            <Node id="N243" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N243" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="37" yPos="242"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S154" name="No;Turn;Conflict" comment="" hideLocalVar="false" hideGlobalVar="false" start="N245;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserBearingUpAgent"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Assign>
                <Variable name="UserBargingInAgent"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S153" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="586" yPos="266" ctrlXPos="566" ctrlYPos="246"/>
                  <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              <Variable name="AgentOverUser"/>
            </IEdge>
            <IEdge target="S152" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="266" ctrlXPos="686" ctrlYPos="246"/>
                  <ControlPoint xPos="826" yPos="266" ctrlXPos="806" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              <Variable name="UserOverAgent"/>
            </IEdge>
            <Graphics>
              <Position xPos="586" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N244" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="33" yPos="156"/>
              </Graphics>
            </Node>
            <Node id="N245" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N245" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="33" yPos="236"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S155" name="User;Bearing Up;Agent" comment="" hideLocalVar="false" hideGlobalVar="false" start="N247;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserBearingUpAgent"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S154" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="626" yPos="506" ctrlXPos="626" ctrlYPos="486"/>
                  <ControlPoint xPos="626" yPos="346" ctrlXPos="626" ctrlYPos="366"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="AgentOverUser"/>
              </Not>
            </IEdge>
            <Graphics>
              <Position xPos="586" yPos="506"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N246" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="21" yPos="151"/>
              </Graphics>
            </Node>
            <Node id="N247" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N247" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="21" yPos="231"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S156" name="User;Barges In" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(user, turn, conflict).]]></String>
              </PrologQuery>
            </Commands>
            <EEdge target="S151" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="826" yPos="66" ctrlXPos="806" ctrlYPos="66"/>
                <ControlPoint xPos="666" yPos="66" ctrlXPos="686" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="826" yPos="26"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N248" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S157" name="User;Bears Up" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(user, turn, conflict).]]></String>
              </PrologQuery>
            </Commands>
            <EEdge target="S155" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="546" ctrlXPos="446" ctrlYPos="546"/>
                <ControlPoint xPos="586" yPos="546" ctrlXPos="566" ctrlYPos="546"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="506"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N249" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S46" name="Detect;Overlaps /;Continuers" comment="" hideLocalVar="false" hideGlobalVar="false" start="S175;">
          <Define>
          </Define>
          <Declare>
            <Variable type="String" name ="Start">
              <String><![CDATA[]]></String>
            </Variable>
            <Variable type="String" name ="End">
              <String><![CDATA[]]></String>
            </Variable>
            <Variable type="String" name ="Dur">
              <String><![CDATA[]]></String>
            </Variable>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="615" yPos="342"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Comment>
            <Graphics>
              <Boundary xPos="257" yPos="287" width="199" height="79"/>
            </Graphics>
            <Text style="color:blue">
              We stay in this node whenever the user has started speaking before the agent, no matter if the agent overlaps the user in between.
            </Text>
          </Comment>
          <Node id="N26" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S58" name="Agent;Is Still;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N48;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S175" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="946" yPos="403" ctrlXPos="787" ctrlYPos="294"/>
                  <ControlPoint xPos="666" yPos="249" ctrlXPos="784" ctrlYPos="317"/>
                </Connection>
              </Graphics>
              <And>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S181" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="946" yPos="415" ctrlXPos="821" ctrlYPos="457"/>
                  <ControlPoint xPos="746" yPos="523" ctrlXPos="830" ctrlYPos="474"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Variable name="UserSpeaking"/>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="946" yPos="386"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N46" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="266" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N48" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N48" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                  <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="266" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S167" name="User Has;Started;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N87;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S175" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="346" yPos="215" ctrlXPos="446" ctrlYPos="187"/>
                  <ControlPoint xPos="586" yPos="215" ctrlXPos="486" ctrlYPos="187"/>
                </Connection>
              </Graphics>
              <And>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="266" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N72" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="282" yPos="50"/>
              </Graphics>
            </Node>
            <Node id="N87" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N87" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                  <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="282" yPos="130"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S175" name="None Is;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N187;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[stop(overlap).]]></String>
              </PrologQuery>
            </Commands>
            <IEdge target="S176" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="215" ctrlXPos="766" ctrlYPos="187"/>
                  <ControlPoint xPos="946" yPos="226" ctrlXPos="806" ctrlYPos="187"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S167" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="586" yPos="237" ctrlXPos="486" ctrlYPos="264"/>
                  <ControlPoint xPos="346" yPos="226" ctrlXPos="446" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="UserSpeaking"/>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="586" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N186" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="290" yPos="31"/>
              </Graphics>
            </Node>
            <Node id="N187" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N187" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                  <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="290" yPos="111"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S176" name="Agent Has;Started;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N189;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S175" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="946" yPos="243" ctrlXPos="806" ctrlYPos="226"/>
                  <ControlPoint xPos="666" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              <And>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S58" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="946" yPos="266" ctrlXPos="946" ctrlYPos="286"/>
                  <ControlPoint xPos="946" yPos="386" ctrlXPos="946" ctrlYPos="326"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <String><![CDATA[timeout(overlap, 5000).]]></String>
              </PrologQuery>
            </IEdge>
            <IEdge target="S177" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="963" yPos="226" ctrlXPos="946" ctrlYPos="166"/>
                  <ControlPoint xPos="946" yPos="106" ctrlXPos="946" ctrlYPos="126"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Variable name="UserSpeaking"/>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="946" yPos="226"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N188" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="252" yPos="61"/>
              </Graphics>
            </Node>
            <Node id="N189" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N189" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                  <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="252" yPos="141"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S177" name="Both Are;Initially;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N200;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[now(Start).]]></String>
              </PrologQuery>
            </Commands>
            <IEdge target="S178" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="946" yPos="66" ctrlXPos="726" ctrlYPos="66"/>
                  <ControlPoint xPos="506" yPos="66" ctrlXPos="686" ctrlYPos="66"/>
                </Connection>
              </Graphics>
              <And>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
                <Variable name="UserSpeaking"/>
              </And>
            </IEdge>
            <IEdge target="S180" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="986" yPos="66" ctrlXPos="1087" ctrlYPos="102"/>
                  <ControlPoint xPos="1266" yPos="226" ctrlXPos="1172" ctrlYPos="132"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="946" yPos="66"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N197" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="266" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N200" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N200" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                  <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="266" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S178" name="Turn-Initial;Continuer;Detected" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[now(End), Dur is End - ]]></String>
                  <Variable name="Start"/>
                </Add>
                <String><![CDATA[.]]></String>
              </Add>
              </PrologQuery>
            </Commands>
            <EEdge target="S167" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="106" ctrlXPos="372" ctrlYPos="159"/>
                <ControlPoint xPos="346" yPos="186" ctrlXPos="399" ctrlYPos="132"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="426" yPos="26"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N201" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="0" yPos="0"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S179" name="Turn-Internal;Overlap;Detected" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[now(End), Dur is End - ]]></String>
                  <Variable name="Start"/>
                </Add>
                <String><![CDATA[.]]></String>
              </Add>
              </PrologQuery>
            </Commands>
            <EEdge target="S58" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="1106" yPos="563" ctrlXPos="1012" ctrlYPos="452"/>
                <ControlPoint xPos="1026" yPos="426" ctrlXPos="1039" ctrlYPos="479"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="1106" yPos="546"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N220" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="266" yPos="26"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S180" name="Turn-Initial;Overlap;Detected" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[now(End), Dur is End - ]]></String>
                  <Variable name="Start"/>
                </Add>
                <String><![CDATA[.]]></String>
              </Add>
              </PrologQuery>
            </Commands>
            <EEdge target="S58" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="1266" yPos="266" ctrlXPos="1172" ctrlYPos="319"/>
                <ControlPoint xPos="986" yPos="386" ctrlXPos="1039" ctrlYPos="292"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="1266" yPos="226"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N221" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="266" yPos="26"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S181" name="Both Are;Internally;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N223;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[now(Start).]]></String>
              </PrologQuery>
            </Commands>
            <IEdge target="S179" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="746" yPos="546" ctrlXPos="886" ctrlYPos="546"/>
                  <ControlPoint xPos="1106" yPos="546" ctrlXPos="926" ctrlYPos="546"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S182" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="523" ctrlXPos="581" ctrlYPos="474"/>
                  <ControlPoint xPos="506" yPos="409" ctrlXPos="590" ctrlYPos="457"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="UserSpeaking"/>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="666" yPos="506"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N222" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="266" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N223" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N223" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                  <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="266" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S182" name="Turn-Internal;Continuer;Detected" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S167" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="346" ctrlXPos="372" ctrlYPos="292"/>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="399" ctrlYPos="319"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="426" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N257" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="0" yPos="0"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S6" name="Feedback; And Mimicry;Eliciting;Detection" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="426" yPos="346"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N4" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="26"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S12" name="Shared And;Mutual Gaze;Detection" comment="" hideLocalVar="false" hideGlobalVar="false" start="S13;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="426" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="471" yPos="273"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N12" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S13" name="One Is;Looking;Nowhere" comment="" hideLocalVar="false" hideGlobalVar="false" start="N30;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="SharedGaze"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="MutualGaze"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S53" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="486" ctrlYPos="126"/>
                <ControlPoint xPos="666" yPos="186" ctrlXPos="606" ctrlYPos="126"/>
              </Connection>
            </Graphics>
            <And>
              <Neq>
                <Variable name="UserGaze"/>
                <String><![CDATA[]]></String>
              </Neq>
              <Neq>
                <Variable name="AgentGaze"/>
                <String><![CDATA[]]></String>
              </Neq>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N28" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N30" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N30" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S53" name="Both Are;Looking;Somewhere" comment="" hideLocalVar="false" hideGlobalVar="false" start="S66;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S13" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="266" ctrlXPos="606" ctrlYPos="326"/>
                <ControlPoint xPos="426" yPos="266" ctrlXPos="486" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <Or>
              <Eq>
                <Variable name="UserGaze"/>
                <String><![CDATA[]]></String>
              </Eq>
              <Eq>
                <Variable name="AgentGaze"/>
                <String><![CDATA[]]></String>
              </Eq>
            </Or>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N32" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S66" name="Different;Gaze;Targets" comment="" hideLocalVar="false" hideGlobalVar="false" start="S67;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="SharedGaze"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S82" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                  <ControlPoint xPos="666" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="UserGaze"/>
                <Variable name="AgentGaze"/>
              </Eq>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N63" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S67" name="No;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="N108;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="MutualGaze"/>
                  <Expression>
                    <Bool value="false"/>
                  </Expression>
                </Assign>
              </Commands>
              <IEdge target="S173" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
                    <ControlPoint xPos="746" yPos="226" ctrlXPos="606" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <And>
                  <Eq>
                    <Variable name="UserGaze"/>
                    <String><![CDATA[agent]]></String>
                  </Eq>
                  <Eq>
                    <Variable name="AgentGaze"/>
                    <String><![CDATA[user]]></String>
                  </Eq>
                </And>
              </IEdge>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N64" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N108" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N108" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S81" name="Mutual;Facial;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="N116;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="MutualGaze"/>
                  <Expression>
                    <Bool value="true"/>
                  </Expression>
                </Assign>
              </Commands>
              <IEdge target="S174" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="746" yPos="386" ctrlXPos="606" ctrlYPos="386"/>
                    <ControlPoint xPos="426" yPos="386" ctrlXPos="566" ctrlYPos="386"/>
                  </Connection>
                </Graphics>
                <Or>
                  <Neq>
                    <Variable name="UserGaze"/>
                    <String><![CDATA[agent]]></String>
                  </Neq>
                  <Neq>
                    <Variable name="AgentGaze"/>
                    <String><![CDATA[user]]></String>
                  </Neq>
                </Or>
              </IEdge>
              <Graphics>
                <Position xPos="746" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N109" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N116" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N116" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S173" name="Start;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <Add>
                  <Add>
                    <String><![CDATA[signal(both, startMutual, ]]></String>
                    <Variable name="UserGaze"/>
                  </Add>
                  <String><![CDATA[).]]></String>
                </Add>
                </PrologQuery>
              </Commands>
              <EEdge target="S81" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="786" yPos="266" ctrlXPos="786" ctrlYPos="286"/>
                  <ControlPoint xPos="786" yPos="346" ctrlXPos="786" ctrlYPos="326"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="746" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N118" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S174" name="Stop;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <Add>
                  <Add>
                    <String><![CDATA[signal(both, stopMutual, ]]></String>
                    <Variable name="UserGaze"/>
                  </Add>
                  <String><![CDATA[).]]></String>
                </Add>
                </PrologQuery>
              </Commands>
              <EEdge target="S67" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="386" yPos="346" ctrlXPos="386" ctrlYPos="326"/>
                  <ControlPoint xPos="386" yPos="266" ctrlXPos="386" ctrlYPos="286"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N119" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S82" name="Start;Sharing;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[signal(both, startShared, ]]></String>
                  <Variable name="UserGaze"/>
                </Add>
                <String><![CDATA[).]]></String>
              </Add>
              </PrologQuery>
            </Commands>
            <EEdge target="S171" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="706" yPos="266" ctrlXPos="706" ctrlYPos="286"/>
                <ControlPoint xPos="706" yPos="346" ctrlXPos="706" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="666" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N117" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S171" name="Sharing;Gaze;Target" comment="" hideLocalVar="false" hideGlobalVar="false" start="N294;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="SharedGaze"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S172" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="386" ctrlXPos="566" ctrlYPos="386"/>
                  <ControlPoint xPos="426" yPos="386" ctrlXPos="526" ctrlYPos="386"/>
                </Connection>
              </Graphics>
              <Neq>
                <Variable name="UserGaze"/>
                <Variable name="AgentGaze"/>
              </Neq>
            </IEdge>
            <Graphics>
              <Position xPos="666" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N292" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N294" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N294" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                  <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S172" name="Stop;Sharing;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[signal(both, stopShared, ]]></String>
                  <Variable name="UserGaze"/>
                </Add>
                <String><![CDATA[).]]></String>
              </Add>
              </PrologQuery>
            </Commands>
            <EEdge target="S66" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="346" ctrlXPos="386" ctrlYPos="326"/>
                <ControlPoint xPos="386" yPos="266" ctrlXPos="386" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N293" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S1" name="Turn Taking;Signal;Detection" comment="" hideLocalVar="false" hideGlobalVar="false" start="S24;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="64" yPos="14"/>
        </GlobalVariableBadge>
        <Node id="N23" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="1146" yPos="266"/>
          </Graphics>
        </Node>
        <Node id="N97" name="User;Takes;Turn" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(user, turn, take).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S2" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="66" ctrlXPos="446" ctrlYPos="66"/>
              <ControlPoint xPos="506" yPos="66" ctrlXPos="486" ctrlYPos="66"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N98" name="User;Holds;Turn" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(user, turn, hold).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S2" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="746" yPos="66" ctrlXPos="686" ctrlYPos="66"/>
              <ControlPoint xPos="586" yPos="66" ctrlXPos="646" ctrlYPos="66"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="746" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N101" name="User; Yields;Turn" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(user, turn, yield).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S24" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="507" yPos="236" ctrlXPos="455" ctrlYPos="249"/>
              <ControlPoint xPos="426" yPos="375" ctrlXPos="479" ctrlYPos="360"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="506" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N102" name="User;Assigns;Turn" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(user, turn, assign).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S24" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="386" ctrlXPos="486" ctrlYPos="386"/>
              <ControlPoint xPos="426" yPos="386" ctrlXPos="446" ctrlYPos="386"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="506" yPos="346"/>
          </Graphics>
        </Node>
        <SuperNode id="S2" name="User Is;Active" comment="" hideLocalVar="false" hideGlobalVar="false" start="N41;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserClaimingTurn"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S31" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="106" ctrlXPos="670" ctrlYPos="190"/>
                <ControlPoint xPos="746" yPos="186" ctrlXPos="661" ctrlYPos="101"/>
              </Connection>
            </Graphics>
            <And>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
              <Not>
                <Variable name="UserDragging"/>
              </Not>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="506" yPos="26"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N27" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N41" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N41" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S24" name="User Is Not; Active" comment="" hideLocalVar="false" hideGlobalVar="false" start="N88;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserClaimingTurn"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S44" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="346" ctrlXPos="326" ctrlYPos="326"/>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="326" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            <Or>
              <Variable name="UserSpeaking"/>
              <Variable name="UserDragging"/>
            </Or>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N56" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N88" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N88" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S31" name="User;Stopped;Activity" comment="" hideLocalVar="false" hideGlobalVar="false" start="N82;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S41" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="786" yPos="266" ctrlXPos="786" ctrlYPos="286"/>
                <ControlPoint xPos="786" yPos="346" ctrlXPos="786" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="750"/>
            </TimeoutCondition>
          </IEdge>
          <IEdge target="N98" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="786" yPos="186" ctrlXPos="786" ctrlYPos="166"/>
                <ControlPoint xPos="786" yPos="106" ctrlXPos="786" ctrlYPos="126"/>
              </Connection>
            </Graphics>
            <Or>
              <Variable name="UserSpeaking"/>
              <Variable name="UserDragging"/>
            </Or>
          </IEdge>
          <Graphics>
            <Position xPos="746" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N81" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N82" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N82" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S41" name="User Is Not; Active" comment="" hideLocalVar="false" hideGlobalVar="false" start="N94;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="N98" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="826" yPos="375" ctrlXPos="926" ctrlYPos="347"/>
                <ControlPoint xPos="826" yPos="66" ctrlXPos="926" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <Or>
              <Variable name="UserSpeaking"/>
              <Variable name="UserDragging"/>
            </Or>
          </IEdge>
          <IEdge target="N101" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="363" ctrlXPos="661" ctrlYPos="314"/>
                <ControlPoint xPos="586" yPos="226" ctrlXPos="670" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="1000"/>
            </TimeoutCondition>
          </IEdge>
          <IEdge target="N102" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="386" ctrlXPos="686" ctrlYPos="386"/>
                <ControlPoint xPos="586" yPos="386" ctrlXPos="646" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="UserGaze"/>
              <String><![CDATA[agent]]></String>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="746" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N90" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N94" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N94" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S44" name="User;Started;Activity" comment="" hideLocalVar="false" hideGlobalVar="false" start="N96;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S24" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="286"/>
                <ControlPoint xPos="426" yPos="346" ctrlXPos="446" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <And>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
              <Not>
                <Variable name="UserDragging"/>
              </Not>
            </And>
          </IEdge>
          <IEdge target="N97" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="166"/>
                <ControlPoint xPos="386" yPos="106" ctrlXPos="386" ctrlYPos="126"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="500"/>
            </TimeoutCondition>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N95" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N96" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N96" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S5" name="Back-;Channel And;Response;Detection" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="586" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N3" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="0" yPos="0"/>
          </Graphics>
        </Node>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S20" name="Participant;Role Shift;Decisions" comment="" hideLocalVar="false" hideGlobalVar="false" start="S22;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="266" yPos="266"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Comment>
        <Graphics>
          <Boundary xPos="231" yPos="281" width="370" height="93"/>
        </Graphics>
        <Text style="color:blue">
          This process determines the assignment of the different participant roles to the user and the agent as well as the shifts of these participant roles between the user and the agent. The determination of the participant roles is based on the attendance of the interaction partners as well as the role regulation signals.
        </Text>
      </Comment>
      <Node id="N1" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="106"/>
        </Graphics>
      </Node>
      <SuperNode id="S22" name="No;Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="N52;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <Assign>
            <Variable name="UserRole"/>
            <Expression>
              <String><![CDATA[absent]]></String>
            </Expression>
          </Assign>
          <Assign>
            <Variable name="AgentRole"/>
            <Expression>
              <String><![CDATA[absent]]></String>
            </Expression>
          </Assign>
          <Play>
            <String><![CDATA[[wizard refresh]]]></String>
          </Play>
        </Commands>
        <IEdge target="S27" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="106" ctrlXPos="526" ctrlYPos="86"/>
              <ControlPoint xPos="586" yPos="106" ctrlXPos="566" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          <And>
            <Variable name="UserPresent"/>
            <Variable name="AgentPresent"/>
          </And>
        </IEdge>
        <Graphics>
          <Position xPos="426" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N29" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N52" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N52" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
              <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="106"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S27" name="Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="S28;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S22" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="586" yPos="186" ctrlXPos="566" ctrlYPos="206"/>
              <ControlPoint xPos="506" yPos="186" ctrlXPos="526" ctrlYPos="206"/>
            </Connection>
          </Graphics>
          <Or>
            <Not>
              <Variable name="UserPresent"/>
            </Not>
            <Not>
              <Variable name="AgentPresent"/>
            </Not>
          </Or>
        </IEdge>
        <Graphics>
          <Position xPos="586" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N51" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="586" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S28" name="Bystander" comment="" hideLocalVar="false" hideGlobalVar="false" start="S59;S51;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserRole"/>
              <Expression>
                <String><![CDATA[bystander]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentRole"/>
              <Expression>
                <String><![CDATA[bystander]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="295" ctrlXPos="766" ctrlYPos="267"/>
                <ControlPoint xPos="906" yPos="295" ctrlXPos="806" ctrlYPos="267"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(user, role, occupy).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="295" ctrlXPos="486" ctrlYPos="267"/>
                <ControlPoint xPos="346" yPos="295" ctrlXPos="446" ctrlYPos="267"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(agent, role, occupy).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="586" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N53" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S59" name="Handle;User Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S63;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S59" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="106"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="506" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N8" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N129" name="Check;Signal;Name" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <CEdge target="N130" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[take]]></String>
                </Eq>
              </CEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N130" name="User;Occupies;Floor" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, occupy).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
            </Node>
            <SuperNode id="S63" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N141;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="N129" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[detect(user, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N15" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N141" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N141" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S51" name="Agent;Dialog;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S258;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S51" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="106"/>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="666" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N125" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N122" name="Check;Signal;Name" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <CEdge target="N127" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[request]]></String>
                </Eq>
              </CEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N127" name="Agent;Occupies;Floor" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(role, dialog, accepted).]]></String>
                </PrologQuery>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, occupy).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
            </Node>
            <SuperNode id="S258" name="Await;Dialog;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N143;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="N122" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[detect(dialog, role, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N136" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N143" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N143" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S29" name="Speaker" comment="" hideLocalVar="false" hideGlobalVar="false" start="S104;S292;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserRole"/>
              <Expression>
                <String><![CDATA[addressee]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentRole"/>
              <Expression>
                <String><![CDATA[speaker]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[nothing]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[nothing]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S28" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="317" ctrlXPos="446" ctrlYPos="344"/>
                <ControlPoint xPos="586" yPos="317" ctrlXPos="485" ctrlYPos="343"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(agent, role, release).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S35" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="346" ctrlXPos="455" ctrlYPos="455"/>
                <ControlPoint xPos="506" yPos="506" ctrlXPos="396" ctrlYPos="396"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(agent, role, offer).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="283" ctrlXPos="606" ctrlYPos="133"/>
                <ControlPoint xPos="906" yPos="283" ctrlXPos="646" ctrlYPos="133"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(user, role, conquer).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="306" yPos="266" ctrlXPos="306" ctrlYPos="186"/>
                <ControlPoint xPos="266" yPos="306" ctrlXPos="186" ctrlYPos="306"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(agent, role, claim).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="317" yPos="266" ctrlXPos="438" ctrlYPos="51"/>
                <ControlPoint xPos="935" yPos="266" ctrlXPos="823" ctrlYPos="27"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(agent, role, giveup).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N69" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S104" name="Agent;Dialog;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S288;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S104" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="106"/>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="666" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N349" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N39" name="Check;Signal;Name" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <CEdge target="S291" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[release]]></String>
                </Eq>
              </CEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
            </Node>
            <SuperNode id="S288" name="Agent;Dialog;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="N363;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="N39" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[detect(dialog, role, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N357" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N363" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N363" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S291" name="Agent;Releases;Floor" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, offer).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N366" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S292" name="Handle;User Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S294;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S292" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="106"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="506" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="523" yPos="235"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Comment>
              <Graphics>
                <Boundary xPos="1034" yPos="169" width="296" height="105"/>
              </Graphics>
              <Text style="color:blue">
                The user can stop speaking in the listener role, if he was interrupted before if he himself started and interrupted the agent but also stopped again before the role switch has been realized due to a lenghty interrupt handling in the dialog process.
              </Text>
            </Comment>
            <Node id="N367" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="266"/>
              </Graphics>
            </Node>
            <Node id="N84" name="Check;Signal;Name" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <CEdge target="N85" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="726" yPos="191" ctrlXPos="768" ctrlYPos="117"/>
                    <ControlPoint xPos="906" yPos="66" ctrlXPos="821" ctrlYPos="66"/>
                  </Connection>
                </Graphics>
                <Or>
                  <Eq>
                    <Variable name="Name"/>
                    <String><![CDATA[yield]]></String>
                  </Eq>
                  <Eq>
                    <Variable name="Name"/>
                    <String><![CDATA[assign]]></String>
                  </Eq>
                </Or>
              </CEdge>
              <CEdge target="S312" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Or>
                  <Eq>
                    <Variable name="Name"/>
                    <String><![CDATA[take]]></String>
                  </Eq>
                  <Eq>
                    <Variable name="Name"/>
                    <String><![CDATA[hold]]></String>
                  </Eq>
                </Or>
              </CEdge>
              <CEdge target="S3" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="746" yPos="226" ctrlXPos="806" ctrlYPos="226"/>
                    <ControlPoint xPos="906" yPos="226" ctrlXPos="846" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[conflict]]></String>
                </Eq>
              </CEdge>
              <Graphics>
                <Position xPos="666" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N85" name="User;Releases;Floor" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, release).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="906" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N92" name="Interrupt;Agent;Turn" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(role, dialog, interrupted).]]></String>
                </PrologQuery>
              </Commands>
              <EEdge target="N123" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="906" yPos="386" ctrlXPos="846" ctrlYPos="386"/>
                  <ControlPoint xPos="746" yPos="386" ctrlXPos="806" ctrlYPos="386"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="906" yPos="346"/>
              </Graphics>
            </Node>
            <Node id="N123" name="User;Conquers;Turn" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, conquer).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="666" yPos="346"/>
              </Graphics>
            </Node>
            <Node id="N181" name="Interject;Agent;Turn" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(role, dialog, interjected).]]></String>
                </PrologQuery>
              </Commands>
              <EEdge target="N123" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="386" ctrlXPos="526" ctrlYPos="386"/>
                  <ControlPoint xPos="666" yPos="386" ctrlXPos="566" ctrlYPos="386"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="346"/>
              </Graphics>
            </Node>
            <Node id="N115" name="User;Occupies;Floor" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, occupy).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S294" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N370;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="N84" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="106" ctrlXPos="639" ctrlYPos="159"/>
                    <ControlPoint xPos="678" yPos="198" ctrlXPos="640" ctrlYPos="160"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[detect(user, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="506" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N369" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N370" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N370" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S312" name="Check;Interrupt;Policy" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="N181" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="386" yPos="266" ctrlXPos="386" ctrlYPos="286"/>
                    <ControlPoint xPos="386" yPos="346" ctrlXPos="386" ctrlYPos="326"/>
                  </Connection>
                </Graphics>
                <Variable name="AgentInterjectable"/>
              </IEdge>
              <IEdge target="N115" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="166"/>
                    <ControlPoint xPos="386" yPos="106" ctrlXPos="386" ctrlYPos="126"/>
                  </Connection>
                </Graphics>
                <Not>
                  <Variable name="AgentInterjectable"/>
                </Not>
              </IEdge>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N392" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="26" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S3" name="Check;Interrupt;Policy" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="N92" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="946" yPos="266" ctrlXPos="946" ctrlYPos="286"/>
                    <ControlPoint xPos="946" yPos="346" ctrlXPos="946" ctrlYPos="326"/>
                  </Connection>
                </Graphics>
                <Variable name="AgentInterruptible"/>
              </IEdge>
              <Graphics>
                <Position xPos="906" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N2" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="26" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S32" name="Addressee" comment="" hideLocalVar="false" hideGlobalVar="false" start="S97;S267;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserRole"/>
              <Expression>
                <String><![CDATA[speaker]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentRole"/>
              <Expression>
                <String><![CDATA[addressee]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[nothing]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[nothing]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S28" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="906" yPos="317" ctrlXPos="806" ctrlYPos="344"/>
                <ControlPoint xPos="666" yPos="317" ctrlXPos="766" ctrlYPos="344"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(user, role, release).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S61" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="906" yPos="346" ctrlXPos="796" ctrlYPos="455"/>
                <ControlPoint xPos="746" yPos="506" ctrlXPos="855" ctrlYPos="396"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(user, role, offer).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="946" yPos="266" ctrlXPos="946" ctrlYPos="186"/>
                <ControlPoint xPos="986" yPos="306" ctrlXPos="1066" ctrlYPos="306"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(user, role, claim).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="923" yPos="266" ctrlXPos="769" ctrlYPos="92"/>
                <ControlPoint xPos="329" yPos="266" ctrlXPos="478" ctrlYPos="95"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(agent, role, conquer).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="906" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N107" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S97" name="Agent;Dialog;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S263;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S97" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="106"/>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="666" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="809" yPos="419"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N147" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N40" name="Check;Signal;Name" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <CEdge target="N47" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="746" yPos="306" ctrlXPos="686" ctrlYPos="306"/>
                    <ControlPoint xPos="586" yPos="306" ctrlXPos="646" ctrlYPos="306"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[request]]></String>
                </Eq>
              </CEdge>
              <Graphics>
                <Position xPos="746" yPos="266"/>
              </Graphics>
            </Node>
            <Node id="N47" name="Check;Interrupt;Policy" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="N54" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="506" yPos="306" ctrlXPos="446" ctrlYPos="306"/>
                    <ControlPoint xPos="346" yPos="306" ctrlXPos="406" ctrlYPos="306"/>
                  </Connection>
                </Graphics>
                <Variable name="UserInterruptible"/>
              </IEdge>
              <IEdge target="N65" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="546" yPos="266" ctrlXPos="546" ctrlYPos="246"/>
                    <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="206"/>
                  </Connection>
                </Graphics>
                <Not>
                  <Variable name="UserInterruptible"/>
                </Not>
              </IEdge>
              <Graphics>
                <Position xPos="506" yPos="266"/>
              </Graphics>
            </Node>
            <Node id="N54" name="Agent;Request;Accepted" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(role, dialog, accepted).]]></String>
                </PrologQuery>
              </Commands>
              <EEdge target="N83" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="306" yPos="266" ctrlXPos="306" ctrlYPos="246"/>
                  <ControlPoint xPos="306" yPos="186" ctrlXPos="306" ctrlYPos="206"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="266" yPos="266"/>
              </Graphics>
            </Node>
            <Node id="N65" name="Agent;Request;Rejected" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(role, dialog, rejected).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="506" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N83" name="Agent;Conquers;Floor" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, conquer).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="266" yPos="106"/>
              </Graphics>
            </Node>
            <SuperNode id="S263" name="Agent;Dialog;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="N151;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="N40" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="786" yPos="186" ctrlXPos="786" ctrlYPos="206"/>
                    <ControlPoint xPos="786" yPos="266" ctrlXPos="786" ctrlYPos="246"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[detect(dialog, role, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="746" yPos="106"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N149" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N151" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N151" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S267" name="Handle;User Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S269;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S267" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="106"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="506" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N155" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S268" name="Yield;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, release).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N156" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S269" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N158;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S270" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[detect(user, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N157" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N158" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N158" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S270" name="Check;Signal;Name" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S271" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[take]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S272" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="266" ctrlXPos="532" ctrlYPos="319"/>
                    <ControlPoint xPos="506" yPos="346" ctrlXPos="559" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[hold]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S268" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="266" ctrlXPos="719" ctrlYPos="319"/>
                    <ControlPoint xPos="746" yPos="346" ctrlXPos="692" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[yield]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S273" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[assign]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N159" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S271" name="Take;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N160" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S272" name="Hold;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, claim).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="426" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N161" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S273" name="Assign;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, offer).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N162" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S35" name="Offering" comment="" hideLocalVar="false" hideGlobalVar="false" start="S305;S189;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[offering]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="569" ctrlXPos="759" ctrlYPos="668"/>
                <ControlPoint xPos="957" yPos="346" ctrlXPos="1004" ctrlYPos="519"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(user, role, accept).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S28" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="506" ctrlXPos="652" ctrlYPos="439"/>
                <ControlPoint xPos="586" yPos="346" ctrlXPos="519" ctrlYPos="412"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="3000"/>
            </TimeoutCondition>
          </IEdge>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="546" ctrlXPos="396" ctrlYPos="546"/>
                <ControlPoint xPos="306" yPos="346" ctrlXPos="306" ctrlYPos="455"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(agent, role, reclaim)]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="586" ctrlXPos="553" ctrlYPos="769"/>
                <ControlPoint xPos="986" yPos="346" ctrlXPos="1246" ctrlYPos="589"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(user, role, occupy).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="506" yPos="506"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N110" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S189" name="Handle;User Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S300;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S189" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="106"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="506" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N375" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S299" name="Yield;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N376" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S300" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N378;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S301" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[detect(user, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N377" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N378" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N378" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S301" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S302" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[take]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S303" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="266" ctrlXPos="532" ctrlYPos="319"/>
                    <ControlPoint xPos="506" yPos="346" ctrlXPos="559" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[hold]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S299" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="266" ctrlXPos="719" ctrlYPos="319"/>
                    <ControlPoint xPos="746" yPos="346" ctrlXPos="692" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[yield]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S304" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[assign]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N379" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S302" name="Take;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, accept).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N380" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S303" name="Hold;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, accept).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="426" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N381" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S304" name="Assign;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N382" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S305" name="Agent;Dialog;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S307;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S305" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="106"/>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="666" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N383" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S306" name="Release;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N384" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S307" name="Agent;Dialog;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="N386;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S308" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[detect(dialog, role, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N385" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N386" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N386" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S308" name="Check;Signal;Name" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S306" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[release]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S9" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="519" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="492" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[request]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N387" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S9" name="Request;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(role, dialog, accepted).]]></String>
                </PrologQuery>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, reclaim).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N9" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S61" name="Offered" comment="" hideLocalVar="false" hideGlobalVar="false" start="S274;S282;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[offering]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="569" ctrlXPos="492" ctrlYPos="668"/>
                <ControlPoint xPos="295" yPos="346" ctrlXPos="247" ctrlYPos="519"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(agent, role, accept).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="546" ctrlXPos="855" ctrlYPos="546"/>
                <ControlPoint xPos="946" yPos="346" ctrlXPos="946" ctrlYPos="455"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(user, role, reclaim).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S28" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="506" ctrlXPos="599" ctrlYPos="439"/>
                <ControlPoint xPos="666" yPos="346" ctrlXPos="732" ctrlYPos="412"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="3000"/>
            </TimeoutCondition>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="506"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N111" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S274" name="Handle;User Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S277;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S274" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="106"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="506" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N173" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S276" name="Yield;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N174" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S277" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N250;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S278" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[detect(user, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N224" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N250" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N250" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S278" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S279" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[take]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S280" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="266" ctrlXPos="532" ctrlYPos="319"/>
                    <ControlPoint xPos="506" yPos="346" ctrlXPos="559" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[hold]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S276" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="266" ctrlXPos="719" ctrlYPos="319"/>
                    <ControlPoint xPos="746" yPos="346" ctrlXPos="692" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[yield]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S281" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[assign]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N251" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S279" name="Take;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, reclaim).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N252" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S280" name="Hold;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="426" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N253" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S281" name="Assign;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N254" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S282" name="Agent;Dialog;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S284;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S282" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="106"/>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="666" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N266" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S283" name="Release;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N273" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S284" name="Agent;Dialog;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="N275;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S285" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[detect(dialog, role, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N274" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N275" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N275" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S285" name="Check;Signal;Name" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S286" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[request]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S283" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[release]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N283" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S286" name="Request;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(role, dialog, accepted).]]></String>
                </PrologQuery>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, accept).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N334" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S40" name="Input;Event;Handling" comment="" hideLocalVar="false" hideGlobalVar="false" start="S128;S139;S118;S127;S138;S14;S25;S141;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="266" yPos="426"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N179" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="346" yPos="426"/>
        </Graphics>
      </Node>
      <SuperNode id="S118" name="Voice Event;Handling;Process" comment="" hideLocalVar="false" hideGlobalVar="false" start="S18;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="Name">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="Data">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
          <Play>
            <String><![CDATA[[wizard refresh]]]></String>
          </Play>
        </Commands>
        <EEdge target="S118" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="306" yPos="266" ctrlXPos="306" ctrlYPos="186"/>
            <ControlPoint xPos="346" yPos="266" ctrlXPos="426" ctrlYPos="186"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="266" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="676" yPos="193"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N180" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="746" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N659" name="Agent;Stops;Speaking" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentSpeaking"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="746" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N660" name="Check;Event;Data" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N661" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="66" ctrlXPos="446" ctrlYPos="66"/>
                <ControlPoint xPos="346" yPos="66" ctrlXPos="406" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Data"/>
              <String><![CDATA[start]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N662" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="66" ctrlXPos="646" ctrlYPos="66"/>
                <ControlPoint xPos="746" yPos="66" ctrlXPos="686" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Data"/>
              <String><![CDATA[stop]]></String>
            </Eq>
          </CEdge>
          <Graphics>
            <Position xPos="506" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N661" name="User;Starts;Speaking" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserSpeaking"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N662" name="User;Stops;Speaking" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserSpeaking"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="746" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N663" name="Check;Event;Data" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N664" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="386" ctrlXPos="446" ctrlYPos="386"/>
                <ControlPoint xPos="346" yPos="386" ctrlXPos="406" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Data"/>
              <String><![CDATA[start]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N659" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="386" ctrlXPos="646" ctrlYPos="386"/>
                <ControlPoint xPos="746" yPos="386" ctrlXPos="686" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Data"/>
              <String><![CDATA[stop]]></String>
            </Eq>
          </CEdge>
          <Graphics>
            <Position xPos="506" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N664" name="Agent;Starts;Speaking" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentSpeaking"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N667" name="Check;Event;Name" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N660" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="166"/>
                <ControlPoint xPos="546" yPos="106" ctrlXPos="546" ctrlYPos="126"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Name"/>
              <String><![CDATA[user]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N663" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="266" ctrlXPos="546" ctrlYPos="286"/>
                <ControlPoint xPos="546" yPos="346" ctrlXPos="546" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Name"/>
              <String><![CDATA[agent]]></String>
            </Eq>
          </CEdge>
          <Graphics>
            <Position xPos="506" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S18" name="Await Next;Voice Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N666;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="N667" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="226" ctrlXPos="406" ctrlYPos="226"/>
                <ControlPoint xPos="506" yPos="226" ctrlXPos="446" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[voice(Name, Data).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N665" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N666" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N666" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S127" name="Touch Event;Handling;Process" comment="" hideLocalVar="false" hideGlobalVar="false" start="S84;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="Type">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="Name">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="X">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="Y">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S127" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="466" yPos="266" ctrlXPos="466" ctrlYPos="186"/>
            <ControlPoint xPos="506" yPos="266" ctrlXPos="586" ctrlYPos="186"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="426" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="300" yPos="39"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N190" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="266"/>
          </Graphics>
        </Node>
        <Node id="N675" name="Update;Piece;Position" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <Add>
              <Add>
                <Add>
                  <Add>
                    <Add>
                      <Add>
                        <String><![CDATA[update(]]></String>
                        <Variable name="Name"/>
                      </Add>
                      <String><![CDATA[, ]]></String>
                    </Add>
                    <Variable name="X"/>
                  </Add>
                  <String><![CDATA[, ]]></String>
                </Add>
                <Variable name="Y"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <CEdge target="N678" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="654" yPos="198" ctrlXPos="691" ctrlYPos="160"/>
                <ControlPoint xPos="747" yPos="76" ctrlXPos="695" ctrlYPos="89"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Type"/>
              <String><![CDATA[start]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N679" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Type"/>
              <String><![CDATA[drag]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N680" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="654" yPos="254" ctrlXPos="691" ctrlYPos="291"/>
                <ControlPoint xPos="746" yPos="386" ctrlXPos="692" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Type"/>
              <String><![CDATA[stop]]></String>
            </Eq>
          </CEdge>
          <Graphics>
            <Position xPos="586" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N678" name="User;Starts;Dragging" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserDragging"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="746" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N679" name="User;Continues;Dragging" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[signal(user, drag, ]]></String>
                <Variable name="Name"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <Graphics>
            <Position xPos="826" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N680" name="User;Stops;Dragging" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserDragging"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="746" yPos="346"/>
          </Graphics>
        </Node>
        <SuperNode id="S84" name="Await Next;Touch Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N100;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="N675" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="226" ctrlXPos="446" ctrlYPos="226"/>
                <ControlPoint xPos="586" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[touch(Type, Name, X, Y).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N93" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N100" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N100" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S128" name="Gaze Event;Handling;Process" comment="" hideLocalVar="false" hideGlobalVar="false" start="S129;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="Name">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="Data">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S128" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="466" yPos="106" ctrlXPos="466" ctrlYPos="26"/>
            <ControlPoint xPos="506" yPos="106" ctrlXPos="586" ctrlYPos="26"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="426" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="375" yPos="262"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N191" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="586" yPos="266"/>
          </Graphics>
        </Node>
        <Node id="N668" name="Check;Event;Name" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N669" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="786" yPos="266" ctrlXPos="786" ctrlYPos="286"/>
                <ControlPoint xPos="786" yPos="346" ctrlXPos="786" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Name"/>
              <String><![CDATA[agent]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N670" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="786" yPos="186" ctrlXPos="786" ctrlYPos="166"/>
                <ControlPoint xPos="786" yPos="106" ctrlXPos="786" ctrlYPos="126"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Name"/>
              <String><![CDATA[user]]></String>
            </Eq>
          </CEdge>
          <Graphics>
            <Position xPos="746" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N669" name="Check;Event;Data" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N671" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="386" ctrlXPos="686" ctrlYPos="386"/>
                <ControlPoint xPos="586" yPos="386" ctrlXPos="646" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <Neq>
              <Variable name="Data"/>
              <Variable name="AgentGaze"/>
            </Neq>
          </CEdge>
          <Graphics>
            <Position xPos="746" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N670" name="Check;Event;Data" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N676" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="66" ctrlXPos="686" ctrlYPos="66"/>
                <ControlPoint xPos="586" yPos="66" ctrlXPos="646" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <Neq>
              <Variable name="Data"/>
              <Variable name="UserGaze"/>
            </Neq>
          </CEdge>
          <Graphics>
            <Position xPos="746" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N671" name="Send;Focus;Signal" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[signal(agent, focus, ]]></String>
                <Variable name="Data"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <EEdge target="N672" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="386" ctrlXPos="486" ctrlYPos="386"/>
              <ControlPoint xPos="346" yPos="386" ctrlXPos="366" ctrlYPos="386"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="506" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N672" name="Change;Agent;Focus" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentGaze"/>
              <Expression>
                <Variable name="Data"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N676" name="Send;Focus;Signal" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[signal(user, focus, ]]></String>
                <Variable name="Data"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <EEdge target="N677" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="66" ctrlXPos="486" ctrlYPos="66"/>
              <ControlPoint xPos="346" yPos="66" ctrlXPos="366" ctrlYPos="66"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="506" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N677" name="Change;User;Focus" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserGaze"/>
              <Expression>
                <Variable name="Data"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S129" name="Await Next;Gaze Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N193;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="N668" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                <ControlPoint xPos="746" yPos="226" ctrlXPos="606" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[gaze(Name, Data).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N192" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N193" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N193" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S138" name="Speech Event;Handling;Process" comment="" hideLocalVar="false" hideGlobalVar="false" start="S23;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="Fused">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="Event">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="Fun">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="Cat">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S138" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="26"/>
            <ControlPoint xPos="666" yPos="106" ctrlXPos="746" ctrlYPos="26"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="586" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="625" yPos="259"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N203" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="826" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N683" name="Check;Dialog Act;Function" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N21" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="106" ctrlXPos="546" ctrlYPos="126"/>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Fun"/>
              <String><![CDATA[info_seeking]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N14" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="66" ctrlXPos="686" ctrlYPos="66"/>
                <ControlPoint xPos="826" yPos="66" ctrlXPos="726" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <Neq>
              <Variable name="Fun"/>
              <String><![CDATA[info_seeking]]></String>
            </Neq>
          </CEdge>
          <Graphics>
            <Position xPos="506" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N10" name="Check;Location;Referent" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[disambiguate(]]></String>
                <Variable name="Event"/>
              </Add>
              <String><![CDATA[, Fused).]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <EEdge target="N11" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="386" ctrlXPos="446" ctrlYPos="386"/>
              <ControlPoint xPos="346" yPos="386" ctrlXPos="406" ctrlYPos="386"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="506" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N11" name="Send;Dialog Act;Signal" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[signal(user, speech, ]]></String>
                <Variable name="Fused"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N14" name="Handle;Other;Function" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="826" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N16" name="Handle;Set;Question" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="826" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N21" name="Check;Dialog Act;Category" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N22" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="226" ctrlXPos="446" ctrlYPos="226"/>
                <ControlPoint xPos="346" yPos="226" ctrlXPos="406" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Cat"/>
              <String><![CDATA[choice_question]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N16" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="226" ctrlXPos="686" ctrlYPos="226"/>
                <ControlPoint xPos="826" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Cat"/>
              <String><![CDATA[set_question]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N10" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="266" ctrlXPos="546" ctrlYPos="286"/>
                <ControlPoint xPos="546" yPos="346" ctrlXPos="546" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Cat"/>
              <String><![CDATA[check_question]]></String>
            </Eq>
          </CEdge>
          <Graphics>
            <Position xPos="506" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N22" name="Handle;Choice;Question" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S23" name="Await Next;Speech;Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N682;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="N683" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="66" ctrlXPos="406" ctrlYPos="66"/>
                <ControlPoint xPos="506" yPos="66" ctrlXPos="446" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[speech(Event, Fun, Cat).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="26"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N681" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N682" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N682" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S139" name="Face Event;Handling;Process" comment="" hideLocalVar="false" hideGlobalVar="false" start="S109;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="Data">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S139" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="786" yPos="106" ctrlXPos="786" ctrlYPos="26"/>
            <ControlPoint xPos="826" yPos="106" ctrlXPos="906" ctrlYPos="26"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="746" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="502" yPos="265"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N204" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="666" yPos="106"/>
          </Graphics>
        </Node>
        <Node id="N34" name="User;Facial;Expression" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserFace"/>
              <Expression>
                <Variable name="Data"/>
              </Expression>
            </Assign>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[signal(user, face, ]]></String>
                <Variable name="Data"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <Graphics>
            <Position xPos="506" yPos="106"/>
          </Graphics>
        </Node>
        <SuperNode id="S109" name="Await Next;Face Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N164;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="N34" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="146" ctrlXPos="406" ctrlYPos="146"/>
                <ControlPoint xPos="506" yPos="146" ctrlXPos="446" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[face(Data).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N154" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N164" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N164" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S141" name="State Event;Handling;Process" comment="" hideLocalVar="false" hideGlobalVar="false" start="S142;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="Name">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="Data">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
          <Play>
            <String><![CDATA[[wizard refresh]]]></String>
          </Play>
        </Commands>
        <EEdge target="S141" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="306" yPos="106" ctrlXPos="306" ctrlYPos="26"/>
            <ControlPoint xPos="346" yPos="106" ctrlXPos="426" ctrlYPos="26"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="266" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="670" yPos="194"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N206" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="746" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N652" name="Check;Event;Name" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N653" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="166"/>
                <ControlPoint xPos="546" yPos="106" ctrlXPos="546" ctrlYPos="126"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Name"/>
              <String><![CDATA[user]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N654" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="266" ctrlXPos="546" ctrlYPos="286"/>
                <ControlPoint xPos="546" yPos="346" ctrlXPos="546" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Name"/>
              <String><![CDATA[agent]]></String>
            </Eq>
          </CEdge>
          <Graphics>
            <Position xPos="506" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N653" name="Check;Event;Data" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N656" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="66" ctrlXPos="446" ctrlYPos="66"/>
                <ControlPoint xPos="346" yPos="66" ctrlXPos="406" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Data"/>
              <String><![CDATA[enter]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N657" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="66" ctrlXPos="646" ctrlYPos="66"/>
                <ControlPoint xPos="746" yPos="66" ctrlXPos="686" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Data"/>
              <String><![CDATA[leave]]></String>
            </Eq>
          </CEdge>
          <Graphics>
            <Position xPos="506" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N654" name="Check;Event;Data" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N655" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="386" ctrlXPos="446" ctrlYPos="386"/>
                <ControlPoint xPos="346" yPos="386" ctrlXPos="406" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Data"/>
              <String><![CDATA[enter]]></String>
            </Eq>
          </CEdge>
          <CEdge target="N658" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="386" ctrlXPos="646" ctrlYPos="386"/>
                <ControlPoint xPos="746" yPos="386" ctrlXPos="686" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="Data"/>
              <String><![CDATA[leave]]></String>
            </Eq>
          </CEdge>
          <Graphics>
            <Position xPos="506" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N655" name="Agent;Enters;Dialog" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentPresent"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="346"/>
          </Graphics>
        </Node>
        <Node id="N656" name="User;Enters;Dialog" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserPresent"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N657" name="User;Leaves;Dialog" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserPresent"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="746" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N658" name="Agent;Leaves;Dialog" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentPresent"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <Graphics>
            <Position xPos="746" yPos="346"/>
          </Graphics>
        </Node>
        <SuperNode id="S142" name="Await Next;State Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N208;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="N652" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="226" ctrlXPos="406" ctrlYPos="226"/>
                <ControlPoint xPos="506" yPos="226" ctrlXPos="446" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[state(Name, Data).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N207" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N208" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N208" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S14" name="Action Event;Handling;Process" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S14" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="626" yPos="266" ctrlXPos="626" ctrlYPos="186"/>
            <ControlPoint xPos="666" yPos="266" ctrlXPos="746" ctrlYPos="186"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="586" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N17" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="26"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S25" name="Head Event;Handling;Process" comment="" hideLocalVar="false" hideGlobalVar="false" start="S33;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="Data">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S25" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="786" yPos="266" ctrlXPos="786" ctrlYPos="186"/>
            <ControlPoint xPos="826" yPos="266" ctrlXPos="906" ctrlYPos="186"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="746" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="502" yPos="265"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N35" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="666" yPos="106"/>
          </Graphics>
        </Node>
        <Node id="N36" name="User;Head;Movement" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserHead"/>
              <Expression>
                <Variable name="Data"/>
              </Expression>
            </Assign>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[signal(user, head, ]]></String>
                <Variable name="Data"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <Graphics>
            <Position xPos="506" yPos="106"/>
          </Graphics>
        </Node>
        <SuperNode id="S33" name="Await Next;Head Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N38;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="N36" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="146" ctrlXPos="406" ctrlYPos="146"/>
                <ControlPoint xPos="506" yPos="146" ctrlXPos="446" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[head(Data).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N37" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N38" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N38" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S48" name="Dialog And;Behavior;Control" comment="" hideLocalVar="false" hideGlobalVar="false" start="S4;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="266" yPos="186"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N103" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="26"/>
        </Graphics>
      </Node>
      <SuperNode id="S4" name="Dialog;Flow;Control" comment="" hideLocalVar="false" hideGlobalVar="false" start="S49;N139;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="Contribution">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="DialogScene">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="AbortScene">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="AssignScene">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="Bool" name ="AgentInterrupted">
            <Bool value="false"/>
          </Variable>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="815" yPos="355"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="1119" yPos="172" width="265" height="160"/>
          </Graphics>
          <Text style="color:blue">
            The agent should abort its behavior and interrupt itself in this case, so that we should send a signal here which causes the TTS abort in the dialog process. The role switch caused by the conquer signal causes the change of the role variable whose change causes the context switch in the dialog process. This context switch can only occur after the agent has interrupted itself.
          </Text>
        </Comment>
        <Comment>
          <Graphics>
            <Boundary xPos="1062" yPos="62" width="228" height="105"/>
          </Graphics>
          <Text style="color:blue">
            If we get the next intended speaker together with the contribution, then we can decide to display an assign or a yield behavior and we can decide to signal an offer or a release signal in a multi-party interaction.
          </Text>
        </Comment>
        <Node id="N104" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N124" name="Request;Action;Execution" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(dialog, role, request).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="N138" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="666" yPos="226" ctrlXPos="686" ctrlYPos="226"/>
              <ControlPoint xPos="746" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="586" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N13" name="Action;Execution;Rejected" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(dialog, planner, rejected).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S49" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="66" ctrlXPos="372" ctrlYPos="66"/>
              <ControlPoint xPos="306" yPos="186" ctrlXPos="306" ctrlYPos="132"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="426" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N135" name="Set Agent;Interrupted;State" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentInterrupted"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <EEdge target="N139" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="586" yPos="546" ctrlXPos="486" ctrlYPos="546"/>
              <ControlPoint xPos="346" yPos="546" ctrlXPos="446" ctrlYPos="546"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="586" yPos="506"/>
          </Graphics>
        </Node>
        <Node id="N137" name="Abort;Agent;Behavior" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[agent.]]></String>
            </Play>
          </Commands>
          <EEdge target="N135" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="626" yPos="666" ctrlXPos="626" ctrlYPos="646"/>
              <ControlPoint xPos="626" yPos="586" ctrlXPos="626" ctrlYPos="606"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="586" yPos="666"/>
          </Graphics>
        </Node>
        <Node id="N138" name="Await;Request;Response" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N13" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="766" yPos="191" ctrlXPos="706" ctrlYPos="86"/>
                <ControlPoint xPos="506" yPos="66" ctrlXPos="624" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(role, dialog, rejected).]]></String>
            </PrologQuery>
          </CEdge>
          <CEdge target="S69" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="766" yPos="261" ctrlXPos="706" ctrlYPos="365"/>
                <ControlPoint xPos="506" yPos="386" ctrlXPos="624" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(role, dialog, accepted).]]></String>
            </PrologQuery>
          </CEdge>
          <EEdge target="N138" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="796" yPos="187" ctrlXPos="816" ctrlYPos="109"/>
              <ControlPoint xPos="821" yPos="206" ctrlXPos="891" ctrlYPos="166"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="746" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N139" name="Await;Interrupt;Signal" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N140" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="306" yPos="586" ctrlXPos="306" ctrlYPos="606"/>
                <ControlPoint xPos="306" yPos="666" ctrlXPos="306" ctrlYPos="646"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(role, dialog, interrupted).]]></String>
            </PrologQuery>
          </CEdge>
          <EEdge target="N139" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="316" yPos="507" ctrlXPos="336" ctrlYPos="429"/>
              <ControlPoint xPos="341" yPos="526" ctrlXPos="411" ctrlYPos="486"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="266" yPos="506"/>
          </Graphics>
        </Node>
        <Node id="N140" name="Await;Abortion;Timeout" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <CEdge target="N137" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="706" ctrlXPos="446" ctrlYPos="706"/>
                <ControlPoint xPos="586" yPos="706" ctrlXPos="486" ctrlYPos="706"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[timeout(abort, 750).]]></String>
            </PrologQuery>
          </CEdge>
          <EEdge target="N140" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="316" yPos="667" ctrlXPos="336" ctrlYPos="589"/>
              <ControlPoint xPos="341" yPos="686" ctrlXPos="411" ctrlYPos="646"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="266" yPos="666"/>
          </Graphics>
        </Node>
        <SuperNode id="S49" name="Await;Dialog;Action" comment="" hideLocalVar="false" hideGlobalVar="false" start="S60;">
          <Define>
          </Define>
          <Declare>
            <Variable type="String" name ="Event">
              <String><![CDATA[]]></String>
            </Variable>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="N124" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="226" ctrlXPos="446" ctrlYPos="226"/>
                <ControlPoint xPos="586" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[detect(planner, dialog, Contribution).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="398" yPos="292"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Comment>
            <Graphics>
              <Boundary xPos="693" yPos="168" width="264" height="100"/>
            </Graphics>
            <Text style="color:blue">
              Detect, collect and disambiguate the user's last contribution, such as a speech act and move action and then infer the next contribution. Then plan an adequate response and signal the corresponding scene.
            </Text>
          </Comment>
          <Node id="N105" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S50" name="Handle;Action;Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S60" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="366" ctrlYPos="286"/>
                <ControlPoint xPos="426" yPos="266" ctrlXPos="406" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N106" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="26"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S52" name="Handle;Speech;Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S60" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="566" ctrlYPos="166"/>
                <ControlPoint xPos="506" yPos="186" ctrlXPos="526" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="586" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N112" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="26"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S60" name="Await User;Contribution" comment="" hideLocalVar="false" hideGlobalVar="false" start="N114;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S52" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="506" yPos="266" ctrlXPos="526" ctrlYPos="286"/>
                  <ControlPoint xPos="586" yPos="266" ctrlXPos="566" ctrlYPos="286"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <String><![CDATA[detect(user, speech, Event).]]></String>
              </PrologQuery>
            </IEdge>
            <IEdge target="S50" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="186" ctrlXPos="406" ctrlYPos="166"/>
                  <ControlPoint xPos="346" yPos="186" ctrlXPos="366" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <String><![CDATA[detect(user, action, Event).]]></String>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="426" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N113" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N114" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N114" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                  <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S69" name="Execute;Dialog;Action" comment="" hideLocalVar="false" hideGlobalVar="false" start="N142;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(dialog, planner, accepted).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S49" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="386" ctrlXPos="372" ctrlYPos="386"/>
              <ControlPoint xPos="306" yPos="266" ctrlXPos="306" ctrlYPos="319"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="426" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="447" yPos="424"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N126" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="586" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N18" name="Forbid To;Interrupt;Agent" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentInterruptible"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <EEdge target="S62" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="66" ctrlXPos="446" ctrlYPos="66"/>
                <ControlPoint xPos="506" yPos="66" ctrlXPos="486" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N19" name="Unset;Interrupt;States" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentInterrupted"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Assign>
                <Variable name="AgentInterruptible"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <EEdge target="S75" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="386" ctrlXPos="446" ctrlYPos="386"/>
                <ControlPoint xPos="506" yPos="386" ctrlXPos="486" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="346"/>
            </Graphics>
          </Node>
          <Node id="N57" name="Signal;Scene;Aborted" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(dialog, planner, aborted).]]></String>
              </PrologQuery>
            </Commands>
            <Graphics>
              <Position xPos="746" yPos="346"/>
            </Graphics>
          </Node>
          <Node id="N128" name="Signal;Scene;Finished" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(dialog, planner, finished).]]></String>
              </PrologQuery>
            </Commands>
            <EEdge target="N144" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="786" yPos="106" ctrlXPos="786" ctrlYPos="126"/>
                <ControlPoint xPos="786" yPos="186" ctrlXPos="786" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="746" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N142" name="Allow To;Interrupt;Agent" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentInterruptible"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <EEdge target="S83" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="536" yPos="187" ctrlXPos="531" ctrlYPos="167"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="446" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N144" name="Signal;Floor;Release" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(dialog, role, release).]]></String>
              </PrologQuery>
            </Commands>
            <Graphics>
              <Position xPos="746" yPos="186"/>
            </Graphics>
          </Node>
          <SuperNode id="S75" name="Execute;Abort;Scene" comment="" hideLocalVar="false" hideGlobalVar="false" start="N167;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N57" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="386" ctrlXPos="646" ctrlYPos="386"/>
                <ControlPoint xPos="746" yPos="386" ctrlXPos="686" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N165" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N167" name="Start;Speaking" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="AgentSpeaking"/>
                  <Expression>
                    <Bool value="true"/>
                  </Expression>
                </Assign>
                <Play>
                  <String><![CDATA[[wizard refresh]]]></String>
                </Play>
              </Commands>
              <EEdge target="N169" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="146" ctrlXPos="486" ctrlYPos="146"/>
                  <ControlPoint xPos="586" yPos="146" ctrlXPos="526" ctrlYPos="146"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N168" name="Stop;Speaking" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="AgentSpeaking"/>
                  <Expression>
                    <Bool value="false"/>
                  </Expression>
                </Assign>
                <Play>
                  <String><![CDATA[[wizard refresh]]]></String>
                </Play>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N169" name="Play;Abort;Scene" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <Add>
                  <Add>
                    <String><![CDATA[val(abortscene, AbortScene, ]]></String>
                    <Variable name="Contribution"/>
                  </Add>
                  <String><![CDATA[).]]></String>
                </Add>
                </PrologQuery>
                <Play>
                  <Add>
                    <Add>
                      <String><![CDATA[[wizard output text='playing_scene_]]></String>
                      <Variable name="AbortScene"/>
                    </Add>
                    <String><![CDATA[']]]></String>
                  </Add>
                </Play>
              </Commands>
              <TEdge target="N168" start="" timeout="1000">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="146" ctrlXPos="726" ctrlYPos="146"/>
                  <ControlPoint xPos="826" yPos="146" ctrlXPos="766" ctrlYPos="146"/>
                </Connection>
              </Graphics>
              </TEdge>
              <Graphics>
                <Position xPos="586" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S83" name="Execute;Dialog;Scene" comment="" hideLocalVar="false" hideGlobalVar="false" start="N178;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N18" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="166"/>
                <ControlPoint xPos="386" yPos="106" ctrlXPos="386" ctrlYPos="126"/>
              </Connection>
            </Graphics>
            </EEdge>
            <IEdge target="N19" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="386" yPos="266" ctrlXPos="386" ctrlYPos="286"/>
                  <ControlPoint xPos="386" yPos="346" ctrlXPos="386" ctrlYPos="326"/>
                </Connection>
              </Graphics>
              <Variable name="AgentInterrupted"/>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N175" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N176" name="Play;Dialog;Scene" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <Add>
                  <Add>
                    <String><![CDATA[val(dialogscene, DialogScene, ]]></String>
                    <Variable name="Contribution"/>
                  </Add>
                  <String><![CDATA[).]]></String>
                </Add>
                </PrologQuery>
                <Play>
                  <Add>
                    <Add>
                      <String><![CDATA[[wizard output text=playing_scene_]]></String>
                      <Variable name="DialogScene"/>
                    </Add>
                    <String><![CDATA[]]]></String>
                  </Add>
                </Play>
              </Commands>
              <TEdge target="N177" start="" timeout="30000">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="146" ctrlXPos="686" ctrlYPos="146"/>
                  <ControlPoint xPos="826" yPos="146" ctrlXPos="806" ctrlYPos="146"/>
                </Connection>
              </Graphics>
              </TEdge>
              <Graphics>
                <Position xPos="586" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N177" name="Stop;Speaking" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="AgentSpeaking"/>
                  <Expression>
                    <Bool value="false"/>
                  </Expression>
                </Assign>
                <Play>
                  <String><![CDATA[[wizard refresh]]]></String>
                </Play>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N178" name="Start;Speaking" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="AgentSpeaking"/>
                  <Expression>
                    <Bool value="true"/>
                  </Expression>
                </Assign>
                <Play>
                  <String><![CDATA[[wizard refresh]]]></String>
                </Play>
              </Commands>
              <EEdge target="N176" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="146" ctrlXPos="486" ctrlYPos="146"/>
                  <ControlPoint xPos="586" yPos="146" ctrlXPos="526" ctrlYPos="146"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S62" name="Execute;Assign;Scene" comment="" hideLocalVar="false" hideGlobalVar="false" start="N134;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N128" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="66" ctrlXPos="646" ctrlYPos="66"/>
                <ControlPoint xPos="746" yPos="66" ctrlXPos="686" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="26"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N131" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N132" name="Play;Assign;Scene" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <Add>
                  <Add>
                    <String><![CDATA[val(assignscene, AssignScene, ]]></String>
                    <Variable name="Contribution"/>
                  </Add>
                  <String><![CDATA[).]]></String>
                </Add>
                </PrologQuery>
                <Play>
                  <Add>
                    <Add>
                      <String><![CDATA[[wizard output text='playing_scene_]]></String>
                      <Variable name="AssignScene"/>
                    </Add>
                    <String><![CDATA[']]]></String>
                  </Add>
                </Play>
              </Commands>
              <TEdge target="N133" start="" timeout="1000">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="146" ctrlXPos="726" ctrlYPos="146"/>
                  <ControlPoint xPos="826" yPos="146" ctrlXPos="766" ctrlYPos="146"/>
                </Connection>
              </Graphics>
              </TEdge>
              <Graphics>
                <Position xPos="586" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N133" name="Stop;Speaking" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="AgentSpeaking"/>
                  <Expression>
                    <Bool value="false"/>
                  </Expression>
                </Assign>
                <Play>
                  <String><![CDATA[[wizard refresh]]]></String>
                </Play>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N134" name="Start;Speaking" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="AgentSpeaking"/>
                  <Expression>
                    <Bool value="true"/>
                  </Expression>
                </Assign>
                <Play>
                  <String><![CDATA[[wizard refresh]]]></String>
                </Play>
              </Commands>
              <EEdge target="N132" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="146" ctrlXPos="486" ctrlYPos="146"/>
                  <ControlPoint xPos="586" yPos="146" ctrlXPos="526" ctrlYPos="146"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S102" name="Role;Specific;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="S130;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N215" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S103" name="Execute;Participant;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="S110;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S130" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="266" ctrlXPos="486" ctrlYPos="286"/>
                <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            <Or>
              <Eq>
                <Variable name="UserRole"/>
                <String><![CDATA[absent]]></String>
              </Eq>
              <Eq>
                <Variable name="AgentRole"/>
                <String><![CDATA[absent]]></String>
              </Eq>
            </Or>
          </IEdge>
          <Graphics>
            <Position xPos="506" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Comment>
            <Graphics>
              <Boundary xPos="397" yPos="353" width="301" height="96"/>
            </Graphics>
            <Text style="color:blue">
              We understand the bystander role in a dyadic interaction as the phases in which the participants are interacting with each other but no one currently wants to take on the speaker or addressee role which means that these roles are not negotiated.
            </Text>
          </Comment>
          <Node id="N217" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="826" yPos="186"/>
            </Graphics>
          </Node>
          <SuperNode id="S106" name="Execute;Speaker;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="N219;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S110" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="186" ctrlXPos="446" ctrlYPos="166"/>
                  <ControlPoint xPos="506" yPos="186" ctrlXPos="486" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="AgentRole"/>
                <String><![CDATA[bystander]]></String>
              </Eq>
            </IEdge>
            <IEdge target="S119" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="409" yPos="186" ctrlXPos="466" ctrlYPos="86"/>
                  <ControlPoint xPos="683" yPos="186" ctrlXPos="625" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="AgentRole"/>
                <String><![CDATA[addressee]]></String>
              </Eq>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="519" yPos="141"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N218" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N219" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N219" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                  <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S110" name="Execute;Bystander;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="N263;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S106" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="506" yPos="266" ctrlXPos="486" ctrlYPos="286"/>
                  <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="286"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="AgentRole"/>
                <String><![CDATA[speaker]]></String>
              </Eq>
            </IEdge>
            <IEdge target="S119" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="586" yPos="186" ctrlXPos="606" ctrlYPos="166"/>
                  <ControlPoint xPos="666" yPos="186" ctrlXPos="646" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="AgentRole"/>
                <String><![CDATA[addressee]]></String>
              </Eq>
            </IEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="514" yPos="130"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N258" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N263" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N263" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                  <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S119" name="Execute;Addressee;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="N265;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S110" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="266" ctrlXPos="646" ctrlYPos="286"/>
                  <ControlPoint xPos="586" yPos="266" ctrlXPos="606" ctrlYPos="286"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="AgentRole"/>
                <String><![CDATA[bystander]]></String>
              </Eq>
            </IEdge>
            <IEdge target="S106" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="683" yPos="266" ctrlXPos="625" ctrlYPos="366"/>
                  <ControlPoint xPos="409" yPos="266" ctrlXPos="466" ctrlYPos="366"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="AgentRole"/>
                <String><![CDATA[speaker]]></String>
              </Eq>
            </IEdge>
            <Graphics>
              <Position xPos="666" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N264" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N265" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N265" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                  <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
            <SuperNode id="S120" name="React To;Feedback;Eliciting" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="506" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N269" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="0" yPos="0"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S121" name="React To;Mirroring;Eliciting" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="666" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N276" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="0" yPos="0"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S123" name="React To;Turn-Taking;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="506" yPos="426"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N277" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="0" yPos="0"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S124" name="React To;Object;Movement" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="666" yPos="426"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N278" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="0" yPos="0"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S125" name="React To;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N279" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="0" yPos="0"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S126" name="React To;Directed;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="426"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N280" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="0" yPos="0"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S130" name="Execute;Overhearer;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="N295;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S103" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="446" ctrlYPos="175"/>
                <ControlPoint xPos="506" yPos="186" ctrlXPos="486" ctrlYPos="175"/>
              </Connection>
            </Graphics>
            <And>
              <Neq>
                <Variable name="UserRole"/>
                <String><![CDATA[absent]]></String>
              </Neq>
              <Neq>
                <Variable name="AgentRole"/>
                <String><![CDATA[absent]]></String>
              </Neq>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N281" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N295" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N295" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S71" name="Universal;Nonverbal;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N91" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S73" name="Automatic;Blinking;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="506" yPos="26"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N120" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S87" name="Automatic;Breathing;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="666" yPos="26"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N121" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S16" name="System;Status;Monitor" comment="" hideLocalVar="false" hideGlobalVar="false" start="S65;S57;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="266" yPos="106"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N31" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="26"/>
        </Graphics>
      </Node>
      <SuperNode id="S57" name="Statistical;Reporting;Processes" comment="" hideLocalVar="false" hideGlobalVar="false" start="N146;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N145" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="106"/>
          </Graphics>
        </Node>
        <Node id="N146" name="Infer;System;Time" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[now(SystemTime).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="N146" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="636" yPos="107" ctrlXPos="656" ctrlYPos="29"/>
              <ControlPoint xPos="661" yPos="126" ctrlXPos="731" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="586" yPos="106"/>
          </Graphics>
        </Node>
        <SuperNode id="S64" name="Report;Fact Base;Statistics" comment="" hideLocalVar="false" hideGlobalVar="false" start="N163;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[statistics.]]></String>
            </PrologQuery>
          </Commands>
          <IEdge target="S64" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="466" yPos="106" ctrlXPos="466" ctrlYPos="26"/>
                <ControlPoint xPos="506" yPos="106" ctrlXPos="586" ctrlYPos="26"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[timeout(status, 5000).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="426" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N150" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N163" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N163" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S65" name="Garbage;Collection;Processes" comment="" hideLocalVar="false" hideGlobalVar="false" start="S68;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N170" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="106"/>
          </Graphics>
        </Node>
        <SuperNode id="S68" name="Collect;Fact Base;Garbage" comment="" hideLocalVar="false" hideGlobalVar="false" start="N172;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[clean(speech, 30000).]]></String>
            </PrologQuery>
            <PrologQuery>
            <String><![CDATA[clean(gaze, 10000).]]></String>
            </PrologQuery>
          </Commands>
          <IEdge target="S68" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="466" yPos="106" ctrlXPos="466" ctrlYPos="35"/>
                <ControlPoint xPos="506" yPos="106" ctrlXPos="586" ctrlYPos="35"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[timeout(trash, 5000).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="426" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N171" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N172" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N172" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
    </SuperNode>
  </SuperNode>
  <SuperNode id="S39" name="Testing" comment="" hideLocalVar="false" hideGlobalVar="false" start="S30;">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
    </Commands>
    <Graphics>
      <Position xPos="586" yPos="26"/>
    </Graphics>
    <LocalVariableBadge>
      <Position xPos="853" yPos="430"/>
    </LocalVariableBadge>
    <GlobalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </GlobalVariableBadge>
    <Node id="N76" name="History" history="true">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="26" yPos="186"/>
      </Graphics>
    </Node>
    <Node id="N77" name="Timeout" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <CEdge target="N78" start="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="266" yPos="226" ctrlXPos="326" ctrlYPos="226"/>
            <ControlPoint xPos="426" yPos="226" ctrlXPos="366" ctrlYPos="226"/>
          </Connection>
        </Graphics>
        <PrologQuery>
        <String><![CDATA[timeout(name, 3000).]]></String>
        </PrologQuery>
      </CEdge>
      <EEdge target="N77" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
          <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="186" yPos="186"/>
      </Graphics>
    </Node>
    <Node id="N78" name="Repeat" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <EEdge target="N77" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="427" yPos="236" ctrlXPos="368" ctrlYPos="251"/>
          <ControlPoint xPos="265" yPos="236" ctrlXPos="323" ctrlYPos="251"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="426" yPos="186"/>
      </Graphics>
    </Node>
    <Node id="N45" name="N45" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <EEdge target="N45" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="1116" yPos="107" ctrlXPos="1136" ctrlYPos="69"/>
          <ControlPoint xPos="1141" yPos="126" ctrlXPos="1211" ctrlYPos="86"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="1066" yPos="106"/>
      </Graphics>
    </Node>
    <Node id="N59" name="N59" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <EEdge target="N59" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="1116" yPos="267" ctrlXPos="1136" ctrlYPos="189"/>
          <ControlPoint xPos="1141" yPos="286" ctrlXPos="1211" ctrlYPos="246"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="1066" yPos="266"/>
      </Graphics>
    </Node>
    <Node id="N67" name="N67" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <EEdge target="N67" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="956" yPos="427" ctrlXPos="976" ctrlYPos="349"/>
          <ControlPoint xPos="981" yPos="446" ctrlXPos="1051" ctrlYPos="406"/>
        </Connection>
      </Graphics>
      </EEdge>
      <IEdge target="N68" start="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="986" yPos="466" ctrlXPos="1006" ctrlYPos="466"/>
            <ControlPoint xPos="1066" yPos="466" ctrlXPos="1046" ctrlYPos="466"/>
          </Connection>
        </Graphics>
        <Eq>
          <Variable name="x"/>
          <String><![CDATA[start]]></String>
        </Eq>
      </IEdge>
      <Graphics>
        <Position xPos="906" yPos="426"/>
      </Graphics>
    </Node>
    <Node id="N68" name="N68" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <EEdge target="N68" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="1116" yPos="427" ctrlXPos="1136" ctrlYPos="349"/>
          <ControlPoint xPos="1141" yPos="446" ctrlXPos="1211" ctrlYPos="406"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="1066" yPos="426"/>
      </Graphics>
    </Node>
    <Node id="N70" name="N70" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <CEdge target="N71" start="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="986" yPos="626" ctrlXPos="1006" ctrlYPos="626"/>
            <ControlPoint xPos="1066" yPos="626" ctrlXPos="1046" ctrlYPos="626"/>
          </Connection>
        </Graphics>
        <Eq>
          <Variable name="x"/>
          <String><![CDATA[start]]></String>
        </Eq>
      </CEdge>
      <EEdge target="N70" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="956" yPos="587" ctrlXPos="976" ctrlYPos="509"/>
          <ControlPoint xPos="981" yPos="606" ctrlXPos="1051" ctrlYPos="566"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="906" yPos="586"/>
      </Graphics>
    </Node>
    <Node id="N71" name="N71" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <EEdge target="N71" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="1116" yPos="587" ctrlXPos="1136" ctrlYPos="509"/>
          <ControlPoint xPos="1141" yPos="606" ctrlXPos="1211" ctrlYPos="566"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="1066" yPos="586"/>
      </Graphics>
    </Node>
    <Node id="N80" name="N80" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <EEdge target="N80" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="636" yPos="347" ctrlXPos="656" ctrlYPos="269"/>
          <ControlPoint xPos="661" yPos="366" ctrlXPos="731" ctrlYPos="326"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="586" yPos="346"/>
      </Graphics>
    </Node>
    <SuperNode id="S17" name="S17" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <EEdge target="S17" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="946" yPos="106" ctrlXPos="946" ctrlYPos="69"/>
          <ControlPoint xPos="986" yPos="106" ctrlXPos="1066" ctrlYPos="69"/>
        </Connection>
      </Graphics>
      </EEdge>
      <IEdge target="N45" start="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="986" yPos="146" ctrlXPos="1004" ctrlYPos="143"/>
            <ControlPoint xPos="1066" yPos="146" ctrlXPos="1046" ctrlYPos="146"/>
          </Connection>
        </Graphics>
        <Eq>
          <Variable name="x"/>
          <String><![CDATA[start]]></String>
        </Eq>
      </IEdge>
      <Graphics>
        <Position xPos="906" yPos="106"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N44" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="0" yPos="0"/>
        </Graphics>
      </Node>
    </SuperNode>
    <SuperNode id="S21" name="S21" comment="" hideLocalVar="false" hideGlobalVar="false" start="N58;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <IEdge target="N59" start="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="986" yPos="306" ctrlXPos="1006" ctrlYPos="306"/>
            <ControlPoint xPos="1066" yPos="306" ctrlXPos="1046" ctrlYPos="306"/>
          </Connection>
        </Graphics>
        <Eq>
          <Variable name="x"/>
          <String><![CDATA[start]]></String>
        </Eq>
      </IEdge>
      <Graphics>
        <Position xPos="906" yPos="266"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N55" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="26" yPos="26"/>
        </Graphics>
      </Node>
      <Node id="N58" name="N58" history="false">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="N58" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="396" yPos="187" ctrlXPos="416" ctrlYPos="109"/>
            <ControlPoint xPos="421" yPos="206" ctrlXPos="491" ctrlYPos="166"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="346" yPos="186"/>
        </Graphics>
      </Node>
    </SuperNode>
    <SuperNode id="S30" name="S30" comment="" hideLocalVar="false" hideGlobalVar="false" start="N75;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <IEdge target="N80" start="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="506" yPos="386" ctrlXPos="526" ctrlYPos="386"/>
            <ControlPoint xPos="586" yPos="386" ctrlXPos="566" ctrlYPos="386"/>
          </Connection>
        </Graphics>
        <Eq>
          <Variable name="x"/>
          <String><![CDATA[stop]]></String>
        </Eq>
      </IEdge>
      <Graphics>
        <Position xPos="426" yPos="346"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N73" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="26" yPos="26"/>
        </Graphics>
      </Node>
      <Node id="N75" name="N75" history="false">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <CEdge target="N79" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="386" ctrlXPos="526" ctrlYPos="386"/>
              <ControlPoint xPos="586" yPos="386" ctrlXPos="566" ctrlYPos="386"/>
            </Connection>
          </Graphics>
          <Eq>
            <Variable name="x"/>
            <String><![CDATA[start]]></String>
          </Eq>
        </CEdge>
        <EEdge target="N75" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="476" yPos="347" ctrlXPos="496" ctrlYPos="269"/>
            <ControlPoint xPos="501" yPos="366" ctrlXPos="571" ctrlYPos="326"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="426" yPos="346"/>
        </Graphics>
      </Node>
      <Node id="N79" name="N79" history="false">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="586" yPos="346"/>
        </Graphics>
      </Node>
    </SuperNode>
  </SuperNode>
  <UserCommands>
    <UserCommand name="print" classname ="java.lang.System.err" method="println">
      <Argument name="text" type="java.lang.String"/>
    </UserCommand>
  </UserCommands>
  <ClassPath>
  </ClassPath>
  <InitContext></InitContext>
</SceneFlow>