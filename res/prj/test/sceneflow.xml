<?xml version="1.0" encoding="UTF-8"?>
<SceneFlow id="" name="AAMAS" comment="" hideLocalVar="false" hideGlobalVar="false" modifDate="Di, 6 Dez 2016 16:12:40" start="S18;" context="" package="" xmlns="xml.sceneflow.dfki.de" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="xml.sceneflow.dfki.de res/xsd/sceneflow.xsd">
  <Define>
  </Define>
  <Declare>
    <Variable type="String" name ="SystemTime">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserRole">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="AgentRole">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserAction">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="AgentAction">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserGaze">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="AgentGaze">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserSpeech">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="Bool" name ="UserPresent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentPresent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserSpeaking">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentSpeaking">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserOverlappingAgent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentOverlappingUser">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserBargingInAgent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserBearingUpAgent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserClaimingTurn">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentClaimingTurn">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserInterruptible">
      <Bool value="true"/>
    </Variable>
    <Variable type="Bool" name ="AgentInterruptible">
      <Bool value="true"/>
    </Variable>
    <Variable type="Bool" name ="SharedGaze">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="MutualGaze">
      <Bool value="false"/>
    </Variable>
  </Declare>
  <Commands>
  </Commands>
  <LocalVariableBadge>
    <Position xPos="4" yPos="-37"/>
  </LocalVariableBadge>
  <GlobalVariableBadge>
    <Position xPos="10" yPos="10"/>
  </GlobalVariableBadge>
  <SuperNode id="S56" name="Interaction;Behavior;Model" comment="" hideLocalVar="false" hideGlobalVar="false" start="S20;S192;S4;S26;S16;S40;">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
      <Play>
        <String><![CDATA[[wizard refresh]]]></String>
      </Play>
      <Play>
        <String><![CDATA[[wizard output text=interaction]]]></String>
      </Play>
    </Commands>
    <Graphics>
      <Position xPos="586" yPos="106"/>
    </Graphics>
    <LocalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </LocalVariableBadge>
    <GlobalVariableBadge>
      <Position xPos="45" yPos="104"/>
    </GlobalVariableBadge>
    <Node id="N99" name="History" history="true">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="266" yPos="26"/>
      </Graphics>
    </Node>
    <SuperNode id="S26" name="Detect;Behavior;Patterns" comment="" hideLocalVar="false" hideGlobalVar="false" start="S12;S38;S112;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="586" yPos="186"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N50" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="346" yPos="26"/>
        </Graphics>
      </Node>
      <SuperNode id="S38" name="Detect Voice;Turn-Taking;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S64;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="506" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="33" yPos="569" width="265" height="160"/>
          </Graphics>
          <Text style="color:blue">
            This process models the recognition of the behavioral patterns that could be interpreted as turn regulation signals. They are most important for the phases in which the agent is in the listener role and the user is in the speaker role and are supposed to serve the agent to recognize when a user accepts a role shift, continues to be in the speaker role or wants to offer the turn to the agent.
          </Text>
        </Comment>
        <Comment>
          <Graphics>
            <Boundary xPos="925" yPos="276" width="228" height="68"/>
          </Graphics>
          <Text style="color:blue">
            TODO: The turn hold signal usually enfolds a gaze aversion. So we need to introduce an additinal timeout here
          </Text>
        </Comment>
        <Comment>
          <Graphics>
            <Boundary xPos="342" yPos="90" width="221" height="85"/>
          </Graphics>
          <Text style="color:blue">
            Better recognize such short utterances in a single process outside of overlap, conflict and signal process and classify it into backchannel or not.
          </Text>
        </Comment>
        <Node id="N67" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S60" name="User Is;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N71;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserClaimingTurn"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S75" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="706" yPos="266" ctrlXPos="706" ctrlYPos="286"/>
                <ControlPoint xPos="706" yPos="346" ctrlXPos="706" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <Not>
              <Variable name="UserSpeaking"/>
            </Not>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N70" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N71" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N71" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S64" name="User Is Not; Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N80;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserClaimingTurn"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S44" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="426" ctrlXPos="246" ctrlYPos="406"/>
                <ControlPoint xPos="266" yPos="346" ctrlXPos="246" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            <Variable name="UserSpeaking"/>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N79" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N80" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N80" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S72" name="User;Assigns;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard output text=user_assigns_turn]]]></String>
            </Play>
            <PrologQuery>
            <String><![CDATA[signal(user, turn, assign).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S64" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="546" ctrlXPos="396" ctrlYPos="546"/>
              <ControlPoint xPos="346" yPos="489" ctrlXPos="375" ctrlYPos="505"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="426" yPos="506"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N81" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S75" name="User Is Not; Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N83;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S77" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="386" ctrlXPos="806" ctrlYPos="386"/>
                <ControlPoint xPos="906" yPos="386" ctrlXPos="846" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <Variable name="UserSpeaking"/>
          </IEdge>
          <IEdge target="S41" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="706" yPos="426" ctrlXPos="706" ctrlYPos="446"/>
                <ControlPoint xPos="706" yPos="506" ctrlXPos="706" ctrlYPos="486"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="750"/>
            </TimeoutCondition>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N82" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N83" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N83" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S76" name="User;Takes;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard output text=user_takes_turn]]]></String>
            </Play>
            <PrologQuery>
            <String><![CDATA[signal(user, turn, take).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S60" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
              <ControlPoint xPos="666" yPos="226" ctrlXPos="606" ctrlYPos="226"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="426" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N84" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S77" name="User; Holds; Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard output text=user_holds_turn]]]></String>
            </Play>
            <PrologQuery>
            <String><![CDATA[signal(user, turn, hold).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S60" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="946" yPos="346" ctrlXPos="946" ctrlYPos="261"/>
              <ControlPoint xPos="746" yPos="226" ctrlXPos="830" ctrlYPos="226"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="906" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N85" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S96" name="User; Yields;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard output text=user_yields_turn]]]></String>
            </Play>
            <PrologQuery>
            <String><![CDATA[signal(user, turn, yield).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S64" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="386" ctrlXPos="396" ctrlYPos="386"/>
              <ControlPoint xPos="346" yPos="443" ctrlXPos="375" ctrlYPos="426"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="426" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N150" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S41" name="User Is;Still Not; Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N45;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S96" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="506" ctrlXPos="581" ctrlYPos="421"/>
                <ControlPoint xPos="506" yPos="386" ctrlXPos="590" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="2000"/>
            </TimeoutCondition>
          </IEdge>
          <IEdge target="S72" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="546" ctrlXPos="606" ctrlYPos="546"/>
                <ControlPoint xPos="506" yPos="546" ctrlXPos="566" ctrlYPos="546"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="UserGaze"/>
              <String><![CDATA[agent]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S77" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="546" ctrlXPos="830" ctrlYPos="546"/>
                <ControlPoint xPos="946" yPos="426" ctrlXPos="946" ctrlYPos="510"/>
              </Connection>
            </Graphics>
            <Variable name="UserSpeaking"/>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="506"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N44" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N45" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N45" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S44" name="User Is;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N75;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S76" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="317" yPos="266" ctrlXPos="325" ctrlYPos="236"/>
                <ControlPoint xPos="426" yPos="226" ctrlXPos="396" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="300"/>
            </TimeoutCondition>
          </IEdge>
          <IEdge target="S64" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="346" ctrlXPos="366" ctrlYPos="366"/>
                <ControlPoint xPos="346" yPos="426" ctrlXPos="366" ctrlYPos="406"/>
              </Connection>
            </Graphics>
            <Not>
              <Variable name="UserSpeaking"/>
            </Not>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N73" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N75" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N75" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S47" name="Detect;Connection;Events" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="346" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N89" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S8" name="Detect;Adjacency;Pairs" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N6" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S11" name="Detect;Backchannel;Cues" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N7" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S107" name="Detect;Directed;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N255" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S108" name="Detect;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N256" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S112" name="Detect;Voice Activity;Relations" comment="" hideLocalVar="false" hideGlobalVar="false" start="S10;S111;S150;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="346" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N225" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S10" name="Detect;Voice Activity;Overlaps" comment="" hideLocalVar="false" hideGlobalVar="false" start="S78;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="201" yPos="16"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N226" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S78" name="None; Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N228;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserOverlappingAgent"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Assign>
                <Variable name="AgentOverlappingUser"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S113" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="317" yPos="266" ctrlXPos="340" ctrlYPos="181"/>
                  <ControlPoint xPos="506" yPos="146" ctrlXPos="421" ctrlYPos="146"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S114" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="317" yPos="346" ctrlXPos="340" ctrlYPos="430"/>
                  <ControlPoint xPos="506" yPos="466" ctrlXPos="421" ctrlYPos="466"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="UserSpeaking"/>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="266" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N227" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N228" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N228" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                  <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S113" name="Agent Is;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N230;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserOverlappingAgent"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Assign>
                <Variable name="AgentOverlappingUser"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S78" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="523" yPos="186" ctrlXPos="474" ctrlYPos="270"/>
                  <ControlPoint xPos="346" yPos="295" ctrlXPos="430" ctrlYPos="271"/>
                </Connection>
              </Graphics>
              <And>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S116" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="586" yPos="146" ctrlXPos="646" ctrlYPos="146"/>
                  <ControlPoint xPos="746" yPos="146" ctrlXPos="686" ctrlYPos="146"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Variable name="UserSpeaking"/>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="506" yPos="106"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N229" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N230" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N230" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                  <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S114" name="User Is;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N232;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserOverlappingAgent"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Assign>
                <Variable name="AgentOverlappingUser"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S78" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="523" yPos="426" ctrlXPos="474" ctrlYPos="341"/>
                  <ControlPoint xPos="346" yPos="317" ctrlXPos="430" ctrlYPos="340"/>
                </Connection>
              </Graphics>
              <And>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S117" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="586" yPos="466" ctrlXPos="646" ctrlYPos="466"/>
                  <ControlPoint xPos="746" yPos="466" ctrlXPos="686" ctrlYPos="466"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Variable name="UserSpeaking"/>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="506" yPos="426"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N231" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N232" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N232" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                  <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S115" name="Both Are;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N234;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S114" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="746" yPos="317" ctrlXPos="661" ctrlYPos="340"/>
                  <ControlPoint xPos="569" yPos="426" ctrlXPos="617" ctrlYPos="341"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="UserSpeaking"/>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S78" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="746" yPos="306" ctrlXPos="566" ctrlYPos="306"/>
                  <ControlPoint xPos="346" yPos="306" ctrlXPos="526" ctrlYPos="306"/>
                </Connection>
              </Graphics>
              <And>
                <Not>
                  <Variable name="AgentSpeaking"/>
                </Not>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <IEdge target="S113" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="746" yPos="295" ctrlXPos="661" ctrlYPos="271"/>
                  <ControlPoint xPos="569" yPos="186" ctrlXPos="617" ctrlYPos="270"/>
                </Connection>
              </Graphics>
              <And>
                <Variable name="AgentSpeaking"/>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </And>
            </IEdge>
            <Graphics>
              <Position xPos="746" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N233" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N234" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N234" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="236" yPos="267" ctrlXPos="256" ctrlYPos="189"/>
                  <ControlPoint xPos="261" yPos="286" ctrlXPos="331" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="266"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S116" name="User;Overlaps;Agent" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserOverlappingAgent"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <EEdge target="S115" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="786" yPos="186" ctrlXPos="786" ctrlYPos="206"/>
                <ControlPoint xPos="786" yPos="266" ctrlXPos="786" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="746" yPos="106"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N235" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S117" name="Agent;Overlaps;User" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentOverlappingUser"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <EEdge target="S115" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="786" yPos="426" ctrlXPos="786" ctrlYPos="406"/>
                <ControlPoint xPos="786" yPos="346" ctrlXPos="786" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="746" yPos="426"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N236" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S150" name="Detect;Voice Activity;Conflicts" comment="" hideLocalVar="false" hideGlobalVar="false" start="S154;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="191" yPos="7"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Comment>
            <Graphics>
              <Boundary xPos="700" yPos="395" width="156" height="62"/>
            </Graphics>
            <Text style="color:blue">
              We also need to detect backchannels during overlaps in this process
            </Text>
          </Comment>
          <Node id="N237" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S151" name="User;Barging In;Agent" comment="" hideLocalVar="false" hideGlobalVar="false" start="N239;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserBargingInAgent"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S154" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                  <ControlPoint xPos="626" yPos="266" ctrlXPos="626" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="UserOverlappingAgent"/>
              </Not>
            </IEdge>
            <Graphics>
              <Position xPos="586" yPos="26"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N238" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="49" yPos="154"/>
              </Graphics>
            </Node>
            <Node id="N239" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N239" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="49" yPos="234"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S152" name="Await;Timeout" comment="" hideLocalVar="false" hideGlobalVar="false" start="N241;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S154" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="826" yPos="346" ctrlXPos="806" ctrlYPos="366"/>
                  <ControlPoint xPos="666" yPos="346" ctrlXPos="686" ctrlYPos="366"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="UserOverlappingAgent"/>
              </Not>
            </IEdge>
            <IEdge target="S156" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="866" yPos="266" ctrlXPos="866" ctrlYPos="246"/>
                  <ControlPoint xPos="866" yPos="106" ctrlXPos="867" ctrlYPos="120"/>
                </Connection>
              </Graphics>
              <TimeoutCondition>
              <Int value="1000"/>
              </TimeoutCondition>
            </IEdge>
            <Graphics>
              <Position xPos="826" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N240" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="40" yPos="157"/>
              </Graphics>
            </Node>
            <Node id="N241" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N241" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="40" yPos="237"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S153" name="Await;Timeout" comment="" hideLocalVar="false" hideGlobalVar="false" start="N243;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S154" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="346" ctrlXPos="446" ctrlYPos="366"/>
                  <ControlPoint xPos="586" yPos="346" ctrlXPos="566" ctrlYPos="366"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="AgentOverlappingUser"/>
              </Not>
            </IEdge>
            <IEdge target="S157" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="386" yPos="346" ctrlXPos="386" ctrlYPos="366"/>
                  <ControlPoint xPos="386" yPos="506" ctrlXPos="386" ctrlYPos="486"/>
                </Connection>
              </Graphics>
              <TimeoutCondition>
              <Int value="1000"/>
              </TimeoutCondition>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N242" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="37" yPos="162"/>
              </Graphics>
            </Node>
            <Node id="N243" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N243" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="37" yPos="242"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S154" name="No;Turn;Conflict" comment="" hideLocalVar="false" hideGlobalVar="false" start="N245;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserBearingUpAgent"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Assign>
                <Variable name="UserBargingInAgent"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S153" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="586" yPos="266" ctrlXPos="566" ctrlYPos="246"/>
                  <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              <Variable name="AgentOverlappingUser"/>
            </IEdge>
            <IEdge target="S152" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="266" ctrlXPos="686" ctrlYPos="246"/>
                  <ControlPoint xPos="826" yPos="266" ctrlXPos="806" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              <Variable name="UserOverlappingAgent"/>
            </IEdge>
            <Graphics>
              <Position xPos="586" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N244" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="33" yPos="156"/>
              </Graphics>
            </Node>
            <Node id="N245" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N245" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="33" yPos="236"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S155" name="User;Bearing Up;Agent" comment="" hideLocalVar="false" hideGlobalVar="false" start="N247;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserBearingUpAgent"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S154" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="626" yPos="506" ctrlXPos="626" ctrlYPos="486"/>
                  <ControlPoint xPos="626" yPos="346" ctrlXPos="626" ctrlYPos="366"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="AgentOverlappingUser"/>
              </Not>
            </IEdge>
            <Graphics>
              <Position xPos="586" yPos="506"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N246" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="21" yPos="151"/>
              </Graphics>
            </Node>
            <Node id="N247" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N247" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="21" yPos="231"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S156" name="User;Barges In" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(user, turn, conflict).]]></String>
              </PrologQuery>
            </Commands>
            <EEdge target="S151" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="826" yPos="66" ctrlXPos="806" ctrlYPos="66"/>
                <ControlPoint xPos="666" yPos="66" ctrlXPos="686" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="826" yPos="26"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N248" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S157" name="User;Bears Up" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(user, turn, conflict).]]></String>
              </PrologQuery>
            </Commands>
            <EEdge target="S155" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="546" ctrlXPos="446" ctrlYPos="546"/>
                <ControlPoint xPos="586" yPos="546" ctrlXPos="566" ctrlYPos="546"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="506"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N249" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S111" name="Detect;Voice Activity;Feedbacks" comment="" hideLocalVar="false" hideGlobalVar="false" start="S165;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N282" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S140" name="No;Backchannel;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N285;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S165" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="506" yPos="106" ctrlXPos="452" ctrlYPos="159"/>
                  <ControlPoint xPos="426" yPos="186" ctrlXPos="479" ctrlYPos="132"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="UserOverlappingAgent"/>
              </Not>
            </IEdge>
            <Graphics>
              <Position xPos="506" yPos="26"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N284" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N285" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N285" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                  <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S165" name="No;Voice;Overlap" comment="" hideLocalVar="false" hideGlobalVar="false" start="N287;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S168" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                  <ControlPoint xPos="666" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              <Variable name="UserOverlappingAgent"/>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N286" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="33" yPos="156"/>
              </Graphics>
            </Node>
            <Node id="N287" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N287" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="33" yPos="236"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S168" name="User;Overlapping;Agent" comment="" hideLocalVar="false" hideGlobalVar="false" start="N289;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S140" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="186" ctrlXPos="612" ctrlYPos="132"/>
                  <ControlPoint xPos="586" yPos="106" ctrlXPos="639" ctrlYPos="159"/>
                </Connection>
              </Graphics>
              <TimeoutCondition>
              <Int value="5000"/>
              </TimeoutCondition>
            </IEdge>
            <IEdge target="S169" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="266" ctrlXPos="612" ctrlYPos="319"/>
                  <ControlPoint xPos="586" yPos="346" ctrlXPos="639" ctrlYPos="292"/>
                </Connection>
              </Graphics>
              <Not>
                <Variable name="UserOverlappingAgent"/>
              </Not>
            </IEdge>
            <Graphics>
              <Position xPos="666" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N288" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="40" yPos="157"/>
              </Graphics>
            </Node>
            <Node id="N289" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N289" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="40" yPos="237"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S169" name="Produce;Backchannel;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(user, back, verbal).]]></String>
              </PrologQuery>
            </Commands>
            <EEdge target="S165" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="346" ctrlXPos="452" ctrlYPos="292"/>
                <ControlPoint xPos="426" yPos="266" ctrlXPos="479" ctrlYPos="319"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N290" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="0" yPos="0"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S170" name="Detect; Voice Activity;Adjacencies" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N291" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S256" name="Detect Touch;Turn-Taking;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S31;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="506" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N113" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="186" yPos="106"/>
          </Graphics>
        </Node>
        <SuperNode id="S1" name="User Is;Dragging" comment="" hideLocalVar="false" hideGlobalVar="false" start="S100;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S99" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="626" yPos="266" ctrlXPos="626" ctrlYPos="286"/>
                <ControlPoint xPos="626" yPos="346" ctrlXPos="626" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <Not>
              <Variable name="UserDragging"/>
            </Not>
          </IEdge>
          <Graphics>
            <Position xPos="586" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N34" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
          <SuperNode id="S100" name="User;Averts;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="N96;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S101" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="186" ctrlXPos="446" ctrlYPos="166"/>
                  <ControlPoint xPos="506" yPos="186" ctrlXPos="486" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="UserGaze"/>
                <String><![CDATA[agent]]></String>
              </Eq>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N55" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N96" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N96" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="187" ctrlXPos="416" ctrlYPos="109"/>
                  <ControlPoint xPos="421" yPos="206" ctrlXPos="491" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S101" name="User;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="N97;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Play>
                <String><![CDATA[[wizard output text=user_elicits_feedback]]]></String>
              </Play>
              <PrologQuery>
              <String><![CDATA[signal(elicit).]]></String>
              </PrologQuery>
            </Commands>
            <IEdge target="S100" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="506" yPos="266" ctrlXPos="486" ctrlYPos="286"/>
                  <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="286"/>
                </Connection>
              </Graphics>
              <Neq>
                <Variable name="UserGaze"/>
                <String><![CDATA[agent]]></String>
              </Neq>
            </IEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N95" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N97" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N97" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="187" ctrlXPos="416" ctrlYPos="109"/>
                  <ControlPoint xPos="421" yPos="206" ctrlXPos="491" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S2" name="User;Stops;Dragging" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard output text=user_stops_drag]]]></String>
            </Play>
            <PrologQuery>
            <String><![CDATA[signal(user, drag, stop).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S31" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="346" yPos="386" ctrlXPos="316" ctrlYPos="386"/>
              <ControlPoint xPos="266" yPos="443" ctrlXPos="295" ctrlYPos="426"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N35" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S17" name="User Is;Still Not;Dragging" comment="" hideLocalVar="false" hideGlobalVar="false" start="N38;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S2" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="506" ctrlXPos="501" ctrlYPos="421"/>
                <ControlPoint xPos="426" yPos="386" ctrlXPos="510" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="2000"/>
            </TimeoutCondition>
          </IEdge>
          <IEdge target="S21" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="546" ctrlXPos="526" ctrlYPos="546"/>
                <ControlPoint xPos="426" yPos="546" ctrlXPos="486" ctrlYPos="546"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="UserGaze"/>
              <String><![CDATA[agent]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S33" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="546" ctrlXPos="750" ctrlYPos="546"/>
                <ControlPoint xPos="866" yPos="426" ctrlXPos="866" ctrlYPos="510"/>
              </Connection>
            </Graphics>
            <Variable name="UserDragging"/>
          </IEdge>
          <Graphics>
            <Position xPos="586" yPos="506"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N37" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N38" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N38" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S21" name="User;Stops;Dragging" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard output text=user_stops_drag]]]></String>
            </Play>
            <PrologQuery>
            <String><![CDATA[signal(user, drag, stop).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S31" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="346" yPos="546" ctrlXPos="316" ctrlYPos="546"/>
              <ControlPoint xPos="266" yPos="489" ctrlXPos="295" ctrlYPos="505"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="506"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N39" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S30" name="User Is;Dragging" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserDragging"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <EEdge target="S98" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="237" yPos="266" ctrlXPos="245" ctrlYPos="236"/>
              <ControlPoint xPos="346" yPos="226" ctrlXPos="316" ctrlYPos="226"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="186" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N40" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S31" name="User Is Not;Dragging" comment="" hideLocalVar="false" hideGlobalVar="false" start="N59;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserDragging"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S30" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="226" yPos="426" ctrlXPos="226" ctrlYPos="406"/>
                <ControlPoint xPos="226" yPos="346" ctrlXPos="226" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            <Variable name="UserDragging"/>
          </IEdge>
          <Graphics>
            <Position xPos="186" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N58" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N59" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N59" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S33" name="User;Continues;Dragging" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard output text=user_continues_drag]]]></String>
            </Play>
            <PrologQuery>
            <String><![CDATA[signal(user, drag, continue).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S1" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="866" yPos="346" ctrlXPos="866" ctrlYPos="261"/>
              <ControlPoint xPos="666" yPos="226" ctrlXPos="750" ctrlYPos="226"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="826" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N68" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S99" name="User Is Not;Draging" comment="" hideLocalVar="false" hideGlobalVar="false" start="S102;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S33" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="386" ctrlXPos="726" ctrlYPos="386"/>
                <ControlPoint xPos="826" yPos="386" ctrlXPos="766" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <Variable name="UserDragging"/>
          </IEdge>
          <IEdge target="S17" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="626" yPos="426" ctrlXPos="626" ctrlYPos="446"/>
                <ControlPoint xPos="626" yPos="506" ctrlXPos="626" ctrlYPos="486"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="750"/>
            </TimeoutCondition>
          </IEdge>
          <Graphics>
            <Position xPos="586" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N90" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
          <SuperNode id="S102" name="User;Averts;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="N104;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S103" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="186" ctrlXPos="446" ctrlYPos="166"/>
                  <ControlPoint xPos="506" yPos="186" ctrlXPos="486" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="UserGaze"/>
                <String><![CDATA[agent]]></String>
              </Eq>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N98" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N104" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N104" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="187" ctrlXPos="416" ctrlYPos="109"/>
                  <ControlPoint xPos="421" yPos="206" ctrlXPos="491" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S103" name="User;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="N106;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Play>
                <String><![CDATA[[wizard output text=user_elicits_feedback]]]></String>
              </Play>
              <PrologQuery>
              <String><![CDATA[signal(elicit).]]></String>
              </PrologQuery>
            </Commands>
            <IEdge target="S102" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="506" yPos="266" ctrlXPos="486" ctrlYPos="286"/>
                  <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="286"/>
                </Connection>
              </Graphics>
              <Neq>
                <Variable name="UserGaze"/>
                <String><![CDATA[agent]]></String>
              </Neq>
            </IEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N105" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N106" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N106" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="187" ctrlXPos="416" ctrlYPos="109"/>
                  <ControlPoint xPos="421" yPos="206" ctrlXPos="491" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S98" name="User Starts;Dragging" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard output text=user_starts_drag]]]></String>
            </Play>
            <PrologQuery>
            <String><![CDATA[signal(user, drag, start).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S1" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
              <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N94" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S6" name="Detect;Feedback;Eliciting" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="666" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N4" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="0" yPos="0"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S7" name="Detect;Emotion;Mimicry" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="666" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N5" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="0" yPos="0"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S12" name="Detect;Gaze Target;Relations" comment="" hideLocalVar="false" hideGlobalVar="false" start="S13;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="346" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="471" yPos="273"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N12" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S13" name="One Is;Looking;Nowhere" comment="" hideLocalVar="false" hideGlobalVar="false" start="N30;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="SharedGaze"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="MutualGaze"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S53" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="486" ctrlYPos="126"/>
                <ControlPoint xPos="666" yPos="186" ctrlXPos="606" ctrlYPos="126"/>
              </Connection>
            </Graphics>
            <And>
              <Neq>
                <Variable name="UserGaze"/>
                <String><![CDATA[]]></String>
              </Neq>
              <Neq>
                <Variable name="AgentGaze"/>
                <String><![CDATA[]]></String>
              </Neq>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N28" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N30" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N30" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S53" name="Both Are;Looking;Somewhere" comment="" hideLocalVar="false" hideGlobalVar="false" start="S66;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S13" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="266" ctrlXPos="606" ctrlYPos="326"/>
                <ControlPoint xPos="426" yPos="266" ctrlXPos="486" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <Or>
              <Eq>
                <Variable name="UserGaze"/>
                <String><![CDATA[]]></String>
              </Eq>
              <Eq>
                <Variable name="AgentGaze"/>
                <String><![CDATA[]]></String>
              </Eq>
            </Or>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N32" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S66" name="Different;Gaze;Targets" comment="" hideLocalVar="false" hideGlobalVar="false" start="S67;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="SharedGaze"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S82" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                  <ControlPoint xPos="666" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="UserGaze"/>
                <Variable name="AgentGaze"/>
              </Eq>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N63" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S67" name="No;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="N108;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="MutualGaze"/>
                  <Expression>
                    <Bool value="false"/>
                  </Expression>
                </Assign>
              </Commands>
              <IEdge target="S173" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
                    <ControlPoint xPos="746" yPos="226" ctrlXPos="606" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <And>
                  <Eq>
                    <Variable name="UserGaze"/>
                    <String><![CDATA[agent]]></String>
                  </Eq>
                  <Eq>
                    <Variable name="AgentGaze"/>
                    <String><![CDATA[user]]></String>
                  </Eq>
                </And>
              </IEdge>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N64" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N108" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N108" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S81" name="Mutual;Facial;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="N116;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="MutualGaze"/>
                  <Expression>
                    <Bool value="true"/>
                  </Expression>
                </Assign>
              </Commands>
              <IEdge target="S174" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="746" yPos="386" ctrlXPos="606" ctrlYPos="386"/>
                    <ControlPoint xPos="426" yPos="386" ctrlXPos="566" ctrlYPos="386"/>
                  </Connection>
                </Graphics>
                <Or>
                  <Neq>
                    <Variable name="UserGaze"/>
                    <String><![CDATA[agent]]></String>
                  </Neq>
                  <Neq>
                    <Variable name="AgentGaze"/>
                    <String><![CDATA[user]]></String>
                  </Neq>
                </Or>
              </IEdge>
              <Graphics>
                <Position xPos="746" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N109" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N116" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N116" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S173" name="Start;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <Add>
                  <Add>
                    <String><![CDATA[signal(both, startMutual, ]]></String>
                    <Variable name="UserGaze"/>
                  </Add>
                  <String><![CDATA[).]]></String>
                </Add>
                </PrologQuery>
              </Commands>
              <EEdge target="S81" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="786" yPos="266" ctrlXPos="786" ctrlYPos="286"/>
                  <ControlPoint xPos="786" yPos="346" ctrlXPos="786" ctrlYPos="326"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="746" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N118" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S174" name="Stop;Mutual;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <Add>
                  <Add>
                    <String><![CDATA[signal(both, stopMutual, ]]></String>
                    <Variable name="UserGaze"/>
                  </Add>
                  <String><![CDATA[).]]></String>
                </Add>
                </PrologQuery>
              </Commands>
              <EEdge target="S67" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="386" yPos="346" ctrlXPos="386" ctrlYPos="326"/>
                  <ControlPoint xPos="386" yPos="266" ctrlXPos="386" ctrlYPos="286"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N119" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S82" name="Start;Sharing;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[signal(both, startShared, ]]></String>
                  <Variable name="UserGaze"/>
                </Add>
                <String><![CDATA[).]]></String>
              </Add>
              </PrologQuery>
            </Commands>
            <EEdge target="S171" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="706" yPos="266" ctrlXPos="706" ctrlYPos="286"/>
                <ControlPoint xPos="706" yPos="346" ctrlXPos="706" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="666" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N117" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S171" name="Sharing;Gaze;Target" comment="" hideLocalVar="false" hideGlobalVar="false" start="N294;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="SharedGaze"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
            </Commands>
            <IEdge target="S172" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="386" ctrlXPos="566" ctrlYPos="386"/>
                  <ControlPoint xPos="426" yPos="386" ctrlXPos="526" ctrlYPos="386"/>
                </Connection>
              </Graphics>
              <Neq>
                <Variable name="UserGaze"/>
                <Variable name="AgentGaze"/>
              </Neq>
            </IEdge>
            <Graphics>
              <Position xPos="666" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N292" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <Node id="N294" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N294" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                  <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="346" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S172" name="Stop;Sharing;Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[signal(both, stopShared, ]]></String>
                  <Variable name="UserGaze"/>
                </Add>
                <String><![CDATA[).]]></String>
              </Add>
              </PrologQuery>
            </Commands>
            <EEdge target="S66" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="346" ctrlXPos="386" ctrlYPos="326"/>
                <ControlPoint xPos="386" yPos="266" ctrlXPos="386" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N293" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S58" name="Detect;Overlap;Categories" comment="" hideLocalVar="false" hideGlobalVar="false" start="S89;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="Start">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="End">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="Dur">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="346" yPos="346"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="121" yPos="338"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="257" yPos="287" width="199" height="79"/>
          </Graphics>
          <Text style="color:blue">
            We stay in this node whenever the user has started speaking before the agent, no matter if the agent overlaps the user in between.
          </Text>
        </Comment>
        <Node id="N121" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S87" name="Agent;Is Still;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N124;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S89" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="906" yPos="363" ctrlXPos="787" ctrlYPos="294"/>
                <ControlPoint xPos="666" yPos="249" ctrlXPos="784" ctrlYPos="317"/>
              </Connection>
            </Graphics>
            <And>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <IEdge target="S105" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="906" yPos="409" ctrlXPos="821" ctrlYPos="457"/>
                <ControlPoint xPos="746" yPos="523" ctrlXPos="830" ctrlYPos="474"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="AgentSpeaking"/>
              <Variable name="UserSpeaking"/>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="906" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N122" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N124" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N124" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S88" name="User Has;Started;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N134;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S89" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="215" ctrlXPos="446" ctrlYPos="187"/>
                <ControlPoint xPos="586" yPos="215" ctrlXPos="486" ctrlYPos="187"/>
              </Connection>
            </Graphics>
            <And>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N133" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="282" yPos="50"/>
            </Graphics>
          </Node>
          <Node id="N134" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N134" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="282" yPos="130"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S89" name="None Is;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N142;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[stop(overlap).]]></String>
            </PrologQuery>
          </Commands>
          <IEdge target="S90" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="215" ctrlXPos="766" ctrlYPos="187"/>
                <ControlPoint xPos="906" yPos="215" ctrlXPos="806" ctrlYPos="187"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="AgentSpeaking"/>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <IEdge target="S88" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="237" ctrlXPos="486" ctrlYPos="264"/>
                <ControlPoint xPos="346" yPos="226" ctrlXPos="446" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="UserSpeaking"/>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="586" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N140" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="290" yPos="31"/>
            </Graphics>
          </Node>
          <Node id="N142" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N142" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="290" yPos="111"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S90" name="Agent Has;Started;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N145;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S89" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="906" yPos="226" ctrlXPos="806" ctrlYPos="226"/>
                <ControlPoint xPos="666" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <And>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <IEdge target="S87" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="946" yPos="266" ctrlXPos="946" ctrlYPos="286"/>
                <ControlPoint xPos="946" yPos="346" ctrlXPos="946" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[timeout(overlap, 5000).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S91" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="946" yPos="186" ctrlXPos="946" ctrlYPos="166"/>
                <ControlPoint xPos="946" yPos="106" ctrlXPos="946" ctrlYPos="126"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="AgentSpeaking"/>
              <Variable name="UserSpeaking"/>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="906" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N144" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="252" yPos="61"/>
            </Graphics>
          </Node>
          <Node id="N145" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N145" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="252" yPos="141"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S91" name="Both Are;Initially;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N163;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[now(Start).]]></String>
            </PrologQuery>
          </Commands>
          <IEdge target="S92" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="906" yPos="66" ctrlXPos="726" ctrlYPos="66"/>
                <ControlPoint xPos="506" yPos="66" ctrlXPos="686" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <And>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
              <Variable name="UserSpeaking"/>
            </And>
          </IEdge>
          <IEdge target="S94" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="986" yPos="106" ctrlXPos="1039" ctrlYPos="159"/>
                <ControlPoint xPos="1066" yPos="186" ctrlXPos="1012" ctrlYPos="132"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="AgentSpeaking"/>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="906" yPos="26"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N146" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N163" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N163" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S92" name="Turn-Initial;Continuer;Detected" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[now(End), Dur is End - ]]></String>
                <Variable name="Start"/>
              </Add>
              <String><![CDATA[.]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <EEdge target="S88" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="106" ctrlXPos="372" ctrlYPos="159"/>
              <ControlPoint xPos="346" yPos="186" ctrlXPos="399" ctrlYPos="132"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="426" yPos="26"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N167" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S93" name="Turn-Internal;Overlap;Detected" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[now(End), Dur is End - ]]></String>
                <Variable name="Start"/>
              </Add>
              <String><![CDATA[.]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <EEdge target="S87" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="1066" yPos="506" ctrlXPos="1012" ctrlYPos="452"/>
              <ControlPoint xPos="986" yPos="426" ctrlXPos="1039" ctrlYPos="479"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="1066" yPos="506"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N168" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S94" name="Turn-Initial;Overlap;Detected" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[now(End), Dur is End - ]]></String>
                <Variable name="Start"/>
              </Add>
              <String><![CDATA[.]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <EEdge target="S87" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="1066" yPos="266" ctrlXPos="1012" ctrlYPos="319"/>
              <ControlPoint xPos="986" yPos="346" ctrlXPos="1039" ctrlYPos="292"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="1066" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N169" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S105" name="Both Are;Internally;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N198;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[now(Start).]]></String>
            </PrologQuery>
          </Commands>
          <IEdge target="S93" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="546" ctrlXPos="886" ctrlYPos="546"/>
                <ControlPoint xPos="1066" yPos="546" ctrlXPos="926" ctrlYPos="546"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="AgentSpeaking"/>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <IEdge target="S106" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="523" ctrlXPos="581" ctrlYPos="474"/>
                <ControlPoint xPos="506" yPos="409" ctrlXPos="590" ctrlYPos="457"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="UserSpeaking"/>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="506"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N170" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N198" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N198" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S106" name="Turn-Internal;Continuer;Detected" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="S88" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="346" ctrlXPos="372" ctrlYPos="292"/>
              <ControlPoint xPos="346" yPos="266" ctrlXPos="399" ctrlYPos="319"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="426" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N205" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S16" name="System;Monitoring;Processes" comment="" hideLocalVar="false" hideGlobalVar="false" start="S42;N25;S43;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="266" yPos="186"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N24" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="106"/>
        </Graphics>
      </Node>
      <Node id="N25" name="Get; System; Time" history="false">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <PrologQuery>
          <String><![CDATA[now(SystemTime).]]></String>
          </PrologQuery>
        </Commands>
        <EEdge target="N25" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="956" yPos="107" ctrlXPos="976" ctrlYPos="29"/>
            <ControlPoint xPos="981" yPos="126" ctrlXPos="1051" ctrlYPos="86"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="906" yPos="106"/>
        </Graphics>
      </Node>
      <SuperNode id="S42" name="Report;Fact Base;Statistics" comment="" hideLocalVar="false" hideGlobalVar="false" start="N48;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <PrologQuery>
          <String><![CDATA[statistics.]]></String>
          </PrologQuery>
        </Commands>
        <IEdge target="S42" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="466" yPos="106" ctrlXPos="466" ctrlYPos="26"/>
              <ControlPoint xPos="506" yPos="106" ctrlXPos="586" ctrlYPos="26"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[timeout(status, 5000).]]></String>
          </PrologQuery>
        </IEdge>
        <Graphics>
          <Position xPos="426" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N26" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N48" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N48" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
              <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="266" yPos="106"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S43" name="Collect;Fact Base;Garbage" comment="" hideLocalVar="false" hideGlobalVar="false" start="N72;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <PrologQuery>
          <String><![CDATA[clean(speech, 30000).]]></String>
          </PrologQuery>
          <PrologQuery>
          <String><![CDATA[clean(gaze, 10000).]]></String>
          </PrologQuery>
        </Commands>
        <IEdge target="S43" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="706" yPos="106" ctrlXPos="706" ctrlYPos="26"/>
              <ControlPoint xPos="746" yPos="106" ctrlXPos="826" ctrlYPos="26"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[timeout(trash, 5000).]]></String>
          </PrologQuery>
        </IEdge>
        <Graphics>
          <Position xPos="666" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N46" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N72" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N72" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
              <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="266" yPos="106"/>
          </Graphics>
        </Node>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S20" name="Participant;Role;Shifting" comment="" hideLocalVar="false" hideGlobalVar="false" start="S22;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="746" yPos="186"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Comment>
        <Graphics>
          <Boundary xPos="231" yPos="281" width="370" height="93"/>
        </Graphics>
        <Text style="color:blue">
          This process determines the assignment of the different participant roles to the user and the agent as well as the shifts of these participant roles between the user and the agent. The determination of the participant roles is based on the attendance of the interaction partners as well as the role regulation signals.
        </Text>
      </Comment>
      <Node id="N1" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="106"/>
        </Graphics>
      </Node>
      <SuperNode id="S22" name="No;Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="N52;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <Assign>
            <Variable name="UserRole"/>
            <Expression>
              <String><![CDATA[absent]]></String>
            </Expression>
          </Assign>
          <Assign>
            <Variable name="AgentRole"/>
            <Expression>
              <String><![CDATA[absent]]></String>
            </Expression>
          </Assign>
          <Play>
            <String><![CDATA[[wizard refresh]]]></String>
          </Play>
        </Commands>
        <IEdge target="S27" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="106" ctrlXPos="526" ctrlYPos="86"/>
              <ControlPoint xPos="586" yPos="106" ctrlXPos="566" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          <And>
            <Variable name="UserPresent"/>
            <Variable name="AgentPresent"/>
          </And>
        </IEdge>
        <Graphics>
          <Position xPos="426" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N29" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N52" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N52" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
              <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="106"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S27" name="Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="S28;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S22" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="586" yPos="186" ctrlXPos="566" ctrlYPos="206"/>
              <ControlPoint xPos="506" yPos="186" ctrlXPos="526" ctrlYPos="206"/>
            </Connection>
          </Graphics>
          <Or>
            <Not>
              <Variable name="UserPresent"/>
            </Not>
            <Not>
              <Variable name="AgentPresent"/>
            </Not>
          </Or>
        </IEdge>
        <Graphics>
          <Position xPos="586" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="126" yPos="441" width="186" height="58"/>
          </Graphics>
          <Text style="color:blue">
            Here we should use the timeout to switch to the speaker role after the user offered the turn.
          </Text>
        </Comment>
        <Comment>
          <Graphics>
            <Boundary xPos="487" yPos="567" width="291" height="54"/>
          </Graphics>
          <Text style="color:blue">
            TODO: Here we should take the first occupy based on timestamps and not undeterministically to avoid racing conditions.
          </Text>
        </Comment>
        <Comment>
          <Graphics>
            <Boundary xPos="848" yPos="70" width="164" height="80"/>
          </Graphics>
          <Text style="color:blue">
            Should these timeouts better result in a bystander bystander constellation?
          </Text>
        </Comment>
        <Comment>
          <Graphics>
            <Boundary xPos="346" yPos="37" width="100" height="100"/>
          </Graphics>
          <Text style="color:blue">
            All other role events should be handled and ignored with self loops too
          </Text>
        </Comment>
        <Node id="N51" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="586" yPos="106"/>
          </Graphics>
        </Node>
        <SuperNode id="S28" name="Bystander" comment="" hideLocalVar="false" hideGlobalVar="false" start="S59;S51;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserRole"/>
              <Expression>
                <String><![CDATA[bystander]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentRole"/>
              <Expression>
                <String><![CDATA[bystander]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="215" ctrlXPos="766" ctrlYPos="187"/>
                <ControlPoint xPos="906" yPos="215" ctrlXPos="806" ctrlYPos="187"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(user, role, occupy).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="215" ctrlXPos="486" ctrlYPos="187"/>
                <ControlPoint xPos="346" yPos="215" ctrlXPos="446" ctrlYPos="187"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(agent, role, occupy).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="586" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N53" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S59" name="User;Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S63;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S59" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="106"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="506" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N8" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S62" name="Yield;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N13" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S63" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N141;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S65" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[remove(user, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N15" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N141" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N141" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S65" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S68" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[take]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S79" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="266" ctrlXPos="532" ctrlYPos="319"/>
                    <ControlPoint xPos="506" yPos="346" ctrlXPos="559" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[hold]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S62" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="266" ctrlXPos="719" ctrlYPos="319"/>
                    <ControlPoint xPos="746" yPos="346" ctrlXPos="692" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[yield]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S80" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[assign]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N18" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S68" name="Take;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=user_occupies_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(user, role, occupy).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N19" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S79" name="Hold;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="426" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N31" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S80" name="Assign;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N57" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S51" name="Agent;Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S258;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S51" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="106"/>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="666" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N125" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S257" name="Abort;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N135" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S258" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N143;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S259" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[remove(agent, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N136" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N143" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N143" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S259" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S260" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[request]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S261" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="266" ctrlXPos="626" ctrlYPos="286"/>
                    <ControlPoint xPos="626" yPos="346" ctrlXPos="626" ctrlYPos="326"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[finish]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S257" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[abort]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N137" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S260" name="Request;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=agent_occupies_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(agent, turn, permit).]]></String>
                </PrologQuery>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, occupy).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N138" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S261" name="Finish;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="586" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N139" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S29" name="Speaker" comment="" hideLocalVar="false" hideGlobalVar="false" start="S104;S292;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserRole"/>
              <Expression>
                <String><![CDATA[addressee]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentRole"/>
              <Expression>
                <String><![CDATA[speaker]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[nothing]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[nothing]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S28" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="237" ctrlXPos="446" ctrlYPos="264"/>
                <ControlPoint xPos="586" yPos="237" ctrlXPos="486" ctrlYPos="264"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(agent, role, release).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S35" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="455" ctrlYPos="375"/>
                <ControlPoint xPos="506" yPos="426" ctrlXPos="396" ctrlYPos="316"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(agent, role, offer).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="203" ctrlXPos="606" ctrlYPos="53"/>
                <ControlPoint xPos="906" yPos="203" ctrlXPos="646" ctrlYPos="53"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(agent, role, giveup).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="306" yPos="186" ctrlXPos="306" ctrlYPos="106"/>
                <ControlPoint xPos="266" yPos="226" ctrlXPos="186" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(agent, role, claim).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N69" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S104" name="Agent;Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S288;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S104" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="106"/>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="666" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N349" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S249" name="Abort;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=agent_givesup_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, giveup).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N350" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S288" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N363;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S289" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[remove(agent, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N357" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N363" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N363" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S289" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S290" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[request]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S291" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="266" ctrlXPos="626" ctrlYPos="286"/>
                    <ControlPoint xPos="626" yPos="346" ctrlXPos="626" ctrlYPos="326"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[finish]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S249" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[abort]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N364" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S290" name="Request;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=agent_claims_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(agent, turn, permit).]]></String>
                </PrologQuery>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, claim).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N365" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S291" name="Finish;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=agent_offers_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, offer).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="586" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N366" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S292" name="User;Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S294;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S292" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="106"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="506" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Comment>
              <Graphics>
                <Boundary xPos="550" yPos="470" width="296" height="105"/>
              </Graphics>
              <Text style="color:blue">
                The user can stop speaking in the listener role, if he was interrupted before if he himself started and interrupted the agent but also stopped again before the role switch has been realized due to a lenghty interrupt handling in the dialog process.
              </Text>
            </Comment>
            <Node id="N367" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="266" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S293" name="Yield;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, release).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="506" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N368" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S294" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N370;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S295" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[remove(user, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N369" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N370" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N370" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S295" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S297" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="249" ctrlXPos="501" ctrlYPos="297"/>
                    <ControlPoint xPos="426" yPos="363" ctrlXPos="510" ctrlYPos="314"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[hold]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S293" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="603" yPos="266" ctrlXPos="586" ctrlYPos="295"/>
                    <ControlPoint xPos="569" yPos="346" ctrlXPos="585" ctrlYPos="316"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[yield]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S298" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="266" ctrlXPos="719" ctrlYPos="319"/>
                    <ControlPoint xPos="746" yPos="346" ctrlXPos="692" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[assign]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S312" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[take]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S19" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[conflict]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N371" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S296" name="Interject;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=user_interjects_agent]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(user, turn, interject).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="106" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N372" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S297" name="Hold;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N373" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S298" name="Assign;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, release).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N374" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S312" name="Check;Interject;Policy" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, occupy).]]></String>
                </PrologQuery>
              </Commands>
              <IEdge target="S296" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="346" yPos="237" ctrlXPos="279" ctrlYPos="255"/>
                    <ControlPoint xPos="186" yPos="295" ctrlXPos="252" ctrlYPos="276"/>
                  </Connection>
                </Graphics>
                <Variable name="AgentInterruptible"/>
              </IEdge>
              <IEdge target="S313" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="363" yPos="266" ctrlXPos="314" ctrlYPos="350"/>
                    <ControlPoint xPos="249" yPos="426" ctrlXPos="297" ctrlYPos="341"/>
                  </Connection>
                </Graphics>
                <Not>
                  <Variable name="AgentInterruptible"/>
                </Not>
              </IEdge>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N392" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="0" yPos="0"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S313" name="Leave;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=user_leavesto_agent]]]></String>
                </Play>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="426"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N393" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="0" yPos="0"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S19" name="Interrupt;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=user_interrupts_agent]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(user, turn, interrupt).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N20" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="0" yPos="0"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S32" name="Addressee" comment="" hideLocalVar="false" hideGlobalVar="false" start="S97;S267;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserRole"/>
              <Expression>
                <String><![CDATA[speaker]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentRole"/>
              <Expression>
                <String><![CDATA[addressee]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[nothing]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[nothing]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S28" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="906" yPos="237" ctrlXPos="806" ctrlYPos="264"/>
                <ControlPoint xPos="666" yPos="237" ctrlXPos="766" ctrlYPos="264"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(user, role, release).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S61" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="906" yPos="266" ctrlXPos="796" ctrlYPos="375"/>
                <ControlPoint xPos="746" yPos="426" ctrlXPos="855" ctrlYPos="316"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(user, role, offer).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="946" yPos="186" ctrlXPos="946" ctrlYPos="106"/>
                <ControlPoint xPos="986" yPos="226" ctrlXPos="1066" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(user, role, claim).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="923" yPos="186" ctrlXPos="773" ctrlYPos="15"/>
                <ControlPoint xPos="329" yPos="186" ctrlXPos="478" ctrlYPos="15"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(agent, role, conquer).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="906" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N107" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S97" name="Agent;Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S263;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S97" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="106"/>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="666" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="453" yPos="99"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N147" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S262" name="Abort;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="986" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N148" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S263" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N151;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S264" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="786" yPos="186" ctrlXPos="786" ctrlYPos="206"/>
                    <ControlPoint xPos="786" yPos="266" ctrlXPos="786" ctrlYPos="246"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[remove(agent, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="746" yPos="106"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N149" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N151" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N151" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S264" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S266" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="786" yPos="346" ctrlXPos="786" ctrlYPos="366"/>
                    <ControlPoint xPos="786" yPos="426" ctrlXPos="786" ctrlYPos="406"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[finish]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S262" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="826" yPos="306" ctrlXPos="886" ctrlYPos="306"/>
                    <ControlPoint xPos="986" yPos="306" ctrlXPos="926" ctrlYPos="306"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[abort]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S311" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="746" yPos="306" ctrlXPos="686" ctrlYPos="306"/>
                    <ControlPoint xPos="586" yPos="306" ctrlXPos="646" ctrlYPos="306"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[request]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="746" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N152" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S265" name="Conquer;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=agent_conquers_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(agent, turn, permit).]]></String>
                </PrologQuery>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, conquer).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="266" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N153" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S266" name="Finish;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="426"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N154" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S275" name="Leave;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=agent_rejects_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(agent, turn, forbid).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="266" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N166" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S311" name="Check;Interrupt;Policy" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S265" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="506" yPos="295" ctrlXPos="439" ctrlYPos="276"/>
                    <ControlPoint xPos="346" yPos="226" ctrlXPos="412" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Variable name="UserInterruptible"/>
              </IEdge>
              <IEdge target="S275" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="506" yPos="317" ctrlXPos="439" ctrlYPos="335"/>
                    <ControlPoint xPos="346" yPos="386" ctrlXPos="412" ctrlYPos="386"/>
                  </Connection>
                </Graphics>
                <Not>
                  <Variable name="UserInterruptible"/>
                </Not>
              </IEdge>
              <Graphics>
                <Position xPos="506" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N391" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="26" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S267" name="User;Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S269;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S267" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="106"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="506" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N155" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S268" name="Yield;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, release).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N156" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S269" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N158;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S270" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[remove(user, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N157" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N158" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N158" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S270" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S271" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[take]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S272" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="266" ctrlXPos="532" ctrlYPos="319"/>
                    <ControlPoint xPos="506" yPos="346" ctrlXPos="559" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[hold]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S268" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="266" ctrlXPos="719" ctrlYPos="319"/>
                    <ControlPoint xPos="746" yPos="346" ctrlXPos="692" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[yield]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S273" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[assign]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N159" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S271" name="Take;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N160" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S272" name="Hold;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, claim).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="426" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N161" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S273" name="Assign;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(user, role, offer).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N162" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S35" name="Offering" comment="" hideLocalVar="false" hideGlobalVar="false" start="S305;S189;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[offering]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="489" ctrlXPos="759" ctrlYPos="588"/>
                <ControlPoint xPos="957" yPos="266" ctrlXPos="1004" ctrlYPos="439"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(user, role, accept).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S28" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="426" ctrlXPos="652" ctrlYPos="359"/>
                <ControlPoint xPos="586" yPos="266" ctrlXPos="519" ctrlYPos="332"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="3000"/>
            </TimeoutCondition>
          </IEdge>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="466" ctrlXPos="396" ctrlYPos="466"/>
                <ControlPoint xPos="306" yPos="266" ctrlXPos="306" ctrlYPos="375"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(agent, role, reclaim)]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="506" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N110" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S189" name="User;Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S300;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S189" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="106"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="506" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N375" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S299" name="Yield;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N376" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S300" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N378;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S301" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[remove(user, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N377" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N378" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N378" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S301" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S302" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[take]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S303" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="266" ctrlXPos="532" ctrlYPos="319"/>
                    <ControlPoint xPos="506" yPos="346" ctrlXPos="559" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[hold]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S299" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="266" ctrlXPos="719" ctrlYPos="319"/>
                    <ControlPoint xPos="746" yPos="346" ctrlXPos="692" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[yield]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S304" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[assign]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N379" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S302" name="Take;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=user_accepts_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(user, role, accept).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N380" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S303" name="Hold;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="426" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N381" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S304" name="Assign;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N382" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S305" name="Agent;Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S307;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S305" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="106"/>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="666" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N383" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S306" name="Abort;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N384" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S307" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N386;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S308" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[remove(agent, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N385" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N386" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N386" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S308" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S309" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[request]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S310" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="266" ctrlXPos="626" ctrlYPos="286"/>
                    <ControlPoint xPos="626" yPos="346" ctrlXPos="626" ctrlYPos="326"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[finish]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S306" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[abort]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N387" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S309" name="Request;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=agent_reclaims_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(agent, turn, permit).]]></String>
                </PrologQuery>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, reclaim).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N388" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S310" name="Finish;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="586" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N389" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S61" name="Offered" comment="" hideLocalVar="false" hideGlobalVar="false" start="S274;S282;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[offering]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="489" ctrlXPos="492" ctrlYPos="588"/>
                <ControlPoint xPos="295" yPos="266" ctrlXPos="247" ctrlYPos="439"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(agent, role, accept).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="466" ctrlXPos="855" ctrlYPos="466"/>
                <ControlPoint xPos="946" yPos="266" ctrlXPos="946" ctrlYPos="375"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(user, role, reclaim).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S28" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="426" ctrlXPos="599" ctrlYPos="359"/>
                <ControlPoint xPos="666" yPos="266" ctrlXPos="732" ctrlYPos="332"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="3000"/>
            </TimeoutCondition>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N111" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <SuperNode id="S274" name="User;Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S277;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S274" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="106"/>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="506" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N173" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S276" name="Yield;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N174" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S277" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N250;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S278" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[remove(user, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N224" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N250" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N250" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S278" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S279" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[take]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S280" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="266" ctrlXPos="532" ctrlYPos="319"/>
                    <ControlPoint xPos="506" yPos="346" ctrlXPos="559" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[hold]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S276" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="266" ctrlXPos="719" ctrlYPos="319"/>
                    <ControlPoint xPos="746" yPos="346" ctrlXPos="692" ctrlYPos="292"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[yield]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S281" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[assign]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N251" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S279" name="Take;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=user_reclaims_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(user, role, reclaim).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N252" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S280" name="Hold;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="426" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N253" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S281" name="Assign;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N254" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S282" name="Agent;Turn;Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S284;">
            <Define>
            </Define>
            <Declare>
              <Variable type="String" name ="Name">
                <String><![CDATA[]]></String>
              </Variable>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S282" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="106"/>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="666" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="676" yPos="109"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N266" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="26"/>
              </Graphics>
            </Node>
            <SuperNode id="S283" name="Abort;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="826" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N273" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S284" name="Await;Turn;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N275;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S285" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="106" ctrlXPos="626" ctrlYPos="126"/>
                    <ControlPoint xPos="626" yPos="186" ctrlXPos="626" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                <PrologQuery>
                <String><![CDATA[remove(agent, turn, Name).]]></String>
                </PrologQuery>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="26"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N274" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
              <Node id="N275" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N275" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                    <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="346" yPos="106"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S285" name="Check;Type" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S286" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[request]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S287" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="626" yPos="266" ctrlXPos="626" ctrlYPos="286"/>
                    <ControlPoint xPos="626" yPos="346" ctrlXPos="626" ctrlYPos="326"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[finish]]></String>
                </Eq>
              </IEdge>
              <IEdge target="S283" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="666" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                    <ControlPoint xPos="826" yPos="226" ctrlXPos="766" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="Name"/>
                  <String><![CDATA[abort]]></String>
                </Eq>
              </IEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N283" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S286" name="Request;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[wizard output text=agent_accepts_role]]]></String>
                </Play>
                <PrologQuery>
                <String><![CDATA[signal(agent, turn, permit).]]></String>
                </PrologQuery>
                <PrologQuery>
                <String><![CDATA[signal(agent, role, accept).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="346" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N334" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S287" name="Finish;Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="586" yPos="346"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N346" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="346" yPos="26"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S40" name="Handle;Input;Events" comment="" hideLocalVar="false" hideGlobalVar="false" start="S128;S139;S118;S138;S127;S14;S141;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="426" yPos="186"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N179" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="26"/>
        </Graphics>
      </Node>
      <SuperNode id="S118" name="Handle;Voice;Events" comment="" hideLocalVar="false" hideGlobalVar="false" start="S119;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="N">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="D">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="E">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
          <Play>
            <String><![CDATA[[wizard refresh]]]></String>
          </Play>
        </Commands>
        <EEdge target="S118" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="546" yPos="106" ctrlXPos="546" ctrlYPos="26"/>
            <ControlPoint xPos="586" yPos="106" ctrlXPos="666" ctrlYPos="26"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="506" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="249" yPos="87"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="18" yPos="406" width="235" height="71"/>
          </Graphics>
          <Text style="color:blue">
            Here we extract the oldest voice event and retract it from the fact base then. We do not delete the other probably newer events since we do not want to miss any voice events here.
          </Text>
        </Comment>
        <Node id="N180" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="426" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S119" name="Get Next;Oldest;Voice Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N182;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S120" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="306" ctrlXPos="566" ctrlYPos="306"/>
                <ControlPoint xPos="666" yPos="306" ctrlXPos="606" ctrlYPos="306"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[voice(N, D, E).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="426" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N181" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N182" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N182" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S120" name="Check; Event;Name" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S121" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="706" yPos="266" ctrlXPos="706" ctrlYPos="246"/>
                <ControlPoint xPos="706" yPos="186" ctrlXPos="706" ctrlYPos="206"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="N"/>
              </Add>
              <String><![CDATA[, user).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <IEdge target="S122" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="706" yPos="346" ctrlXPos="706" ctrlYPos="366"/>
                <ControlPoint xPos="706" yPos="426" ctrlXPos="706" ctrlYPos="406"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="N"/>
              </Add>
              <String><![CDATA[, agent).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N183" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S121" name="User;Voice;Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S123" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="146" ctrlXPos="606" ctrlYPos="146"/>
                <ControlPoint xPos="506" yPos="146" ctrlXPos="566" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="D"/>
              </Add>
              <String><![CDATA[, start).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <IEdge target="S124" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="146" ctrlXPos="806" ctrlYPos="146"/>
                <ControlPoint xPos="906" yPos="146" ctrlXPos="846" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="D"/>
              </Add>
              <String><![CDATA[, stop).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N184" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S122" name="Agent;Voice;Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S125" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="466" ctrlXPos="606" ctrlYPos="466"/>
                <ControlPoint xPos="506" yPos="466" ctrlXPos="566" ctrlYPos="466"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="D"/>
              </Add>
              <String><![CDATA[, start).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <IEdge target="S126" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="746" yPos="466" ctrlXPos="806" ctrlYPos="466"/>
                <ControlPoint xPos="906" yPos="466" ctrlXPos="846" ctrlYPos="466"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="D"/>
              </Add>
              <String><![CDATA[, stop).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N185" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S123" name="User;Starts;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserSpeaking"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
            <UserCommand name="print">
              <String><![CDATA[User starts speaking]]></String>
            </UserCommand>
          </Commands>
          <Graphics>
            <Position xPos="426" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N186" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S124" name="User;Stops;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserSpeaking"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
            <UserCommand name="print">
              <String><![CDATA[User stops speaking]]></String>
            </UserCommand>
          </Commands>
          <Graphics>
            <Position xPos="906" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N187" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S125" name="Agent;Starts;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentSpeaking"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
            <UserCommand name="print">
              <String><![CDATA[Agent starts speaking]]></String>
            </UserCommand>
          </Commands>
          <Graphics>
            <Position xPos="426" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N188" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S126" name="Agent;Stops;Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentSpeaking"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
            <UserCommand name="print">
              <String><![CDATA[Agent stops speaking]]></String>
            </UserCommand>
          </Commands>
          <Graphics>
            <Position xPos="906" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N189" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S127" name="Handle;Touch;Events" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S127" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="546" yPos="266" ctrlXPos="546" ctrlYPos="186"/>
            <ControlPoint xPos="586" yPos="266" ctrlXPos="666" ctrlYPos="186"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="506" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N190" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="26"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S128" name="Handle;Gaze;Events" comment="" hideLocalVar="false" hideGlobalVar="false" start="S129;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="D">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="E">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S128" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="546" yPos="426" ctrlXPos="546" ctrlYPos="346"/>
            <ControlPoint xPos="586" yPos="426" ctrlXPos="666" ctrlYPos="346"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="506" yPos="426"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="270" yPos="4"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="759" yPos="393" width="237" height="92"/>
          </Graphics>
          <Text style="color:blue">
            The agent's gaze shifts, which means each change of the agent's current gaze target and thus it's visual focus of attention  have to be forwarded to the connection event detection processes.
          </Text>
        </Comment>
        <Comment>
          <Graphics>
            <Boundary xPos="789" yPos="102" width="239" height="94"/>
          </Graphics>
          <Text style="color:blue">
            The user's gaze shifts have to be forwarded to the connection event detection processes as well as to the processes that control the  automatic and reactive nonverbal behavior of the agent.
          </Text>
        </Comment>
        <Node id="N191" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="346"/>
          </Graphics>
        </Node>
        <SuperNode id="S129" name="Get Next;Oldest;Gaze Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N193;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S133" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="106" yPos="306" ctrlXPos="166" ctrlYPos="306"/>
                <ControlPoint xPos="186" yPos="306" ctrlXPos="126" ctrlYPos="306"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[gaze(E).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="26" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N192" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N193" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N193" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S130" name="Check;Event;Name" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S131" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="466" yPos="266" ctrlXPos="466" ctrlYPos="246"/>
                <ControlPoint xPos="466" yPos="186" ctrlXPos="466" ctrlYPos="206"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[val(name, user, ]]></String>
                <Variable name="E"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <IEdge target="S132" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="466" yPos="346" ctrlXPos="466" ctrlYPos="366"/>
                <ControlPoint xPos="466" yPos="426" ctrlXPos="466" ctrlYPos="406"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[val(name, agent, ]]></String>
                <Variable name="E"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="426" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N194" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S131" name="User;Gaze;Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S134" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="146" ctrlXPos="566" ctrlYPos="146"/>
                <ControlPoint xPos="666" yPos="146" ctrlXPos="606" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            <Neq>
              <Variable name="UserGaze"/>
              <Variable name="D"/>
            </Neq>
          </IEdge>
          <IEdge target="S135" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="146" ctrlXPos="366" ctrlYPos="146"/>
                <ControlPoint xPos="266" yPos="146" ctrlXPos="326" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="UserGaze"/>
              <Variable name="D"/>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="426" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N195" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S132" name="Agent;Gaze;Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S137" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="466" ctrlXPos="566" ctrlYPos="466"/>
                <ControlPoint xPos="666" yPos="466" ctrlXPos="606" ctrlYPos="466"/>
              </Connection>
            </Graphics>
            <Neq>
              <Variable name="AgentGaze"/>
              <Variable name="D"/>
            </Neq>
          </IEdge>
          <IEdge target="S136" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="466" ctrlXPos="406" ctrlYPos="466"/>
                <ControlPoint xPos="266" yPos="466" ctrlXPos="286" ctrlYPos="466"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentGaze"/>
              <Variable name="D"/>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="426" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N196" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S133" name="Get Gaze;Event;Data" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S130" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="306" ctrlXPos="326" ctrlYPos="306"/>
                <ControlPoint xPos="426" yPos="306" ctrlXPos="366" ctrlYPos="306"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[val(data, D, ]]></String>
                <Variable name="E"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="186" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N197" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S134" name="New;Gaze;Target" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserGaze"/>
              <Expression>
                <Variable name="D"/>
              </Expression>
            </Assign>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[signal(user, shift, ]]></String>
                <Variable name="D"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <Graphics>
            <Position xPos="666" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N199" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S135" name="Same;Gaze;Target" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="186" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N200" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S136" name="Same;Gaze;Target" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="186" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N201" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S137" name="New;Gaze;Target" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentGaze"/>
              <Expression>
                <Variable name="D"/>
              </Expression>
            </Assign>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[signal(agent, shift, ]]></String>
                <Variable name="D"/>
              </Add>
              <String><![CDATA[).]]></String>
            </Add>
            </PrologQuery>
          </Commands>
          <Graphics>
            <Position xPos="666" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N202" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S138" name="Handle;Speech Act;Events" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S138" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="786" yPos="106" ctrlXPos="786" ctrlYPos="28"/>
            <ControlPoint xPos="826" yPos="106" ctrlXPos="906" ctrlYPos="28"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="746" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N203" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="26"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S139" name="Handle;Expression;Events" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S139" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="546" yPos="586" ctrlXPos="546" ctrlYPos="506"/>
            <ControlPoint xPos="586" yPos="586" ctrlXPos="666" ctrlYPos="506"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="506" yPos="586"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N204" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="26"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S141" name="Handle;State;Events" comment="" hideLocalVar="false" hideGlobalVar="false" start="S142;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="N">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="D">
            <String><![CDATA[]]></String>
          </Variable>
          <Variable type="String" name ="E">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
          <Play>
            <String><![CDATA[[wizard refresh]]]></String>
          </Play>
        </Commands>
        <EEdge target="S141" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="386" yPos="106" ctrlXPos="386" ctrlYPos="26"/>
            <ControlPoint xPos="426" yPos="106" ctrlXPos="506" ctrlYPos="26"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="346" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="240" yPos="53"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N206" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S142" name="Get Next;Oldest;State Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N208;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S143" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="106" yPos="306" ctrlXPos="126" ctrlYPos="306"/>
                <ControlPoint xPos="266" yPos="306" ctrlXPos="246" ctrlYPos="306"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[state(N, D, E).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="26" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N207" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N208" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N208" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S143" name="Check;Event;Name" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S144" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="306" yPos="266" ctrlXPos="306" ctrlYPos="236"/>
                <ControlPoint xPos="426" yPos="226" ctrlXPos="396" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="N"/>
              </Add>
              <String><![CDATA[, user).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <IEdge target="S145" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="317" yPos="346" ctrlXPos="325" ctrlYPos="375"/>
                <ControlPoint xPos="426" yPos="386" ctrlXPos="396" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="N"/>
              </Add>
              <String><![CDATA[, agent).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N209" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S144" name="User;State;Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S146" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="186" ctrlXPos="590" ctrlYPos="101"/>
                <ControlPoint xPos="666" yPos="66" ctrlXPos="581" ctrlYPos="66"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="D"/>
              </Add>
              <String><![CDATA[, enter).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <IEdge target="S149" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
                <ControlPoint xPos="666" yPos="226" ctrlXPos="606" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="D"/>
              </Add>
              <String><![CDATA[, leave).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="426" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N211" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S145" name="Agent;State;Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S148" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="426" ctrlXPos="590" ctrlYPos="510"/>
                <ControlPoint xPos="666" yPos="546" ctrlXPos="581" ctrlYPos="546"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="D"/>
              </Add>
              <String><![CDATA[, enter).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <IEdge target="S147" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="386" ctrlXPos="566" ctrlYPos="386"/>
                <ControlPoint xPos="666" yPos="386" ctrlXPos="606" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <Add>
              <Add>
                <String><![CDATA[eq(]]></String>
                <Variable name="D"/>
              </Add>
              <String><![CDATA[, leave).]]></String>
            </Add>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="426" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N214" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S146" name="User;Enters;Dialog" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserPresent"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
            <UserCommand name="print">
              <String><![CDATA[User enters dialog]]></String>
            </UserCommand>
          </Commands>
          <Graphics>
            <Position xPos="666" yPos="26"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N215" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S147" name="Agent;Leaves;Dialog" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentPresent"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
            <UserCommand name="print">
              <String><![CDATA[Agent leaves dialog]]></String>
            </UserCommand>
          </Commands>
          <Graphics>
            <Position xPos="666" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N217" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S148" name="Agent;Enters;Dialog" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentPresent"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
            <UserCommand name="print">
              <String><![CDATA[Agent enters dialog]]></String>
            </UserCommand>
          </Commands>
          <Graphics>
            <Position xPos="666" yPos="506"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N218" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S149" name="User;Leaves;Dialog" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserPresent"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
            <UserCommand name="print">
              <String><![CDATA[User leaves dialog]]></String>
            </UserCommand>
          </Commands>
          <Graphics>
            <Position xPos="666" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N219" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S14" name="Handle;Move Act;Events" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S14" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="786" yPos="266" ctrlXPos="786" ctrlYPos="186"/>
            <ControlPoint xPos="826" yPos="266" ctrlXPos="906" ctrlYPos="186"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="746" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N17" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="0" yPos="0"/>
          </Graphics>
        </Node>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S46" name="Planning;Mind;Beliefs;" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="42746" yPos="42826"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N87" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="266" yPos="106"/>
        </Graphics>
      </Node>
    </SuperNode>
    <SuperNode id="S192" name="Planned;Dialog;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="S37;S9;S36;">
      <Define>
      </Define>
      <Declare>
        <Variable type="String" name ="Scene">
          <String><![CDATA[]]></String>
        </Variable>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="906" yPos="186"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="705" yPos="172"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Comment>
        <Graphics>
          <Boundary xPos="1139" yPos="567" width="226" height="79"/>
        </Graphics>
        <Text style="color:blue">
          The event with the scene comes from the dialog manager module which is informed about the dialog with the appropriate signals and state variables.
        </Text>
      </Comment>
      <Comment>
        <Graphics>
          <Boundary xPos="852" yPos="537" width="265" height="160"/>
        </Graphics>
        <Text style="color:blue">
          The agent should abort its behavior and interrupupt itself in this case, so that we should send a signal here which causes the TTS abort in the dialog process. The role switch caused by the conquer signal causes the change of the role variable whose change causes the context switch in the dialog process. This context switch can only occur after the agent has interrupted itself.
        </Text>
      </Comment>
      <Comment>
        <Graphics>
          <Boundary xPos="870" yPos="154" width="228" height="105"/>
        </Graphics>
        <Text style="color:blue">
          If we get the next intended speaker together with the contribution, then we can decide to display an assign or a yield behavior and we can decide to signal an offer or a release signal in a multi-party interaction.
        </Text>
      </Comment>
      <Node id="N267" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="346" yPos="26"/>
        </Graphics>
      </Node>
      <SuperNode id="S193" name="Awaiting;Own Planned;Contribution" comment="" hideLocalVar="false" hideGlobalVar="false" start="N269;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S194" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="306" ctrlXPos="526" ctrlYPos="306"/>
              <ControlPoint xPos="666" yPos="306" ctrlXPos="566" ctrlYPos="306"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[scene(Scene).]]></String>
          </PrologQuery>
        </IEdge>
        <Graphics>
          <Position xPos="346" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="476" yPos="126" width="150" height="63"/>
          </Graphics>
          <Text style="color:blue">
            Here we consume the disambiguated sialog acts of the user.
          </Text>
        </Comment>
        <Node id="N268" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N269" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N269" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
              <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="106"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S194" name="Request;Execution;Start" comment="" hideLocalVar="false" hideGlobalVar="false" start="N272;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <PrologQuery>
          <String><![CDATA[signal(agent, turn, request).]]></String>
          </PrologQuery>
          <Play>
            <Add>
              <Add>
                <String><![CDATA[[wizard output text=start_]]></String>
                <Variable name="Scene"/>
              </Add>
              <String><![CDATA[]]]></String>
            </Add>
          </Play>
        </Commands>
        <IEdge target="S195" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="746" yPos="306" ctrlXPos="846" ctrlYPos="306"/>
              <ControlPoint xPos="666" yPos="466" ctrlXPos="566" ctrlYPos="466"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[remove(agent, turn, permit).]]></String>
          </PrologQuery>
        </IEdge>
        <IEdge target="S15" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="666" yPos="266" ctrlXPos="612" ctrlYPos="212"/>
              <ControlPoint xPos="586" yPos="186" ctrlXPos="639" ctrlYPos="239"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[remove(agent, turn, forbid).]]></String>
          </PrologQuery>
        </IEdge>
        <Graphics>
          <Position xPos="666" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N270" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N272" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N272" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
              <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="106"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S195" name="Await;Contribution;Execution" comment="" hideLocalVar="false" hideGlobalVar="false" start="S158;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <Play>
            <String><![CDATA[[wizard output text=agent_permits_turn]]]></String>
          </Play>
        </Commands>
        <IEdge target="S3" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="717" yPos="506" ctrlXPos="774" ctrlYPos="714"/>
              <ControlPoint xPos="426" yPos="535" ctrlXPos="634" ctrlYPos="477"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[remove(agent, dialog, regular).]]></String>
          </PrologQuery>
        </IEdge>
        <IEdge target="S9" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="666" yPos="506" ctrlXPos="320" ctrlYPos="636"/>
              <ControlPoint xPos="266" yPos="455" ctrlXPos="574" ctrlYPos="370"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[remove(agent, dialog, interrupt).]]></String>
          </PrologQuery>
        </IEdge>
        <Graphics>
          <Position xPos="666" yPos="426"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="265" yPos="277" width="132" height="52"/>
          </Graphics>
          <Text style="color:blue">
            Alternative for abort would be resume.
          </Text>
        </Comment>
        <Node id="N271" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="186" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S95" name="Signal;Agent Turn;Abort" comment="" hideLocalVar="false" hideGlobalVar="false" start="N16;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(agent, turn, abort).]]></String>
            </PrologQuery>
            <Play>
              <String><![CDATA[[wizard output text=agent_aborts_turn]]]></String>
            </Play>
            <PrologQuery>
            <String><![CDATA[signal(agent, dialog, interrupt).]]></String>
            </PrologQuery>
          </Commands>
          <Graphics>
            <Position xPos="906" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N347" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N16" name="N16" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N16" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S158" name="Display;Planning;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentInterruptible"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <EEdge target="S163" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="266" yPos="146" ctrlXPos="406" ctrlYPos="146"/>
              <ControlPoint xPos="426" yPos="146" ctrlXPos="366" ctrlYPos="146"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="186" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N351" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S159" name="Handle;Interruption" comment="" hideLocalVar="false" hideGlobalVar="false" start="N353;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentInterruptible"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <EEdge target="S45" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="306" ctrlXPos="566" ctrlYPos="306"/>
              <ControlPoint xPos="666" yPos="306" ctrlXPos="606" ctrlYPos="306"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="426" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N352" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N353" name="Start" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentSpeaking"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
              <Play>
                <String><![CDATA[[wizard refresh]]]></String>
              </Play>
            </Commands>
            <EEdge target="N355" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="146" ctrlXPos="486" ctrlYPos="146"/>
                <ControlPoint xPos="586" yPos="146" ctrlXPos="526" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N354" name="End" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentSpeaking"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Play>
                <String><![CDATA[[wizard refresh]]]></String>
              </Play>
            </Commands>
            <Graphics>
              <Position xPos="826" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N355" name="Play" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Play>
                <String><![CDATA[[wizard output text='interruption']]]></String>
              </Play>
            </Commands>
            <TEdge target="N354" start="" timeout="10000">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="146" ctrlXPos="726" ctrlYPos="146"/>
                <ControlPoint xPos="826" yPos="146" ctrlXPos="766" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            </TEdge>
            <Graphics>
              <Position xPos="586" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S160" name="Signal;Agent Turn;Stop" comment="" hideLocalVar="false" hideGlobalVar="false" start="N14;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard output text=agent_finishes_turn]]]></String>
            </Play>
            <PrologQuery>
            <String><![CDATA[signal(agent, turn, finish).]]></String>
            </PrologQuery>
            <PrologQuery>
            <String><![CDATA[signal(agent, dialog, regular).]]></String>
            </PrologQuery>
          </Commands>
          <Graphics>
            <Position xPos="906" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N356" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N14" name="N14" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N14" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S162" name="Display;Turn-Yield;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentInterruptible"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <EEdge target="S160" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="746" yPos="146" ctrlXPos="766" ctrlYPos="146"/>
              <ControlPoint xPos="906" yPos="146" ctrlXPos="886" ctrlYPos="146"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="666" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N358" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S163" name="Execute;Contribution;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="N362;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="S162" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="146" ctrlXPos="566" ctrlYPos="146"/>
              <ControlPoint xPos="666" yPos="146" ctrlXPos="606" ctrlYPos="146"/>
            </Connection>
          </Graphics>
          </EEdge>
          <IEdge target="S159" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="466" yPos="186" ctrlXPos="466" ctrlYPos="206"/>
                <ControlPoint xPos="466" yPos="266" ctrlXPos="466" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[remove(agent, dialog, cancel).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="426" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N359" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N360" name="Play" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Play>
                <Add>
                  <Add>
                    <String><![CDATA[[wizard output text=playing_]]></String>
                    <Variable name="Scene"/>
                  </Add>
                  <String><![CDATA[]]]></String>
                </Add>
              </Play>
            </Commands>
            <TEdge target="N361" start="" timeout="5000">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="146" ctrlXPos="686" ctrlYPos="146"/>
                <ControlPoint xPos="826" yPos="146" ctrlXPos="806" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            </TEdge>
            <Graphics>
              <Position xPos="586" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N361" name="End" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentSpeaking"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <Play>
                <String><![CDATA[[wizard refresh]]]></String>
              </Play>
            </Commands>
            <Graphics>
              <Position xPos="826" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N362" name="Start" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentSpeaking"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
              <Play>
                <String><![CDATA[[wizard refresh]]]></String>
              </Play>
            </Commands>
            <EEdge target="N360" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="146" ctrlXPos="486" ctrlYPos="146"/>
                <ControlPoint xPos="586" yPos="146" ctrlXPos="526" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S45" name="Display;Turn-Abort;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="S95" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="746" yPos="306" ctrlXPos="766" ctrlYPos="306"/>
              <ControlPoint xPos="906" yPos="306" ctrlXPos="886" ctrlYPos="306"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="666" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N49" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S15" name="Rejected;Execution;Start" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <Play>
            <String><![CDATA[[wizard output text=agent_forbids_turn]]]></String>
          </Play>
        </Commands>
        <EEdge target="S193" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="506" yPos="186" ctrlXPos="452" ctrlYPos="239"/>
            <ControlPoint xPos="426" yPos="266" ctrlXPos="479" ctrlYPos="212"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="506" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N33" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="0" yPos="0"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S36" name="Await;Interrupt;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N54;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S48" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="706" ctrlXPos="526" ctrlYPos="706"/>
              <ControlPoint xPos="666" yPos="706" ctrlXPos="566" ctrlYPos="706"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[remove(user, turn, interrupt).]]></String>
          </PrologQuery>
        </IEdge>
        <Graphics>
          <Position xPos="346" yPos="666"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N36" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N54" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N54" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
              <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="106"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S37" name="Await;Interject;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N60;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S49" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="866" ctrlXPos="526" ctrlYPos="866"/>
              <ControlPoint xPos="666" yPos="866" ctrlXPos="566" ctrlYPos="866"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[remove(user, turn, interject).]]></String>
          </PrologQuery>
        </IEdge>
        <Graphics>
          <Position xPos="346" yPos="826"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N47" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N60" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N60" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
              <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="106"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S48" name="Handle;Interrupt;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <Play>
            <String><![CDATA[[wizard output text=handle_interrupt]]]></String>
          </Play>
          <PrologQuery>
          <String><![CDATA[signal(agent, dialog, cancel).]]></String>
          </PrologQuery>
        </Commands>
        <EEdge target="S36" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="666" yPos="717" ctrlXPos="566" ctrlYPos="744"/>
            <ControlPoint xPos="426" yPos="717" ctrlXPos="526" ctrlYPos="744"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="666" yPos="666"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N61" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="26"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S49" name="Handle;Interject;Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <Play>
            <String><![CDATA[[wizard output text=handle_interject]]]></String>
          </Play>
        </Commands>
        <EEdge target="S37" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="666" yPos="877" ctrlXPos="566" ctrlYPos="904"/>
            <ControlPoint xPos="426" yPos="877" ctrlXPos="526" ctrlYPos="904"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="666" yPos="826"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N62" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="0" yPos="0"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S3" name="Await;Regular;Dialog Act" comment="" hideLocalVar="false" hideGlobalVar="false" start="S23;">
        <Define>
        </Define>
        <Declare>
          <Variable type="String" name ="Event">
            <String><![CDATA[]]></String>
          </Variable>
        </Declare>
        <Commands>
        </Commands>
        <EEdge target="S193" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="363" yPos="506" ctrlXPos="346" ctrlYPos="476"/>
            <ControlPoint xPos="409" yPos="346" ctrlXPos="425" ctrlYPos="375"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="346" yPos="506"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="509" yPos="397"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N10" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="106"/>
          </Graphics>
        </Node>
        <Node id="N22" name="React" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="586" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S23" name="Await;Fused;Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N23;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="N22" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[speech(Event).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N21" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N23" name="N23" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N23" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S9" name="Await;Interrupt;Dialog Act" comment="" hideLocalVar="false" hideGlobalVar="false" start="S5;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S193" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="186" yPos="426" ctrlXPos="75" ctrlYPos="328"/>
              <ControlPoint xPos="346" yPos="295" ctrlXPos="178" ctrlYPos="264"/>
            </Connection>
          </Graphics>
          <Eq>
            <Variable name="AgentRole"/>
            <String><![CDATA[bystander]]></String>
          </Eq>
        </IEdge>
        <IEdge target="S193" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="237" yPos="426" ctrlXPos="245" ctrlYPos="396"/>
              <ControlPoint xPos="346" yPos="346" ctrlXPos="316" ctrlYPos="375"/>
            </Connection>
          </Graphics>
          <Eq>
            <Variable name="UserAction"/>
            <String><![CDATA[offering]]></String>
          </Eq>
        </IEdge>
        <Graphics>
          <Position xPos="186" yPos="426"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N11" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="266" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S5" name="Ignore;Scenes" comment="" hideLocalVar="false" hideGlobalVar="false" start="N3;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S5" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="306" yPos="186" ctrlXPos="306" ctrlYPos="106"/>
                <ControlPoint xPos="346" yPos="186" ctrlXPos="426" ctrlYPos="106"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[scene(Scene).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N2" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N3" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N3" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="316" yPos="107" ctrlXPos="336" ctrlYPos="29"/>
                <ControlPoint xPos="341" yPos="126" ctrlXPos="411" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="266" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S4" name="Automatic;Dialog;Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="S197;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="906" yPos="106"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N42" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="346" yPos="26"/>
        </Graphics>
      </Node>
      <SuperNode id="S54" name="Participant" comment="" hideLocalVar="false" hideGlobalVar="false" start="S191;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S197" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="266" ctrlXPos="486" ctrlYPos="286"/>
              <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="286"/>
            </Connection>
          </Graphics>
          <Or>
            <Eq>
              <Variable name="UserRole"/>
              <String><![CDATA[absent]]></String>
            </Eq>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[absent]]></String>
            </Eq>
          </Or>
        </IEdge>
        <Graphics>
          <Position xPos="506" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="409" yPos="355" width="288" height="97"/>
          </Graphics>
          <Text style="color:blue">
            We understand the role bystander in a dyadic interaction as the phases in which the participants are interacting with each other but no one currently wants to take on the speaker or addressee role which means that these roles are not negotiated.
          </Text>
        </Comment>
        <Node id="N66" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <SuperNode id="S55" name="Speaker" comment="" hideLocalVar="false" hideGlobalVar="false" start="N43;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S191" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="446" ctrlYPos="166"/>
                <ControlPoint xPos="506" yPos="186" ctrlXPos="486" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[bystander]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S196" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="409" yPos="186" ctrlXPos="466" ctrlYPos="86"/>
                <ControlPoint xPos="683" yPos="186" ctrlXPos="625" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[addressee]]></String>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="519" yPos="141"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N74" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N43" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N43" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S191" name="Bystander" comment="" hideLocalVar="false" hideGlobalVar="false" start="N128;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S55" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="266" ctrlXPos="486" ctrlYPos="286"/>
                <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[speaker]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S196" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="186" ctrlXPos="606" ctrlYPos="166"/>
                <ControlPoint xPos="666" yPos="186" ctrlXPos="646" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[addressee]]></String>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="506" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="514" yPos="130"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N127" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N128" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N128" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S196" name="Addressee" comment="" hideLocalVar="false" hideGlobalVar="false" start="N130;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S191" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="266" ctrlXPos="646" ctrlYPos="286"/>
                <ControlPoint xPos="586" yPos="266" ctrlXPos="606" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[bystander]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S55" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="683" yPos="266" ctrlXPos="625" ctrlYPos="366"/>
                <ControlPoint xPos="409" yPos="266" ctrlXPos="466" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[speaker]]></String>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N129" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="346" yPos="26"/>
            </Graphics>
          </Node>
          <Node id="N130" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N130" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
                <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="106"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S197" name="Overhearer" comment="" hideLocalVar="false" hideGlobalVar="false" start="N132;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S54" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="426" yPos="186" ctrlXPos="446" ctrlYPos="166"/>
              <ControlPoint xPos="506" yPos="186" ctrlXPos="486" ctrlYPos="166"/>
            </Connection>
          </Graphics>
          <And>
            <Neq>
              <Variable name="UserRole"/>
              <String><![CDATA[absent]]></String>
            </Neq>
            <Neq>
              <Variable name="AgentRole"/>
              <String><![CDATA[absent]]></String>
            </Neq>
          </And>
        </IEdge>
        <Graphics>
          <Position xPos="346" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N131" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="346" yPos="26"/>
          </Graphics>
        </Node>
        <Node id="N132" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N132" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="396" yPos="107" ctrlXPos="416" ctrlYPos="29"/>
              <ControlPoint xPos="421" yPos="126" ctrlXPos="491" ctrlYPos="86"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="106"/>
          </Graphics>
        </Node>
      </SuperNode>
    </SuperNode>
  </SuperNode>
  <SuperNode id="S57" name="Initialize;Agent;Engine" comment="" hideLocalVar="false" hideGlobalVar="false" start="N213;">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
    </Commands>
    <EEdge target="S56" start ="">
    <Graphics>
      <Connection>
        <ControlPoint xPos="506" yPos="146" ctrlXPos="526" ctrlYPos="146"/>
        <ControlPoint xPos="586" yPos="146" ctrlXPos="566" ctrlYPos="146"/>
      </Connection>
    </Graphics>
    </EEdge>
    <Graphics>
      <Position xPos="426" yPos="106"/>
    </Graphics>
    <LocalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </LocalVariableBadge>
    <GlobalVariableBadge>
      <Position xPos="2" yPos="1"/>
    </GlobalVariableBadge>
    <Node id="N210" name="History" history="true">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="346" yPos="26"/>
      </Graphics>
    </Node>
    <Node id="N212" name="Set User;And Agent;Position" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
        <Play>
          <String><![CDATA[[tom WorldPosition x=1.5 y=3.75 z=10.9]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[player WorldPosition x=2.5 y=3.75 z=6.5]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[tom SitDown chairname=meeting_seat_left]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[player SitDown chairname=meeting_seat_right]]]></String>
        </Play>
      </Commands>
      <TEdge target="N216" start="" timeout="2500">
      <Graphics>
        <Connection>
          <ControlPoint xPos="586" yPos="146" ctrlXPos="686" ctrlYPos="146"/>
          <ControlPoint xPos="826" yPos="146" ctrlXPos="726" ctrlYPos="146"/>
        </Connection>
      </Graphics>
      </TEdge>
      <Graphics>
        <Position xPos="506" yPos="106"/>
      </Graphics>
    </Node>
    <Node id="N213" name="Await;TWorld;Startup" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <TEdge target="N212" start="" timeout="2500">
      <Graphics>
        <Connection>
          <ControlPoint xPos="426" yPos="146" ctrlXPos="446" ctrlYPos="146"/>
          <ControlPoint xPos="506" yPos="146" ctrlXPos="486" ctrlYPos="146"/>
        </Connection>
      </Graphics>
      </TEdge>
      <Graphics>
        <Position xPos="346" yPos="106"/>
      </Graphics>
    </Node>
    <Node id="N216" name="Set;Camera; And View" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
        <Play>
          <String><![CDATA[[player Scale value=0.9]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[player Camera x=0.0 y=0.0]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[player CameraOffset x=0 y=-0.1 z=0.0]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[player FocalLength value=28.0 time=0.05]]]></String>
        </Play>
      </Commands>
      <Graphics>
        <Position xPos="826" yPos="106"/>
      </Graphics>
    </Node>
  </SuperNode>
  <SuperNode id="S39" name="Testing" comment="" hideLocalVar="false" hideGlobalVar="false" start="N77;">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
    </Commands>
    <Graphics>
      <Position xPos="266" yPos="26"/>
    </Graphics>
    <LocalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </LocalVariableBadge>
    <GlobalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </GlobalVariableBadge>
    <Node id="N76" name="History" history="true">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="26" yPos="186"/>
      </Graphics>
    </Node>
    <Node id="N77" name="Timeout" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <CEdge target="N78" start="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="266" yPos="226" ctrlXPos="326" ctrlYPos="226"/>
            <ControlPoint xPos="426" yPos="226" ctrlXPos="366" ctrlYPos="226"/>
          </Connection>
        </Graphics>
        <PrologQuery>
        <String><![CDATA[timeout(name, 3000).]]></String>
        </PrologQuery>
      </CEdge>
      <EEdge target="N77" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
          <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="186" yPos="186"/>
      </Graphics>
    </Node>
    <Node id="N78" name="Repeat" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <EEdge target="N77" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="427" yPos="236" ctrlXPos="368" ctrlYPos="251"/>
          <ControlPoint xPos="265" yPos="236" ctrlXPos="323" ctrlYPos="251"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="426" yPos="186"/>
      </Graphics>
    </Node>
  </SuperNode>
  <SuperNode id="S18" name="Cleanup;Knowledge; Base" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
      <PrologQuery>
      <String><![CDATA[clean.]]></String>
      </PrologQuery>
      <Play>
        <String><![CDATA[[wizard output text=cleanup]]]></String>
      </Play>
    </Commands>
    <EEdge target="S56" start ="">
    <Graphics>
      <Connection>
        <ControlPoint xPos="346" yPos="146" ctrlXPos="446" ctrlYPos="146"/>
        <ControlPoint xPos="586" yPos="169" ctrlXPos="486" ctrlYPos="184"/>
      </Connection>
    </Graphics>
    </EEdge>
    <Graphics>
      <Position xPos="266" yPos="106"/>
    </Graphics>
    <LocalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </LocalVariableBadge>
    <GlobalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </GlobalVariableBadge>
    <Node id="N41" name="History" history="true">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="346" yPos="26"/>
      </Graphics>
    </Node>
  </SuperNode>
  <UserCommands>
    <UserCommand name="print" classname ="java.lang.System.err" method="println">
      <Argument name="text" type="java.lang.String"/>
    </UserCommand>
  </UserCommands>
  <ClassPath>
  </ClassPath>
  <InitContext></InitContext>
</SceneFlow>