<?xml version="1.0" encoding="UTF-8"?>
<SceneFlow id="" name="AAMAS" comment="" hideLocalVar="false" hideGlobalVar="false" modifDate="Di, 25 Okt 2016 18:50:58" start="S18;" context="" package="" xmlns="xml.sceneflow.dfki.de" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="xml.sceneflow.dfki.de res/xsd/sceneflow.xsd">
  <Define>
  </Define>
  <Declare>
    <Variable type="String" name ="CurrentSystemTime">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserSaidKeyword">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserRole">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="AgentRole">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="UserAction">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="String" name ="AgentAction">
      <String><![CDATA[]]></String>
    </Variable>
    <Variable type="Bool" name ="UserAttendant">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentAttendant">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserSpeaking">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentSpeaking">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserOverlapsAgent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentOverlapsUser">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserBargesInAgent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="UserBearsUpAgent">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentIsInterrupted">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentIsDisregarded">
      <Bool value="false"/>
    </Variable>
    <Variable type="Bool" name ="AgentInterruptible">
      <Bool value="true"/>
    </Variable>
  </Declare>
  <Commands>
  </Commands>
  <LocalVariableBadge>
    <Position xPos="4" yPos="-37"/>
  </LocalVariableBadge>
  <GlobalVariableBadge>
    <Position xPos="10" yPos="10"/>
  </GlobalVariableBadge>
  <SuperNode id="S56" name="Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="S20;S21;S26;S16;S2;">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
      <Play>
        <String><![CDATA[[wizard refresh]]]></String>
      </Play>
      <Play>
        <String><![CDATA[[wizard output text=interaction]]]></String>
      </Play>
    </Commands>
    <Graphics>
      <Position xPos="346" yPos="186"/>
    </Graphics>
    <LocalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </LocalVariableBadge>
    <GlobalVariableBadge>
      <Position xPos="1" yPos="1"/>
    </GlobalVariableBadge>
    <Node id="N99" name="History" history="true">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="26" yPos="186"/>
      </Graphics>
    </Node>
    <SuperNode id="S2" name="Interpretation" comment="" hideLocalVar="false" hideGlobalVar="false" start="S87;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="346" yPos="346"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N198" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="26" yPos="186"/>
        </Graphics>
      </Node>
      <SuperNode id="S4" name="Handle Conflicts" comment="" hideLocalVar="false" hideGlobalVar="false" start="S15;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="346" yPos="106"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N10" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="186" yPos="106"/>
          </Graphics>
        </Node>
        <SuperNode id="S15" name="Uninterruptible" comment="" hideLocalVar="false" hideGlobalVar="false" start="S19;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S25" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="186" ctrlXPos="286" ctrlYPos="166"/>
                <ControlPoint xPos="346" yPos="186" ctrlXPos="326" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            <Variable name="AgentInterruptible"/>
          </IEdge>
          <Graphics>
            <Position xPos="186" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N11" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="106"/>
            </Graphics>
          </Node>
          <SuperNode id="S19" name="No Conflict" comment="" hideLocalVar="false" hideGlobalVar="false" start="N27;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S24" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="346" yPos="186" ctrlXPos="326" ctrlYPos="166"/>
                  <ControlPoint xPos="266" yPos="186" ctrlXPos="286" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              <Variable name="UserBearsUpAgent"/>
            </IEdge>
            <IEdge target="S23" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="186" ctrlXPos="446" ctrlYPos="166"/>
                  <ControlPoint xPos="506" yPos="186" ctrlXPos="486" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              <Variable name="UserBargesInAgent"/>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N17" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N27" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <TEdge target="N27" start="" timeout="1000">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                  <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </TEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S23" name="Ignore" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S19" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="266" ctrlXPos="486" ctrlYPos="286"/>
                <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N28" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S24" name="Ignore" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S19" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="266" ctrlXPos="286" ctrlYPos="286"/>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="326" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N47" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S25" name="Interruptible" comment="" hideLocalVar="false" hideGlobalVar="false" start="S11;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S15" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="326" ctrlYPos="286"/>
                <ControlPoint xPos="266" yPos="266" ctrlXPos="286" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            <Not>
              <Variable name="AgentInterruptible"/>
            </Not>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N49" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="106"/>
            </Graphics>
          </Node>
          <SuperNode id="S8" name="Handle" comment="" hideLocalVar="false" hideGlobalVar="false" start="N23;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S11" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="266" ctrlXPos="486" ctrlYPos="286"/>
                <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Comment>
              <Graphics>
                <Boundary xPos="272" yPos="127" width="187" height="64"/>
              </Graphics>
              <Text style="color:blue">
                Issue: Basically the stop signal should not make problems if the user is not speaking or id it comes late.
              </Text>
            </Comment>
            <Comment>
              <Graphics>
                <Boundary xPos="514" yPos="120" width="245" height="65"/>
              </Graphics>
              <Text style="color:blue">
                Issue: Basically there should be no need to wait because the notification for the stop signal should come after the agent stopped speaking.
              </Text>
            </Comment>
            <Comment>
              <Graphics>
                <Boundary xPos="361" yPos="304" width="193" height="73"/>
              </Graphics>
              <Text style="color:blue">
                Question: Does the stop command return with a notification, no matter if TTS was aborted or not, and, does the notification come after the abortion? Maybe test this with Reeti to check if the TWorls has an error?
              </Text>
            </Comment>
            <Node id="N2" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N15" name="Interrupt" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="AgentIsInterrupted"/>
                  <Expression>
                    <Bool value="true"/>
                  </Expression>
                </Assign>
                <Assign>
                  <Variable name="AgentIsInterrupted"/>
                  <Expression>
                    <Bool value="false"/>
                  </Expression>
                </Assign>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N16" name="Abort Speech" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[tom StopSpeaking]]]></String>
                </Play>
              </Commands>
              <EEdge target="N22" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="506" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                  <ControlPoint xPos="586" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="426" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N22" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <TEdge target="N15" start="" timeout="50">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="226" ctrlXPos="686" ctrlYPos="226"/>
                  <ControlPoint xPos="746" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              </TEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N23" name="Check" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <CEdge target="N16" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="266" yPos="226" ctrlXPos="326" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="366" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="UserSpeaking"/>
                  <Bool value="true"/>
                </Eq>
              </CEdge>
              <EEdge target="N15" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="261" yPos="246" ctrlXPos="408" ctrlYPos="408"/>
                  <ControlPoint xPos="758" yPos="254" ctrlXPos="604" ctrlYPos="408"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S11" name="No Conflict" comment="" hideLocalVar="false" hideGlobalVar="false" start="N5;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S12" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="346" yPos="186" ctrlXPos="326" ctrlYPos="166"/>
                  <ControlPoint xPos="266" yPos="186" ctrlXPos="286" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              <Variable name="UserBearsUpAgent"/>
            </IEdge>
            <IEdge target="S8" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="186" ctrlXPos="446" ctrlYPos="166"/>
                  <ControlPoint xPos="506" yPos="186" ctrlXPos="486" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              <Variable name="UserBargesInAgent"/>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N4" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N5" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <TEdge target="N5" start="" timeout="1000">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                  <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              </TEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S12" name="Handle" comment="" hideLocalVar="false" hideGlobalVar="false" start="N18;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S11" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="266" ctrlXPos="286" ctrlYPos="286"/>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="326" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Comment>
              <Graphics>
                <Boundary xPos="275" yPos="133" width="186" height="50"/>
              </Graphics>
              <Text style="color:blue">
                Issue: Basically the stop signal should not make problems if the user is not speaking or id it comes late.
              </Text>
            </Comment>
            <Comment>
              <Graphics>
                <Boundary xPos="497" yPos="130" width="242" height="57"/>
              </Graphics>
              <Text style="color:blue">
                Issue: Basically there should be no need to wait because the notification for the stop signal should come after the agent stopped speaking.
              </Text>
            </Comment>
            <Node id="N7" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N8" name="Abort Speech" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Play>
                  <String><![CDATA[[tom StopSpeaking]]]></String>
                </Play>
              </Commands>
              <EEdge target="N21" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="506" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                  <ControlPoint xPos="586" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="426" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N14" name="Disregard" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="AgentIsDisregarded"/>
                  <Expression>
                    <Bool value="true"/>
                  </Expression>
                </Assign>
                <Assign>
                  <Variable name="AgentIsDisregarded"/>
                  <Expression>
                    <Bool value="false"/>
                  </Expression>
                </Assign>
              </Commands>
              <Graphics>
                <Position xPos="746" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N21" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <TEdge target="N14" start="" timeout="50">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="666" yPos="226" ctrlXPos="686" ctrlYPos="226"/>
                  <ControlPoint xPos="746" yPos="226" ctrlXPos="726" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              </TEdge>
              <Graphics>
                <Position xPos="586" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N18" name="Check" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <CEdge target="N8" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="266" yPos="226" ctrlXPos="326" ctrlYPos="226"/>
                    <ControlPoint xPos="426" yPos="226" ctrlXPos="366" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Eq>
                  <Variable name="UserSpeaking"/>
                  <Bool value="true"/>
                </Eq>
              </CEdge>
              <EEdge target="N14" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="254" yPos="254" ctrlXPos="408" ctrlYPos="408"/>
                  <ControlPoint xPos="758" yPos="254" ctrlXPos="604" ctrlYPos="408"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S1" name="Conversation" comment="" hideLocalVar="false" hideGlobalVar="false" start="S3;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="346" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N6" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="186" yPos="106"/>
          </Graphics>
        </Node>
        <SuperNode id="S3" name="Dialog Phase" comment="" hideLocalVar="false" hideGlobalVar="false" start="N30;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentInterruptible"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S13" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="186" ctrlXPos="446" ctrlYPos="166"/>
                <ControlPoint xPos="506" yPos="186" ctrlXPos="486" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            <Variable name="AgentIsInterrupted"/>
          </IEdge>
          <IEdge target="S14" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="186" ctrlXPos="326" ctrlYPos="166"/>
                <ControlPoint xPos="266" yPos="186" ctrlXPos="286" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            <Variable name="AgentIsDisregarded"/>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Comment>
            <Graphics>
              <Boundary xPos="275" yPos="114" width="297" height="149"/>
            </Graphics>
            <Text style="color:blue">
              We could decide to barge into the turn of the user here for example because the user speaks to long or we have planned another important contribution in the meanwhile.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        In this case the agent would overlap the user's speech which could consequently cause the self interrupt of the agent as consequence of a bear up conflict.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        To avoid this self interrupt in this case, we could set the agent uninterruptible for the time of this particular contribution. Otherwise, we would react to the bear up conflict and then return to the dialog at an adequate point.
            </Text>
          </Comment>
          <Node id="N9" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N12" name="Confirmation" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PlaySceneGroup>
                <String><![CDATA[Confirmation]]></String>
              </PlaySceneGroup>
            </Commands>
            <EEdge target="N3" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="306" ctrlXPos="606" ctrlYPos="306"/>
                <ControlPoint xPos="666" yPos="306" ctrlXPos="646" ctrlYPos="306"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="506" yPos="266"/>
            </Graphics>
          </Node>
          <Node id="N30" name="Vorstellung" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PlaySceneGroup>
                <String><![CDATA[Vorstellung]]></String>
              </PlaySceneGroup>
            </Commands>
            <EEdge target="S5" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="306" ctrlXPos="286" ctrlYPos="306"/>
                <ControlPoint xPos="346" yPos="306" ctrlXPos="326" ctrlYPos="306"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="186" yPos="266"/>
            </Graphics>
          </Node>
          <Node id="N3" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <TEdge target="N30" start="" timeout="1000">
            <Graphics>
              <Connection>
                <ControlPoint xPos="706" yPos="346" ctrlXPos="706" ctrlYPos="526"/>
                <ControlPoint xPos="226" yPos="346" ctrlXPos="226" ctrlYPos="526"/>
              </Connection>
            </Graphics>
            </TEdge>
            <Graphics>
              <Position xPos="666" yPos="266"/>
            </Graphics>
          </Node>
          <SuperNode id="S5" name="Await Answer" comment="" hideLocalVar="false" hideGlobalVar="false" start="S6;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N12" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="306" ctrlXPos="446" ctrlYPos="306"/>
                <ControlPoint xPos="506" yPos="306" ctrlXPos="486" ctrlYPos="306"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Comment>
              <Graphics>
                <Boundary xPos="283" yPos="275" width="192" height="61"/>
              </Graphics>
              <Text style="color:blue">
                When the user starts speaking, we can also start the keyword recognition or language understanding in parallel.
              </Text>
            </Comment>
            <Comment>
              <Graphics>
                <Boundary xPos="486" yPos="272" width="228" height="71"/>
              </Graphics>
              <Text style="color:blue">
                Instead of waiting only for the stop of the user's voice activity, we can also expect a turn yield signal which includes a gaze cue in temporal alignment with the speech end.
              </Text>
            </Comment>
            <Comment>
              <Graphics>
                <Boundary xPos="441" yPos="72" width="188" height="108"/>
              </Graphics>
              <Text style="color:blue">
                We could wait for some moments after the user stops speaking because he might have only a pause and continue his utterance. In this case we do not want to continue with the agent's next contribution.
              </Text>
            </Comment>
            <Node id="N31" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="106"/>
              </Graphics>
            </Node>
            <Node id="N32" name="End" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="186" yPos="426"/>
              </Graphics>
            </Node>
            <SuperNode id="S6" name="Await" comment="" hideLocalVar="false" hideGlobalVar="false" start="N34;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S9" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="266" yPos="226" ctrlXPos="366" ctrlYPos="226"/>
                    <ControlPoint xPos="506" yPos="226" ctrlXPos="406" ctrlYPos="226"/>
                  </Connection>
                </Graphics>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </IEdge>
              <Graphics>
                <Position xPos="186" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N33" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="186" yPos="106"/>
                </Graphics>
              </Node>
              <Node id="N34" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N34" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                    <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="186" yPos="186"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S7" name="Await Stop" comment="" hideLocalVar="false" hideGlobalVar="false" start="N36;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="N32" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="506" yPos="466" ctrlXPos="406" ctrlYPos="466"/>
                    <ControlPoint xPos="266" yPos="466" ctrlXPos="366" ctrlYPos="466"/>
                  </Connection>
                </Graphics>
                <Not>
                  <Variable name="UserSpeaking"/>
                </Not>
              </IEdge>
              <Graphics>
                <Position xPos="506" yPos="426"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N35" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="186" yPos="106"/>
                </Graphics>
              </Node>
              <Node id="N36" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N36" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                    <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="186" yPos="186"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S9" name="User Stopped" comment="" hideLocalVar="false" hideGlobalVar="false" start="N38;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S7" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="546" yPos="266" ctrlXPos="546" ctrlYPos="326"/>
                    <ControlPoint xPos="546" yPos="426" ctrlXPos="546" ctrlYPos="366"/>
                  </Connection>
                </Graphics>
                <Variable name="UserSpeaking"/>
              </IEdge>
              <Graphics>
                <Position xPos="506" yPos="186"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N37" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="186" yPos="106"/>
                </Graphics>
              </Node>
              <Node id="N38" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N38" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                    <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="186" yPos="186"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S13" name="Interrupt" comment="" hideLocalVar="false" hideGlobalVar="false" start="N40;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentInterruptible"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <EEdge target="S3" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="506" yPos="266" ctrlXPos="486" ctrlYPos="286"/>
              <ControlPoint xPos="426" yPos="266" ctrlXPos="446" ctrlYPos="286"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="506" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N39" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N40" name="Reaction" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PlaySceneGroup>
                <String><![CDATA[Interrupted]]></String>
              </PlaySceneGroup>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S14" name="Disregard" comment="" hideLocalVar="false" hideGlobalVar="false" start="N20;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentInterruptible"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <EEdge target="S3" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="266" yPos="266" ctrlXPos="286" ctrlYPos="286"/>
              <ControlPoint xPos="346" yPos="266" ctrlXPos="326" ctrlYPos="286"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="186" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N42" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N43" name="Reaction" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PlaySceneGroup>
                <String><![CDATA[Disregarded]]></String>
              </PlaySceneGroup>
            </Commands>
            <EEdge target="N19" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                <ControlPoint xPos="506" yPos="226" ctrlXPos="446" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N19" name="N19" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N20" name="N20" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N43" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="226" ctrlXPos="286" ctrlYPos="226"/>
                <ControlPoint xPos="347" yPos="236" ctrlXPos="327" ctrlYPos="241"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S87" name="No Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="N102;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S88" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="106" yPos="266" ctrlXPos="126" ctrlYPos="246"/>
              <ControlPoint xPos="186" yPos="266" ctrlXPos="166" ctrlYPos="246"/>
            </Connection>
          </Graphics>
          <And>
            <Neq>
              <Variable name="UserRole"/>
              <String><![CDATA[]]></String>
            </Neq>
            <Neq>
              <Variable name="AgentRole"/>
              <String><![CDATA[]]></String>
            </Neq>
          </And>
        </IEdge>
        <Graphics>
          <Position xPos="26" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N100" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N102" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N102" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
              <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="26" yPos="266"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S88" name="Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="S90;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S87" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="186" yPos="346" ctrlXPos="166" ctrlYPos="366"/>
              <ControlPoint xPos="106" yPos="346" ctrlXPos="126" ctrlYPos="366"/>
            </Connection>
          </Graphics>
          <Or>
            <Eq>
              <Variable name="UserRole"/>
              <String><![CDATA[]]></String>
            </Eq>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[]]></String>
            </Eq>
          </Or>
        </IEdge>
        <Graphics>
          <Position xPos="186" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N101" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S89" name="Speaker" comment="" hideLocalVar="false" hideGlobalVar="false" start="S107;N142;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S90" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="106" yPos="266" ctrlXPos="126" ctrlYPos="246"/>
                <ControlPoint xPos="186" yPos="266" ctrlXPos="166" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[bystander]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S91" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="89" yPos="266" ctrlXPos="146" ctrlYPos="166"/>
                <ControlPoint xPos="363" yPos="266" ctrlXPos="305" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[addressee]]></String>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="26" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Comment>
            <Graphics>
              <Boundary xPos="198" yPos="106" width="252" height="92"/>
            </Graphics>
            <Text style="color:blue">
              While the agent is in the speaker role, we want to consume and ignore hold and yield signals and want to ignore take signals. The only way for the agent to leave the speaker role is by yielding the turn by itself or by reacting to a conflict with a self interrupt and a turn occupy for the user.
            </Text>
          </Comment>
          <Comment>
            <Graphics>
              <Boundary xPos="437" yPos="261" width="100" height="100"/>
            </Graphics>
            <Text style="color:blue">
              When the agent is speaker and offering the turn, then a turn take signal is interpreted as an accept.
            </Text>
          </Comment>
          <Node id="N103" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N142" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N142" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
          <SuperNode id="S107" name="No Action" comment="" hideLocalVar="false" hideGlobalVar="false" start="N169;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S108" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="266" yPos="266" ctrlXPos="286" ctrlYPos="246"/>
                  <ControlPoint xPos="346" yPos="266" ctrlXPos="326" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="AgentAction"/>
                <String><![CDATA[offering]]></String>
              </Eq>
            </IEdge>
            <Graphics>
              <Position xPos="179" yPos="268"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N167" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N169" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N169" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="26" yPos="266"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S108" name="Offering" comment="" hideLocalVar="false" hideGlobalVar="false" start="N170;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S107" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="346" yPos="346" ctrlXPos="326" ctrlYPos="366"/>
                  <ControlPoint xPos="266" yPos="346" ctrlXPos="286" ctrlYPos="366"/>
                </Connection>
              </Graphics>
              <Eq>
                <Variable name="AgentAction"/>
                <String><![CDATA[]]></String>
              </Eq>
            </IEdge>
            <Graphics>
              <Position xPos="339" yPos="268"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N168" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N170" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N170" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="26" yPos="266"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S90" name="Bystander" comment="" hideLocalVar="false" hideGlobalVar="false" start="N141;S92;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S89" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="186" yPos="346" ctrlXPos="166" ctrlYPos="366"/>
                <ControlPoint xPos="106" yPos="346" ctrlXPos="126" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[speaker]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S91" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="266" ctrlXPos="286" ctrlYPos="246"/>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="326" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[addressee]]></String>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="186" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N133" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N141" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N141" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
          <SuperNode id="S92" name="Await Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N145;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S93" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="226" yPos="266" ctrlXPos="226" ctrlYPos="286"/>
                  <ControlPoint xPos="226" yPos="346" ctrlXPos="226" ctrlYPos="326"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <String><![CDATA[consume(turn, user, take).]]></String>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N144" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N145" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N145" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="26" yPos="266"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S93" name="User Occupy" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(role, user, occupy).]]></String>
              </PrologQuery>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N146" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="0" yPos="0"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S91" name="Addressee" comment="" hideLocalVar="false" hideGlobalVar="false" start="N143;S94;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S90" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="346" ctrlXPos="326" ctrlYPos="366"/>
                <ControlPoint xPos="266" yPos="346" ctrlXPos="286" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[bystander]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S89" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="363" yPos="346" ctrlXPos="305" ctrlYPos="446"/>
                <ControlPoint xPos="89" yPos="346" ctrlXPos="146" ctrlYPos="446"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[speaker]]></String>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Comment>
            <Graphics>
              <Boundary xPos="309" yPos="210" width="147" height="54"/>
            </Graphics>
            <Text style="color:blue">
              Consume and/or ignore the other turn signals and process the agent requests.
            </Text>
          </Comment>
          <Node id="N134" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N143" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N143" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
          <SuperNode id="S94" name="Await Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="N148;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S95" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="186" yPos="266" ctrlXPos="156" ctrlYPos="295"/>
                  <ControlPoint xPos="146" yPos="346" ctrlXPos="146" ctrlYPos="316"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <String><![CDATA[consume(turn, user, yield).]]></String>
              </PrologQuery>
            </IEdge>
            <IEdge target="S97" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="266" yPos="266" ctrlXPos="295" ctrlYPos="295"/>
                  <ControlPoint xPos="306" yPos="346" ctrlXPos="306" ctrlYPos="316"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <String><![CDATA[consume(turn, user, assign).]]></String>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N147" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N148" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N148" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="26" yPos="266"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S95" name="User Release" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(role, user, release).]]></String>
              </PrologQuery>
            </Commands>
            <Graphics>
              <Position xPos="106" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N149" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S97" name="User Offers" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(role, user, offer).]]></String>
              </PrologQuery>
            </Commands>
            <Graphics>
              <Position xPos="266" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N151" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="0" yPos="0"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S26" name="Processing" comment="" hideLocalVar="false" hideGlobalVar="false" start="S10;S78;S38;S40;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="186" yPos="266"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N50" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="26" yPos="186"/>
        </Graphics>
      </Node>
      <SuperNode id="S40" name="Detection" comment="" hideLocalVar="false" hideGlobalVar="false" start="S41;S59;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="186" yPos="186"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N44" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S41" name="Voice" comment="" hideLocalVar="false" hideGlobalVar="false" start="S44;">
          <Define>
          </Define>
          <Declare>
            <Variable type="String" name ="N">
              <String><![CDATA[]]></String>
            </Variable>
            <Variable type="String" name ="D">
              <String><![CDATA[]]></String>
            </Variable>
            <Variable type="String" name ="E">
              <String><![CDATA[]]></String>
            </Variable>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <EEdge target="S41" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="226" yPos="266" ctrlXPos="226" ctrlYPos="186"/>
              <ControlPoint xPos="266" yPos="266" ctrlXPos="346" ctrlYPos="186"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="197" yPos="286"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="37" yPos="466"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Comment>
            <Graphics>
              <Boundary xPos="287" yPos="271" width="235" height="71"/>
            </Graphics>
            <Text style="color:blue">
              Here we extract the oldest voice event and retract it from the fact base then. We do not delete the other probably newer events since we do not want to miss any voice events here.
            </Text>
          </Comment>
          <Node id="N45" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <SuperNode id="S44" name="Get Voice Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N75;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S45" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="106" yPos="306" ctrlXPos="126" ctrlYPos="306"/>
                  <ControlPoint xPos="186" yPos="306" ctrlXPos="166" ctrlYPos="306"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <String><![CDATA[voice(N, D, E).]]></String>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N73" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N75" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N75" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="26" yPos="266"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S45" name="Check Name" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S46" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="226" yPos="266" ctrlXPos="226" ctrlYPos="236"/>
                  <ControlPoint xPos="346" yPos="226" ctrlXPos="316" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="N"/>
                </Add>
                <String><![CDATA[, user).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <IEdge target="S47" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="226" yPos="346" ctrlXPos="226" ctrlYPos="375"/>
                  <ControlPoint xPos="346" yPos="386" ctrlXPos="316" ctrlYPos="386"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="N"/>
                </Add>
                <String><![CDATA[, agent).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="186" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N74" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S46" name="User Voice" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S48" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="186" ctrlXPos="492" ctrlYPos="119"/>
                  <ControlPoint xPos="586" yPos="66" ctrlXPos="519" ctrlYPos="66"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="D"/>
                </Add>
                <String><![CDATA[, start).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <IEdge target="S49" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="D"/>
                </Add>
                <String><![CDATA[, stop).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N89" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S47" name="Agent Voice" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S50" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="426" ctrlXPos="492" ctrlYPos="492"/>
                  <ControlPoint xPos="586" yPos="546" ctrlXPos="519" ctrlYPos="546"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="D"/>
                </Add>
                <String><![CDATA[, start).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <IEdge target="S51" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="386" ctrlXPos="486" ctrlYPos="386"/>
                  <ControlPoint xPos="586" yPos="386" ctrlXPos="526" ctrlYPos="386"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="D"/>
                </Add>
                <String><![CDATA[, stop).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N90" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S48" name="User Starts" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserSpeaking"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
              <UserCommand name="print">
                <String><![CDATA[User starts speaking]]></String>
              </UserCommand>
            </Commands>
            <Graphics>
              <Position xPos="586" yPos="26"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N91" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S49" name="User Ends" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserSpeaking"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <UserCommand name="print">
                <String><![CDATA[User stops speaking]]></String>
              </UserCommand>
            </Commands>
            <Graphics>
              <Position xPos="586" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N92" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S50" name="Agent Starts" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentSpeaking"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
              <UserCommand name="print">
                <String><![CDATA[Agent starts speaking]]></String>
              </UserCommand>
            </Commands>
            <Graphics>
              <Position xPos="586" yPos="506"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N93" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S51" name="Agent Ends" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentSpeaking"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <UserCommand name="print">
                <String><![CDATA[Agent stops speaking]]></String>
              </UserCommand>
            </Commands>
            <Graphics>
              <Position xPos="586" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N94" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S52" name="Move" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="347" yPos="253"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N87" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S53" name="Gaze" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="347" yPos="333"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N88" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S54" name="Speech" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="347" yPos="413"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N95" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S55" name="Facs" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="427" yPos="253"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N96" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S58" name="Mood" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="427" yPos="333"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N97" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S59" name="State" comment="" hideLocalVar="false" hideGlobalVar="false" start="S68;">
          <Define>
          </Define>
          <Declare>
            <Variable type="String" name ="N">
              <String><![CDATA[]]></String>
            </Variable>
            <Variable type="String" name ="D">
              <String><![CDATA[]]></String>
            </Variable>
            <Variable type="String" name ="E">
              <String><![CDATA[]]></String>
            </Variable>
          </Declare>
          <Commands>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <EEdge target="S59" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="66" yPos="266" ctrlXPos="66" ctrlYPos="186"/>
              <ControlPoint xPos="106" yPos="266" ctrlXPos="186" ctrlYPos="186"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="37" yPos="286"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="65" yPos="387"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N98" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <SuperNode id="S68" name="Get State Event" comment="" hideLocalVar="false" hideGlobalVar="false" start="N124;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S69" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="106" yPos="306" ctrlXPos="126" ctrlYPos="306"/>
                  <ControlPoint xPos="186" yPos="306" ctrlXPos="166" ctrlYPos="306"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <String><![CDATA[state(N, D, E).]]></String>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N123" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N124" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N124" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="26" yPos="266"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S69" name="Check Name" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S70" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="226" yPos="266" ctrlXPos="226" ctrlYPos="236"/>
                  <ControlPoint xPos="346" yPos="226" ctrlXPos="316" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="N"/>
                </Add>
                <String><![CDATA[, user).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <IEdge target="S71" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="237" yPos="346" ctrlXPos="245" ctrlYPos="375"/>
                  <ControlPoint xPos="346" yPos="386" ctrlXPos="316" ctrlYPos="386"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="N"/>
                </Add>
                <String><![CDATA[, agent).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="186" yPos="266"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N125" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S70" name="User State" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S73" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="186" ctrlXPos="510" ctrlYPos="101"/>
                  <ControlPoint xPos="586" yPos="66" ctrlXPos="501" ctrlYPos="66"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="D"/>
                </Add>
                <String><![CDATA[, enter).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <IEdge target="S86" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="226" ctrlXPos="486" ctrlYPos="226"/>
                  <ControlPoint xPos="586" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="D"/>
                </Add>
                <String><![CDATA[, leave).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N126" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S71" name="Agent State" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S85" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="426" ctrlXPos="510" ctrlYPos="510"/>
                  <ControlPoint xPos="586" yPos="546" ctrlXPos="501" ctrlYPos="546"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="D"/>
                </Add>
                <String><![CDATA[, enter).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <IEdge target="S74" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="426" yPos="386" ctrlXPos="486" ctrlYPos="386"/>
                  <ControlPoint xPos="586" yPos="386" ctrlXPos="526" ctrlYPos="386"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <Add>
                <Add>
                  <String><![CDATA[val(]]></String>
                  <Variable name="D"/>
                </Add>
                <String><![CDATA[, leave).]]></String>
              </Add>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="346" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N127" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S73" name="User Enters" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserAttendant"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
              <UserCommand name="print">
                <String><![CDATA[User enters dialog]]></String>
              </UserCommand>
            </Commands>
            <Graphics>
              <Position xPos="586" yPos="26"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N128" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S74" name="Agent Leaves" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentAttendant"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <UserCommand name="print">
                <String><![CDATA[Agent leaves dialog]]></String>
              </UserCommand>
            </Commands>
            <Graphics>
              <Position xPos="586" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N129" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S85" name="Agent Enters" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="AgentAttendant"/>
                <Expression>
                  <Bool value="true"/>
                </Expression>
              </Assign>
              <UserCommand name="print">
                <String><![CDATA[Agent enters dialog]]></String>
              </UserCommand>
            </Commands>
            <Graphics>
              <Position xPos="586" yPos="506"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N130" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S86" name="User Leaves" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <Assign>
                <Variable name="UserAttendant"/>
                <Expression>
                  <Bool value="false"/>
                </Expression>
              </Assign>
              <UserCommand name="print">
                <String><![CDATA[User leaves dialog]]></String>
              </UserCommand>
            </Commands>
            <Graphics>
              <Position xPos="586" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N132" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S10" name="Turn Conflicts" comment="" hideLocalVar="false" hideGlobalVar="false" start="S33;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="186" yPos="346"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="191" yPos="7"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N54" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S17" name="User Barging In" comment="" hideLocalVar="false" hideGlobalVar="false" start="N56;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserBargesInAgent"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S33" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="226" yPos="186" ctrlXPos="226" ctrlYPos="206"/>
                <ControlPoint xPos="226" yPos="266" ctrlXPos="226" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            <Not>
              <Variable name="UserOverlapsAgent"/>
            </Not>
          </IEdge>
          <Graphics>
            <Position xPos="186" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N55" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="49" yPos="154"/>
            </Graphics>
          </Node>
          <Node id="N56" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N56" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="49" yPos="234"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S30" name="Await Timeout" comment="" hideLocalVar="false" hideGlobalVar="false" start="N58;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S33" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="346" ctrlXPos="326" ctrlYPos="366"/>
                <ControlPoint xPos="266" yPos="346" ctrlXPos="286" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            <Not>
              <Variable name="UserOverlapsAgent"/>
            </Not>
          </IEdge>
          <IEdge target="S36" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="266" ctrlXPos="386" ctrlYPos="246"/>
                <ControlPoint xPos="386" yPos="186" ctrlXPos="386" ctrlYPos="206"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="1000"/>
            </TimeoutCondition>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N57" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="40" yPos="157"/>
            </Graphics>
          </Node>
          <Node id="N58" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N58" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="40" yPos="237"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S31" name="Await Timeout" comment="" hideLocalVar="false" hideGlobalVar="false" start="N60;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S33" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="106" yPos="346" ctrlXPos="126" ctrlYPos="366"/>
                <ControlPoint xPos="186" yPos="346" ctrlXPos="166" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            <Not>
              <Variable name="AgentOverlapsUser"/>
            </Not>
          </IEdge>
          <IEdge target="S37" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="66" yPos="346" ctrlXPos="66" ctrlYPos="366"/>
                <ControlPoint xPos="66" yPos="426" ctrlXPos="66" ctrlYPos="406"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="1000"/>
            </TimeoutCondition>
          </IEdge>
          <Graphics>
            <Position xPos="26" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N59" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="37" yPos="162"/>
            </Graphics>
          </Node>
          <Node id="N60" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N60" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="37" yPos="242"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S33" name="No Turn Conflict" comment="" hideLocalVar="false" hideGlobalVar="false" start="N62;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserBearsUpAgent"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="UserBargesInAgent"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S31" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="186" yPos="266" ctrlXPos="166" ctrlYPos="246"/>
                <ControlPoint xPos="106" yPos="266" ctrlXPos="126" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            <Variable name="AgentOverlapsUser"/>
          </IEdge>
          <IEdge target="S30" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="266" ctrlXPos="286" ctrlYPos="246"/>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="326" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            <Variable name="UserOverlapsAgent"/>
          </IEdge>
          <Graphics>
            <Position xPos="186" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N61" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="33" yPos="156"/>
            </Graphics>
          </Node>
          <Node id="N62" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N62" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="33" yPos="236"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S34" name="User Bears Up" comment="" hideLocalVar="false" hideGlobalVar="false" start="N64;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserBearsUpAgent"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S33" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="226" yPos="426" ctrlXPos="226" ctrlYPos="406"/>
                <ControlPoint xPos="226" yPos="346" ctrlXPos="226" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            <Not>
              <Variable name="AgentOverlapsUser"/>
            </Not>
          </IEdge>
          <Graphics>
            <Position xPos="186" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N63" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="21" yPos="151"/>
            </Graphics>
          </Node>
          <Node id="N64" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N64" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="21" yPos="231"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S36" name="User Barges In" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(turn, conflict, bargein).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S17" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="346" yPos="146" ctrlXPos="326" ctrlYPos="146"/>
              <ControlPoint xPos="266" yPos="146" ctrlXPos="286" ctrlYPos="146"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="346" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N65" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S37" name="User Bears Up" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(turn, conflict, bearup).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S34" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="106" yPos="466" ctrlXPos="126" ctrlYPos="466"/>
              <ControlPoint xPos="186" yPos="466" ctrlXPos="166" ctrlYPos="466"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="26" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N66" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S38" name="Turn Signals" comment="" hideLocalVar="false" hideGlobalVar="false" start="S64;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="186" yPos="426"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="209" yPos="116" width="211" height="66"/>
          </Graphics>
          <Text style="color:blue">
            Here we should also recognize backchannel signals or better in parallel or in the overlap automaton when an overlap is shorter than the timeout for a conflict?
          </Text>
        </Comment>
        <Comment>
          <Graphics>
            <Boundary xPos="183" yPos="9" width="263" height="100"/>
          </Graphics>
          <Text style="color:blue">
            This process models the recognition of the behavioral patterns that could be interpreted as turn regulation signals. They are most important for the phases in which the agent is in the listener role and the user is in the speaker role and are supposed to serve the agent to recognize when a user accepts a role shift, continues to be in the speaker role or wants to offer the turn to the agent.
          </Text>
        </Comment>
        <Node id="N67" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S60" name="User Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N71;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S75" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="266" ctrlXPos="386" ctrlYPos="286"/>
                <ControlPoint xPos="386" yPos="346" ctrlXPos="386" ctrlYPos="326"/>
              </Connection>
            </Graphics>
            <Not>
              <Variable name="UserSpeaking"/>
            </Not>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N70" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N71" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N71" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S64" name="User Silent" comment="" hideLocalVar="false" hideGlobalVar="false" start="N80;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S76" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="77" yPos="266" ctrlXPos="85" ctrlYPos="236"/>
                <ControlPoint xPos="186" yPos="226" ctrlXPos="156" ctrlYPos="226"/>
              </Connection>
            </Graphics>
            <Variable name="UserSpeaking"/>
          </IEdge>
          <Graphics>
            <Position xPos="26" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N79" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N80" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N80" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S72" name="User Assigns" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(turn, user, assign).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S64" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="186" yPos="386" ctrlXPos="156" ctrlYPos="386"/>
              <ControlPoint xPos="89" yPos="346" ctrlXPos="105" ctrlYPos="375"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="186" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N81" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S75" name="User Silent" comment="" hideLocalVar="false" hideGlobalVar="false" start="N83;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S72" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="386" ctrlXPos="326" ctrlYPos="386"/>
                <ControlPoint xPos="266" yPos="386" ctrlXPos="286" ctrlYPos="386"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(turn, gaze, agent).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S77" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="386" ctrlXPos="455" ctrlYPos="386"/>
                <ControlPoint xPos="535" yPos="346" ctrlXPos="526" ctrlYPos="375"/>
              </Connection>
            </Graphics>
            <Variable name="UserSpeaking"/>
          </IEdge>
          <IEdge target="S96" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="386" yPos="426" ctrlXPos="386" ctrlYPos="479"/>
                <ControlPoint xPos="266" yPos="546" ctrlXPos="319" ctrlYPos="546"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="1000"/>
            </TimeoutCondition>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N82" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N83" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N83" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S76" name="User Takes Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(turn, user, take).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S60" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="266" yPos="226" ctrlXPos="286" ctrlYPos="226"/>
              <ControlPoint xPos="346" yPos="226" ctrlXPos="326" ctrlYPos="226"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="186" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N84" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S77" name="User Holds Turn" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(turn, user, hold).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S60" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="535" yPos="266" ctrlXPos="526" ctrlYPos="236"/>
              <ControlPoint xPos="426" yPos="226" ctrlXPos="455" ctrlYPos="226"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="506" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N85" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S96" name="User Yields" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <PrologQuery>
            <String><![CDATA[signal(turn, user, yield).]]></String>
            </PrologQuery>
          </Commands>
          <EEdge target="S64" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="186" yPos="546" ctrlXPos="101" ctrlYPos="546"/>
              <ControlPoint xPos="66" yPos="346" ctrlXPos="66" ctrlYPos="430"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="186" yPos="506"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N150" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="0" yPos="0"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
      <SuperNode id="S78" name="Voice Overlaps" comment="" hideLocalVar="false" hideGlobalVar="false" start="S79;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="186" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="201" yPos="16"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N86" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S79" name="None Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N105;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserOverlapsAgent"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentOverlapsUser"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S80" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="77" yPos="266" ctrlXPos="100" ctrlYPos="181"/>
                <ControlPoint xPos="266" yPos="146" ctrlXPos="181" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="AgentSpeaking"/>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <IEdge target="S81" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="77" yPos="346" ctrlXPos="100" ctrlYPos="430"/>
                <ControlPoint xPos="266" yPos="466" ctrlXPos="181" ctrlYPos="466"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="UserSpeaking"/>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="26" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N104" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N105" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N105" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S80" name="Agent Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N131;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserOverlapsAgent"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentOverlapsUser"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S79" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="283" yPos="186" ctrlXPos="234" ctrlYPos="270"/>
                <ControlPoint xPos="106" yPos="295" ctrlXPos="190" ctrlYPos="271"/>
              </Connection>
            </Graphics>
            <And>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <IEdge target="S83" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="146" ctrlXPos="406" ctrlYPos="146"/>
                <ControlPoint xPos="506" yPos="146" ctrlXPos="446" ctrlYPos="146"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="AgentSpeaking"/>
              <Variable name="UserSpeaking"/>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N106" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N131" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N131" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S81" name="User Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N136;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserOverlapsAgent"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentOverlapsUser"/>
              <Expression>
                <Bool value="false"/>
              </Expression>
            </Assign>
          </Commands>
          <IEdge target="S79" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="283" yPos="426" ctrlXPos="234" ctrlYPos="341"/>
                <ControlPoint xPos="106" yPos="317" ctrlXPos="190" ctrlYPos="340"/>
              </Connection>
            </Graphics>
            <And>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <IEdge target="S84" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="466" ctrlXPos="406" ctrlYPos="466"/>
                <ControlPoint xPos="506" yPos="466" ctrlXPos="446" ctrlYPos="466"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="AgentSpeaking"/>
              <Variable name="UserSpeaking"/>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="266" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N135" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="106"/>
            </Graphics>
          </Node>
          <Node id="N136" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N136" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
                <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S82" name="Both Speaking" comment="" hideLocalVar="false" hideGlobalVar="false" start="N138;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S81" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="317" ctrlXPos="421" ctrlYPos="340"/>
                <ControlPoint xPos="329" yPos="426" ctrlXPos="377" ctrlYPos="341"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="UserSpeaking"/>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <IEdge target="S79" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="306" ctrlXPos="326" ctrlYPos="306"/>
                <ControlPoint xPos="106" yPos="306" ctrlXPos="286" ctrlYPos="306"/>
              </Connection>
            </Graphics>
            <And>
              <Not>
                <Variable name="AgentSpeaking"/>
              </Not>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <IEdge target="S80" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="295" ctrlXPos="421" ctrlYPos="271"/>
                <ControlPoint xPos="329" yPos="186" ctrlXPos="377" ctrlYPos="270"/>
              </Connection>
            </Graphics>
            <And>
              <Variable name="AgentSpeaking"/>
              <Not>
                <Variable name="UserSpeaking"/>
              </Not>
            </And>
          </IEdge>
          <Graphics>
            <Position xPos="506" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N137" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N138" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N138" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="236" yPos="267" ctrlXPos="256" ctrlYPos="189"/>
                <ControlPoint xPos="261" yPos="286" ctrlXPos="331" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="186" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S83" name="User Over Agent" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserOverlapsAgent"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <EEdge target="S82" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="546" yPos="186" ctrlXPos="546" ctrlYPos="206"/>
              <ControlPoint xPos="546" yPos="266" ctrlXPos="546" ctrlYPos="246"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="506" yPos="106"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N139" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S84" name="Agent Over User" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentOverlapsUser"/>
              <Expression>
                <Bool value="true"/>
              </Expression>
            </Assign>
          </Commands>
          <EEdge target="S82" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="546" yPos="426" ctrlXPos="546" ctrlYPos="406"/>
              <ControlPoint xPos="546" yPos="346" ctrlXPos="546" ctrlYPos="366"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="506" yPos="426"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N140" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S16" name="Statistics" comment="" hideLocalVar="false" hideGlobalVar="false" start="N25;S42;S43;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="186" yPos="186"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N24" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="26" yPos="186"/>
        </Graphics>
      </Node>
      <Node id="N25" name="Timer" history="false">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <PrologQuery>
          <String><![CDATA[now(CurrentSystemTime).]]></String>
          </PrologQuery>
        </Commands>
        <EEdge target="N25" start ="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
            <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
          </Connection>
        </Graphics>
        </EEdge>
        <Graphics>
          <Position xPos="186" yPos="186"/>
        </Graphics>
      </Node>
      <SuperNode id="S42" name="Statistics" comment="" hideLocalVar="false" hideGlobalVar="false" start="N48;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <PrologQuery>
          <String><![CDATA[statistics.]]></String>
          </PrologQuery>
        </Commands>
        <IEdge target="S42" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="66" yPos="346" ctrlXPos="66" ctrlYPos="266"/>
              <ControlPoint xPos="106" yPos="346" ctrlXPos="186" ctrlYPos="266"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[timeout(statistics, 5000).]]></String>
          </PrologQuery>
        </IEdge>
        <Graphics>
          <Position xPos="26" yPos="346"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N26" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="186" yPos="106"/>
          </Graphics>
        </Node>
        <Node id="N48" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N48" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
              <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="186" yPos="186"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S43" name="Garbage" comment="" hideLocalVar="false" hideGlobalVar="false" start="N72;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <PrologQuery>
          <String><![CDATA[garbage(speech, 30000).]]></String>
          </PrologQuery>
        </Commands>
        <IEdge target="S43" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="226" yPos="346" ctrlXPos="226" ctrlYPos="266"/>
              <ControlPoint xPos="266" yPos="346" ctrlXPos="346" ctrlYPos="266"/>
            </Connection>
          </Graphics>
          <PrologQuery>
          <String><![CDATA[timeout(garbage, 10000).]]></String>
          </PrologQuery>
        </IEdge>
        <Graphics>
          <Position xPos="186" yPos="346"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N46" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="186" yPos="106"/>
          </Graphics>
        </Node>
        <Node id="N72" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N72" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
              <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="186" yPos="186"/>
          </Graphics>
        </Node>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S20" name="Role Shifting" comment="" hideLocalVar="false" hideGlobalVar="false" start="S22;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="186" yPos="346"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Comment>
        <Graphics>
          <Boundary xPos="280" yPos="264" width="265" height="88"/>
        </Graphics>
        <Text style="color:blue">
          This process determines the assignment of the different participant roles to the user and the agent as well as the shifts of these participant roles between the user and the agent. The determination of hte participant roles is nased on the attendance of the interaction partners as well as the role regulation signals.
        </Text>
      </Comment>
      <Node id="N1" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="26" yPos="186"/>
        </Graphics>
      </Node>
      <SuperNode id="S22" name="No Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="N52;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
          <Assign>
            <Variable name="UserRole"/>
            <Expression>
              <String><![CDATA[]]></String>
            </Expression>
          </Assign>
          <Assign>
            <Variable name="AgentRole"/>
            <Expression>
              <String><![CDATA[]]></String>
            </Expression>
          </Assign>
          <Play>
            <String><![CDATA[[wizard refresh]]]></String>
          </Play>
        </Commands>
        <IEdge target="S27" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="106" yPos="266" ctrlXPos="126" ctrlYPos="246"/>
              <ControlPoint xPos="186" yPos="266" ctrlXPos="166" ctrlYPos="246"/>
            </Connection>
          </Graphics>
          <And>
            <Variable name="UserAttendant"/>
            <Variable name="AgentAttendant"/>
          </And>
        </IEdge>
        <Graphics>
          <Position xPos="26" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N29" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N52" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N52" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
              <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="26" yPos="266"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S27" name="Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="S28;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S22" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="186" yPos="346" ctrlXPos="166" ctrlYPos="366"/>
              <ControlPoint xPos="106" yPos="346" ctrlXPos="126" ctrlYPos="366"/>
            </Connection>
          </Graphics>
          <Or>
            <Not>
              <Variable name="UserAttendant"/>
            </Not>
            <Not>
              <Variable name="AgentAttendant"/>
            </Not>
          </Or>
        </IEdge>
        <Graphics>
          <Position xPos="186" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Comment>
          <Graphics>
            <Boundary xPos="126" yPos="455" width="213" height="50"/>
          </Graphics>
          <Text style="color:blue">
            Here we should use the timeout to switch to the speaker role after the user offered the turn.
          </Text>
        </Comment>
        <Node id="N51" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S28" name="ABUB" comment="" hideLocalVar="false" hideGlobalVar="false" start="N68;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserRole"/>
              <Expression>
                <String><![CDATA[bystander]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentRole"/>
              <Expression>
                <String><![CDATA[bystander]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="215" ctrlXPos="566" ctrlYPos="198"/>
                <ControlPoint xPos="666" yPos="215" ctrlXPos="606" ctrlYPos="198"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(role, user, occupy).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="215" ctrlXPos="366" ctrlYPos="198"/>
                <ControlPoint xPos="266" yPos="215" ctrlXPos="326" ctrlYPos="198"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(role, agent, occupy).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="426" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N53" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N68" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N68" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S29" name="ASUA" comment="" hideLocalVar="false" hideGlobalVar="false" start="N109;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserRole"/>
              <Expression>
                <String><![CDATA[addressee]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentRole"/>
              <Expression>
                <String><![CDATA[speaker]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S28" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="237" ctrlXPos="326" ctrlYPos="253"/>
                <ControlPoint xPos="426" yPos="237" ctrlXPos="366" ctrlYPos="253"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(role, agent, release).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S35" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="266" ctrlXPos="319" ctrlYPos="319"/>
                <ControlPoint xPos="346" yPos="346" ctrlXPos="292" ctrlYPos="292"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(role, agent, offer).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="186" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N69" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N109" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N109" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S32" name="AAUS" comment="" hideLocalVar="false" hideGlobalVar="false" start="N108;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserRole"/>
              <Expression>
                <String><![CDATA[speaker]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentRole"/>
              <Expression>
                <String><![CDATA[addressee]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[]]></String>
              </Expression>
            </Assign>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S28" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="237" ctrlXPos="606" ctrlYPos="253"/>
                <ControlPoint xPos="506" yPos="237" ctrlXPos="566" ctrlYPos="253"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(role, user, release).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S61" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="666" yPos="266" ctrlXPos="612" ctrlYPos="319"/>
                <ControlPoint xPos="586" yPos="346" ctrlXPos="639" ctrlYPos="292"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(role, user, offer).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="666" yPos="186"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N107" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N108" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N108" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S35" name="AS!UA" comment="" hideLocalVar="false" hideGlobalVar="false" start="N112;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="AgentAction"/>
              <Expression>
                <String><![CDATA[offering]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="363" yPos="346" ctrlXPos="332" ctrlYPos="292"/>
                <ControlPoint xPos="266" yPos="249" ctrlXPos="319" ctrlYPos="279"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="5000"/>
            </TimeoutCondition>
          </IEdge>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="386" ctrlXPos="292" ctrlYPos="386"/>
                <ControlPoint xPos="226" yPos="266" ctrlXPos="226" ctrlYPos="319"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(role, user, reject).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="426" yPos="426" ctrlXPos="544" ctrlYPos="544"/>
                <ControlPoint xPos="717" yPos="266" ctrlXPos="749" ctrlYPos="384"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(role, user, accept).]]></String>
            </PrologQuery>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N110" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N112" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N112" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
        <SuperNode id="S61" name="AAUS!" comment="" hideLocalVar="false" hideGlobalVar="false" start="N113;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
            <Assign>
              <Variable name="UserAction"/>
              <Expression>
                <String><![CDATA[offering]]></String>
              </Expression>
            </Assign>
            <Play>
              <String><![CDATA[[wizard refresh]]]></String>
            </Play>
          </Commands>
          <IEdge target="S29" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="506" yPos="426" ctrlXPos="387" ctrlYPos="544"/>
                <ControlPoint xPos="215" yPos="266" ctrlXPos="182" ctrlYPos="384"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(role, agent, accept).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="586" yPos="397" ctrlXPos="639" ctrlYPos="386"/>
                <ControlPoint xPos="706" yPos="266" ctrlXPos="706" ctrlYPos="319"/>
              </Connection>
            </Graphics>
            <PrologQuery>
            <String><![CDATA[consume(role, agent, reject).]]></String>
            </PrologQuery>
          </IEdge>
          <IEdge target="S32" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="569" yPos="346" ctrlXPos="599" ctrlYPos="292"/>
                <ControlPoint xPos="666" yPos="249" ctrlXPos="612" ctrlYPos="279"/>
              </Connection>
            </Graphics>
            <TimeoutCondition>
            <Int value="5000"/>
            </TimeoutCondition>
          </IEdge>
          <Graphics>
            <Position xPos="506" yPos="346"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N111" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N113" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N113" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
    </SuperNode>
    <SuperNode id="S21" name="Dialog Behavior" comment="" hideLocalVar="false" hideGlobalVar="false" start="S98;">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="346" yPos="426"/>
      </Graphics>
      <LocalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </LocalVariableBadge>
      <GlobalVariableBadge>
        <Position xPos="10" yPos="10"/>
      </GlobalVariableBadge>
      <Node id="N153" name="History" history="true">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <Graphics>
          <Position xPos="26" yPos="186"/>
        </Graphics>
      </Node>
      <SuperNode id="S98" name="No Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="N156;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S99" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="106" yPos="266" ctrlXPos="126" ctrlYPos="246"/>
              <ControlPoint xPos="186" yPos="266" ctrlXPos="166" ctrlYPos="246"/>
            </Connection>
          </Graphics>
          <And>
            <Neq>
              <Variable name="UserRole"/>
              <String><![CDATA[]]></String>
            </Neq>
            <Neq>
              <Variable name="AgentRole"/>
              <String><![CDATA[]]></String>
            </Neq>
          </And>
        </IEdge>
        <Graphics>
          <Position xPos="26" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N154" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <Node id="N156" name="Wait" history="false">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <EEdge target="N156" start ="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
              <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
            </Connection>
          </Graphics>
          </EEdge>
          <Graphics>
            <Position xPos="26" yPos="266"/>
          </Graphics>
        </Node>
      </SuperNode>
      <SuperNode id="S99" name="Interaction" comment="" hideLocalVar="false" hideGlobalVar="false" start="S63;">
        <Define>
        </Define>
        <Declare>
        </Declare>
        <Commands>
        </Commands>
        <IEdge target="S98" start="">
          <Graphics>
            <Connection>
              <ControlPoint xPos="186" yPos="346" ctrlXPos="166" ctrlYPos="366"/>
              <ControlPoint xPos="106" yPos="346" ctrlXPos="126" ctrlYPos="366"/>
            </Connection>
          </Graphics>
          <Or>
            <Eq>
              <Variable name="UserRole"/>
              <String><![CDATA[]]></String>
            </Eq>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[]]></String>
            </Eq>
          </Or>
        </IEdge>
        <Graphics>
          <Position xPos="186" yPos="266"/>
        </Graphics>
        <LocalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </LocalVariableBadge>
        <GlobalVariableBadge>
          <Position xPos="10" yPos="10"/>
        </GlobalVariableBadge>
        <Node id="N155" name="History" history="true">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <Graphics>
            <Position xPos="26" yPos="186"/>
          </Graphics>
        </Node>
        <SuperNode id="S62" name="Speaker" comment="" hideLocalVar="false" hideGlobalVar="false" start="S100;N116;">
          <Define>
          </Define>
          <Declare>
            <Variable type="String" name ="D">
              <String><![CDATA[]]></String>
            </Variable>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S63" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="106" yPos="266" ctrlXPos="126" ctrlYPos="246"/>
                <ControlPoint xPos="186" yPos="266" ctrlXPos="166" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[bystander]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S65" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="89" yPos="266" ctrlXPos="146" ctrlYPos="166"/>
                <ControlPoint xPos="363" yPos="266" ctrlXPos="305" ctrlYPos="166"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[addressee]]></String>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="26" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="341" yPos="68"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N13" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N116" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N116" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
          <SuperNode id="S100" name="Await Scene" comment="" hideLocalVar="false" hideGlobalVar="false" start="N152;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S101" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="266" yPos="186" ctrlXPos="286" ctrlYPos="166"/>
                  <ControlPoint xPos="346" yPos="186" ctrlXPos="326" ctrlYPos="166"/>
                </Connection>
              </Graphics>
              <PrologQuery>
              <String><![CDATA[consume(scene, agent, D).]]></String>
              </PrologQuery>
            </IEdge>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N122" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N152" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N152" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="26" yPos="266"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S101" name="Contribution" comment="" hideLocalVar="false" hideGlobalVar="false" start="S103;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="S100" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="326" ctrlYPos="286"/>
                <ControlPoint xPos="266" yPos="266" ctrlXPos="286" ctrlYPos="286"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="346" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Comment>
              <Graphics>
                <Boundary xPos="495" yPos="214" width="124" height="50"/>
              </Graphics>
              <Text style="color:blue">
                Do we signal a release after an additional timeout?
              </Text>
            </Comment>
            <Node id="N157" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
            <SuperNode id="S103" name="Planning Cue" comment="" hideLocalVar="false" hideGlobalVar="false" start="N160;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S104" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="106" yPos="306" ctrlXPos="126" ctrlYPos="306"/>
                    <ControlPoint xPos="186" yPos="306" ctrlXPos="166" ctrlYPos="306"/>
                  </Connection>
                </Graphics>
                <TimeoutCondition>
                <Int value="1000"/>
                </TimeoutCondition>
              </IEdge>
              <Graphics>
                <Position xPos="26" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N159" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="26" yPos="186"/>
                </Graphics>
              </Node>
              <Node id="N160" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N160" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                    <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="26" yPos="266"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S104" name="Play Scene" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <Assign>
                  <Variable name="AgentInterruptible"/>
                  <Expression>
                    <Bool value="true"/>
                  </Expression>
                </Assign>
                <PlaySceneGroup>
                  <Variable name="D"/>
                </PlaySceneGroup>
                <Assign>
                  <Variable name="AgentInterruptible"/>
                  <Expression>
                    <Bool value="false"/>
                  </Expression>
                </Assign>
              </Commands>
              <EEdge target="S105" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="266" yPos="306" ctrlXPos="286" ctrlYPos="306"/>
                  <ControlPoint xPos="346" yPos="306" ctrlXPos="326" ctrlYPos="306"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="186" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N161" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="26" yPos="186"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S105" name="Assign Turn Cue" comment="" hideLocalVar="false" hideGlobalVar="false" start="N166;">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <IEdge target="S106" start="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="426" yPos="306" ctrlXPos="446" ctrlYPos="306"/>
                    <ControlPoint xPos="506" yPos="306" ctrlXPos="486" ctrlYPos="306"/>
                  </Connection>
                </Graphics>
                <TimeoutCondition>
                <Int value="1000"/>
                </TimeoutCondition>
              </IEdge>
              <Graphics>
                <Position xPos="346" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N162" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="26" yPos="186"/>
                </Graphics>
              </Node>
              <Node id="N166" name="Wait" history="false">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <EEdge target="N166" start ="">
                <Graphics>
                  <Connection>
                    <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                    <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                  </Connection>
                </Graphics>
                </EEdge>
                <Graphics>
                  <Position xPos="26" yPos="266"/>
                </Graphics>
              </Node>
            </SuperNode>
            <SuperNode id="S106" name="Offer Turn Signal" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
                <PrologQuery>
                <String><![CDATA[signal(role, agent , offer).]]></String>
                </PrologQuery>
              </Commands>
              <Graphics>
                <Position xPos="506" yPos="266"/>
              </Graphics>
              <LocalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </LocalVariableBadge>
              <GlobalVariableBadge>
                <Position xPos="10" yPos="10"/>
              </GlobalVariableBadge>
              <Node id="N163" name="History" history="true">
                <Define>
                </Define>
                <Declare>
                </Declare>
                <Commands>
                </Commands>
                <Graphics>
                  <Position xPos="26" yPos="186"/>
                </Graphics>
              </Node>
            </SuperNode>
          </SuperNode>
          <SuperNode id="S102" name="Interruption" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="506" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N158" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="0" yPos="0"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S63" name="Bystander" comment="" hideLocalVar="false" hideGlobalVar="false" start="S66;N117;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S62" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="186" yPos="346" ctrlXPos="166" ctrlYPos="366"/>
                <ControlPoint xPos="106" yPos="346" ctrlXPos="126" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[speaker]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S65" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="266" yPos="266" ctrlXPos="286" ctrlYPos="246"/>
                <ControlPoint xPos="346" yPos="266" ctrlXPos="326" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[addressee]]></String>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="186" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Comment>
            <Graphics>
              <Boundary xPos="268" yPos="266" width="233" height="80"/>
            </Graphics>
            <Text style="color:blue">
              The dialog starts with the agent and the user in the bystander role. At the beginning the agent waits for some time period during which the user may occupy the turn. After this time period has elapsed it occups the turn in order to take on the speaker role.
            </Text>
          </Comment>
          <Node id="N114" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N117" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N117" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
          <SuperNode id="S66" name="Await Timeout" comment="" hideLocalVar="false" hideGlobalVar="false" start="N120;">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <IEdge target="S67" start="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="226" yPos="266" ctrlXPos="226" ctrlYPos="286"/>
                  <ControlPoint xPos="226" yPos="346" ctrlXPos="226" ctrlYPos="326"/>
                </Connection>
              </Graphics>
              <TimeoutCondition>
              <Int value="3000"/>
              </TimeoutCondition>
            </IEdge>
            <Graphics>
              <Position xPos="186" yPos="186"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N119" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="26" yPos="186"/>
              </Graphics>
            </Node>
            <Node id="N120" name="Wait" history="false">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <EEdge target="N120" start ="">
              <Graphics>
                <Connection>
                  <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                  <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
                </Connection>
              </Graphics>
              </EEdge>
              <Graphics>
                <Position xPos="26" yPos="266"/>
              </Graphics>
            </Node>
          </SuperNode>
          <SuperNode id="S67" name="Agent Occupy" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
              <PrologQuery>
              <String><![CDATA[signal(role, agent, occupy).]]></String>
              </PrologQuery>
            </Commands>
            <Graphics>
              <Position xPos="186" yPos="346"/>
            </Graphics>
            <LocalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </LocalVariableBadge>
            <GlobalVariableBadge>
              <Position xPos="10" yPos="10"/>
            </GlobalVariableBadge>
            <Node id="N121" name="History" history="true">
              <Define>
              </Define>
              <Declare>
              </Declare>
              <Commands>
              </Commands>
              <Graphics>
                <Position xPos="0" yPos="0"/>
              </Graphics>
            </Node>
          </SuperNode>
        </SuperNode>
        <SuperNode id="S65" name="Addressee" comment="" hideLocalVar="false" hideGlobalVar="false" start="N118;">
          <Define>
          </Define>
          <Declare>
          </Declare>
          <Commands>
          </Commands>
          <IEdge target="S63" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="346" yPos="346" ctrlXPos="326" ctrlYPos="366"/>
                <ControlPoint xPos="266" yPos="346" ctrlXPos="286" ctrlYPos="366"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[bystander]]></String>
            </Eq>
          </IEdge>
          <IEdge target="S62" start="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="363" yPos="346" ctrlXPos="305" ctrlYPos="446"/>
                <ControlPoint xPos="89" yPos="346" ctrlXPos="146" ctrlYPos="446"/>
              </Connection>
            </Graphics>
            <Eq>
              <Variable name="AgentRole"/>
              <String><![CDATA[speaker]]></String>
            </Eq>
          </IEdge>
          <Graphics>
            <Position xPos="346" yPos="266"/>
          </Graphics>
          <LocalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </LocalVariableBadge>
          <GlobalVariableBadge>
            <Position xPos="10" yPos="10"/>
          </GlobalVariableBadge>
          <Node id="N115" name="History" history="true">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <Graphics>
              <Position xPos="26" yPos="186"/>
            </Graphics>
          </Node>
          <Node id="N118" name="Wait" history="false">
            <Define>
            </Define>
            <Declare>
            </Declare>
            <Commands>
            </Commands>
            <EEdge target="N118" start ="">
            <Graphics>
              <Connection>
                <ControlPoint xPos="76" yPos="267" ctrlXPos="96" ctrlYPos="189"/>
                <ControlPoint xPos="101" yPos="286" ctrlXPos="171" ctrlYPos="246"/>
              </Connection>
            </Graphics>
            </EEdge>
            <Graphics>
              <Position xPos="26" yPos="266"/>
            </Graphics>
          </Node>
        </SuperNode>
      </SuperNode>
    </SuperNode>
  </SuperNode>
  <SuperNode id="S57" name="Initialization" comment="" hideLocalVar="false" hideGlobalVar="false" start="N213;">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
    </Commands>
    <EEdge target="S56" start ="">
    <Graphics>
      <Connection>
        <ControlPoint xPos="266" yPos="226" ctrlXPos="286" ctrlYPos="226"/>
        <ControlPoint xPos="346" yPos="226" ctrlXPos="326" ctrlYPos="226"/>
      </Connection>
    </Graphics>
    </EEdge>
    <Graphics>
      <Position xPos="186" yPos="186"/>
    </Graphics>
    <LocalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </LocalVariableBadge>
    <GlobalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </GlobalVariableBadge>
    <Node id="N210" name="History" history="true">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="186" yPos="106"/>
      </Graphics>
    </Node>
    <Node id="N212" name="Set Position" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
        <Play>
          <String><![CDATA[[tom WorldPosition x=1.5 y=3.75 z=10.9]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[player WorldPosition x=2.5 y=3.75 z=6.5]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[tom SitDown chairname=meeting_seat_left]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[player SitDown chairname=meeting_seat_right]]]></String>
        </Play>
      </Commands>
      <TEdge target="N216" start="" timeout="2500">
      <Graphics>
        <Connection>
          <ControlPoint xPos="426" yPos="226" ctrlXPos="526" ctrlYPos="226"/>
          <ControlPoint xPos="666" yPos="226" ctrlXPos="566" ctrlYPos="226"/>
        </Connection>
      </Graphics>
      </TEdge>
      <Graphics>
        <Position xPos="346" yPos="186"/>
      </Graphics>
    </Node>
    <Node id="N213" name="Await TWorld" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <TEdge target="N212" start="" timeout="2500">
      <Graphics>
        <Connection>
          <ControlPoint xPos="266" yPos="226" ctrlXPos="286" ctrlYPos="226"/>
          <ControlPoint xPos="346" yPos="226" ctrlXPos="326" ctrlYPos="226"/>
        </Connection>
      </Graphics>
      </TEdge>
      <Graphics>
        <Position xPos="186" yPos="186"/>
      </Graphics>
    </Node>
    <Node id="N216" name="Set Camera" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
        <Play>
          <String><![CDATA[[player Scale value=0.9]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[player Camera x=0.0 y=0.0]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[player CameraOffset x=0 y=-0.1 z=0.0]]]></String>
        </Play>
        <Play>
          <String><![CDATA[[player FocalLength value=28.0 time=0.05]]]></String>
        </Play>
      </Commands>
      <Graphics>
        <Position xPos="666" yPos="186"/>
      </Graphics>
    </Node>
  </SuperNode>
  <SuperNode id="S39" name="Testing" comment="" hideLocalVar="false" hideGlobalVar="false" start="N77;">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
    </Commands>
    <Graphics>
      <Position xPos="186" yPos="106"/>
    </Graphics>
    <LocalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </LocalVariableBadge>
    <GlobalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </GlobalVariableBadge>
    <Node id="N76" name="History" history="true">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="26" yPos="186"/>
      </Graphics>
    </Node>
    <Node id="N77" name="Timeout" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <CEdge target="N78" start="">
        <Graphics>
          <Connection>
            <ControlPoint xPos="266" yPos="226" ctrlXPos="326" ctrlYPos="226"/>
            <ControlPoint xPos="426" yPos="226" ctrlXPos="366" ctrlYPos="226"/>
          </Connection>
        </Graphics>
        <PrologQuery>
        <String><![CDATA[timeout(name, 3000).]]></String>
        </PrologQuery>
      </CEdge>
      <EEdge target="N77" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="236" yPos="187" ctrlXPos="256" ctrlYPos="109"/>
          <ControlPoint xPos="261" yPos="206" ctrlXPos="331" ctrlYPos="166"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="186" yPos="186"/>
      </Graphics>
    </Node>
    <Node id="N78" name="Repeat" history="false">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <EEdge target="N77" start ="">
      <Graphics>
        <Connection>
          <ControlPoint xPos="427" yPos="236" ctrlXPos="368" ctrlYPos="251"/>
          <ControlPoint xPos="265" yPos="236" ctrlXPos="323" ctrlYPos="251"/>
        </Connection>
      </Graphics>
      </EEdge>
      <Graphics>
        <Position xPos="426" yPos="186"/>
      </Graphics>
    </Node>
  </SuperNode>
  <SuperNode id="S18" name="Cleanup" comment="" hideLocalVar="false" hideGlobalVar="false" start="">
    <Define>
    </Define>
    <Declare>
    </Declare>
    <Commands>
      <PrologQuery>
      <String><![CDATA[cleanup.]]></String>
      </PrologQuery>
      <Play>
        <String><![CDATA[[wizard output text=cleanup]]]></String>
      </Play>
    </Commands>
    <EEdge target="S57" start ="">
    <Graphics>
      <Connection>
        <ControlPoint xPos="106" yPos="226" ctrlXPos="126" ctrlYPos="226"/>
        <ControlPoint xPos="186" yPos="226" ctrlXPos="166" ctrlYPos="226"/>
      </Connection>
    </Graphics>
    </EEdge>
    <Graphics>
      <Position xPos="26" yPos="186"/>
    </Graphics>
    <LocalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </LocalVariableBadge>
    <GlobalVariableBadge>
      <Position xPos="10" yPos="10"/>
    </GlobalVariableBadge>
    <Node id="N41" name="History" history="true">
      <Define>
      </Define>
      <Declare>
      </Declare>
      <Commands>
      </Commands>
      <Graphics>
        <Position xPos="26" yPos="186"/>
      </Graphics>
    </Node>
  </SuperNode>
  <UserCommands>
    <UserCommand name="print" classname ="java.lang.System.err" method="println">
      <Argument name="text" type="java.lang.String"/>
    </UserCommand>
  </UserCommands>
  <ClassPath>
  </ClassPath>
  <InitContext></InitContext>
</SceneFlow>